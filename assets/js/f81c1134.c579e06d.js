"use strict";(self.webpackChunkks_6088_ts_github_io=self.webpackChunkks_6088_ts_github_io||[]).push([[8130],{7735:e=>{e.exports=JSON.parse('{"archive":{"blogPosts":[{"id":"vscode-extension-github-copilot-chat","metadata":{"permalink":"/blog/vscode-extension-github-copilot-chat","source":"@site/blog/2025-01-27-vscode-extension-github-copilot-chat.md","title":"GitHub Copilot Chat extension \u6a5f\u80fd\u3092\u5229\u7528\u3057\u305f VS Code Extension \u306e\u958b\u767a","description":"VS Code \u306b\u306f\u3001\u62e1\u5f35\u6a5f\u80fd\u3092\u4f5c\u6210\u3059\u308b\u305f\u3081\u306e API \u304c\u63d0\u4f9b\u3055\u308c\u3066\u304a\u308a\u3001\u69d8\u3005\u306a\u6a5f\u80fd\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002","date":"2025-01-27T00:00:00.000Z","tags":[{"inline":true,"label":"vscode","permalink":"/blog/tags/vscode"},{"inline":true,"label":"github","permalink":"/blog/tags/github"}],"readingTime":5.595,"hasTruncateMarker":true,"authors":[{"name":"ks6088ts","title":"Software Engineer / Solutions Architect","url":"https://github.com/ks6088ts","imageURL":"https://github.com/ks6088ts.png","key":"ks6088ts","page":null}],"frontMatter":{"slug":"vscode-extension-github-copilot-chat","title":"GitHub Copilot Chat extension \u6a5f\u80fd\u3092\u5229\u7528\u3057\u305f VS Code Extension \u306e\u958b\u767a","authors":"ks6088ts","tags":["vscode","github"]},"unlisted":false,"nextItem":{"title":"GitHub Actions \u304b\u3089 OpenID Connect \u3067 Azure \u306b\u63a5\u7d9a\u3059\u308b\u8a2d\u5b9a\u4f5c\u696d\u3092 Terraform \u3067\u81ea\u52d5\u5316\u3059\u308b","permalink":"/blog/configure-oidc-azure"}},"content":"\x3c!-- textlint-disable --\x3e\\n\\nVS Code \u306b\u306f\u3001\u62e1\u5f35\u6a5f\u80fd\u3092\u4f5c\u6210\u3059\u308b\u305f\u3081\u306e API \u304c\u63d0\u4f9b\u3055\u308c\u3066\u304a\u308a\u3001\u69d8\u3005\u306a\u6a5f\u80fd\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\\n\u672c\u8a18\u4e8b\u3067\u306f\u3001GitHub Copilot Chat extension \u6a5f\u80fd\u3092\u5229\u7528\u3057\u3066\u3001\u751f\u6210 AI \u306b\u3088\u308b\u6a5f\u80fd\u3092 VS Code Extension \u306b\u8ffd\u52a0\u3059\u308b\u65b9\u6cd5\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\\n\\n\u4eca\u56de\u4f5c\u6210\u3057\u305f\u30b5\u30f3\u30d7\u30eb\u306f [sandbox-vscode-extension](https://marketplace.visualstudio.com/items?itemName=ks6088ts.sandbox-vscode-extension) \u3068\u3057\u3066 Marketplace \u306b\u516c\u958b\u3057\u3066\u3044\u307e\u3059\u3002\\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f GitHub ([ks6088ts-labs/sandbox-vscode-extension](https://github.com/ks6088ts-labs/sandbox-vscode-extension)) \u3067\u516c\u958b\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n\x3c!--truncate--\x3e\\n\\nGitHub Copilot Chat extension \u6a5f\u80fd\u3092\u5229\u7528\u3057\u3066\u3001\\n\\n- `@cc /summarize <\u6587\u7ae0>` \u3067\u6587\u7ae0\u3092\u8981\u7d04\\n- `@cc /translate <\u6587\u7ae0>` \u3067\u6587\u7ae0\u3092\u7ffb\u8a33 (\u6587\u7ae0\u304c\u65e5\u672c\u8a9e\u3067\u3042\u308c\u3070\u82f1\u8a9e\u306b\u3001\u82f1\u8a9e\u3067\u3042\u308c\u3070\u65e5\u672c\u8a9e\u306b)\\n- `@cc /boscar <\u6587\u7ae0>` \u3067\u6587\u7ae0\u3092 BOSCAR \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3067\u6574\u7406\\n- `@cc /minutes <\u6587\u7ae0>` \u3067\u56fa\u5b9a\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306e\u8b70\u4e8b\u9332\u3092\u4f5c\u6210\\n\\n\u3059\u308b\u6a5f\u80fd\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002\u4f8b\u3048\u3070\u7ffb\u8a33\u6a5f\u80fd\u306e\u5229\u7528\u30a4\u30e1\u30fc\u30b8\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\\n\\n![translate](https://raw.githubusercontent.com/ks6088ts-labs/sandbox-vscode-extension/refs/heads/main/assets/translate.gif)\\n\\n## TL;DR\\n\\nGitHub Copilot Chat extension \u6a5f\u80fd\u3092\u5229\u7528\u3057\u305f VS Code \u62e1\u5f35\u6a5f\u80fd\u3092\u4f5c\u6210\u3057\u3001Marketplace \u306b\u516c\u958b\u3057\u307e\u3057\u305f\u3002\\n\\n- VS Code \u62e1\u5f35\u306e\u958b\u767a\u3092\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb ([Your First Extension](https://code.visualstudio.com/api/get-started/your-first-extension)) \u3067\u57fa\u790e\u3092\u5b66\u3076\\n- GitHub Copilot Chat extension \u6a5f\u80fd\u306e\u958b\u767a\u3092\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb ([Tutorial: Build a code tutorial chat participant with the Chat API](https://code.visualstudio.com/api/extension-guides/chat-tutorial)) \u3067\u5b66\u3076\\n- \u7ffb\u8a33\u30fb\u8981\u7d04\u30fb\u60c5\u5831\u6574\u7406\u306a\u3069\u3001\u65e5\u3005\u306e\u696d\u52d9\u306b\u5f79\u7acb\u3064\u6a5f\u80fd\u3092\u30b3\u30de\u30f3\u30c9\u3068\u3057\u3066\u8ffd\u52a0\u3057\u307e\u3057\u305f\\n- \u5b9f\u88c5\u3057\u305f VS Code Extension \u3092 Marketplace \u306b\u516c\u958b\u3057\u307e\u3057\u305f\\n\\n---\\n\\n## \u307e\u305a\u306f VS Code \u62e1\u5f35\u6a5f\u80fd\u306e\u958b\u767a\\n\\n\u30bc\u30ed\u304b\u3089 VS Code \u62e1\u5f35\u6a5f\u80fd\u3092\u4f5c\u6210\u3059\u308b\u65b9\u6cd5\u3092\u5b66\u3073\u307e\u3059\u3002\\n[Your First Extension](https://code.visualstudio.com/api/get-started/your-first-extension) \u304c\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3068\u3057\u3066\u63d0\u4f9b\u3055\u308c\u3066\u304a\u308a\u3001\u3053\u3061\u3089\u3092\u53c2\u8003\u306b\u9032\u3081\u307e\u3059\u3002\\n\\n```shell\\n# \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\\nnpx --package yo --package generator-code -- yo code\\n\\n# \u3044\u304f\u3064\u304b\u306e\u8cea\u554f\u306b\u56de\u7b54\u3057\u307e\u3059\\n\\n# ? What type of extension do you want to create? New Extension (TypeScript)\\n# ? What\'s the name of your extension? sandbox-vscode-extension\\n# ? What\'s the identifier of your extension? sandbox-vscode-extension\\n# ? What\'s the description of your extension?\\n# ? Initialize a git repository? Yes\\n# ? Which bundler to use? esbuild\\n# ? Which package manager to use? pnpm\\n```\\n\\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u3067\u8cea\u554f\u306b\u56de\u7b54\u3059\u308b\u3068\u3001VS Code \u62e1\u5f35\u6a5f\u80fd\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\\nVS Code \u4e0a\u3067\u3001`F5` \u30ad\u30fc\u3092\u62bc\u3059\u3068\u3001\u30c7\u30d0\u30c3\u30b0\u30e2\u30fc\u30c9\u3067\u62e1\u5f35\u6a5f\u80fd\u304c\u8d77\u52d5\u3059\u308b\u306a\u3069\u3001\u57fa\u672c\u7684\u306a\u6240\u4f5c\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\\n\\n## GitHub Copilot Chat extension \u6a5f\u80fd\u3092\u5229\u7528\u3059\u308b\\n\\n[Chat extensions](https://code.visualstudio.com/api/extension-guides/chat) \u306b\u57fa\u790e\u7684\u306a\u30c1\u30e3\u30c3\u30c8\u62e1\u5f35\u6a5f\u80fd\u306e\u6982\u8981\u304c\u8a18\u8f09\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\n\u5177\u4f53\u7684\u306a\u958b\u767a\u624b\u9806\u306f\u3001[Tutorial: Build a code tutorial chat participant with the Chat API](https://code.visualstudio.com/api/extension-guides/chat-tutorial) \u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\n\\nSlack \u3067\u3044\u3046\u3068\u3053\u308d\u306e slash \u30b3\u30de\u30f3\u30c9\u306e\u3088\u3046\u306a\u6a5f\u80fd\u3092\u8ffd\u52a0\u3059\u308b\u306b\u306f\u3001`package.json` \u306e `contributes.chatParticipants.commands` \u306b\u30b3\u30de\u30f3\u30c9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\\n\\n```json\\n{\\n  ...\\n    \\"chatParticipants\\": [\\n      {\\n        \\"id\\": \\"ks6088ts.custom-copilot\\",\\n        \\"fullName\\": \\"CustomCopilot\\",\\n        \\"name\\": \\"cc\\",\\n        \\"description\\": \\"CustomCopilot \u306f\u3001\u65e5\u3005\u306e\u696d\u52d9\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u307e\u3059\u3002\\",\\n        \\"isSticky\\": true,\\n        \\"commands\\": [\\n          {\\n            \\"name\\": \\"boscar\\",\\n            \\"description\\": \\"BOSCAR \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306b\u57fa\u3065\u3044\u3066\u60c5\u5831\u3092\u6574\u7406\u3057\u307e\u3059\u3002\\"\\n          },\\n          {\\n            \\"name\\": \\"translate\\",\\n            \\"description\\": \\"\u65e5\u672c\u8a9e\u2194\u82f1\u8a9e\u7ffb\u8a33\u3092\u884c\u3044\u307e\u3059\u3002\\"\\n          },\\n          {\\n            \\"name\\": \\"summarize\\",\\n            \\"description\\": \\"\u6587\u7ae0\u3092\u8981\u7d04\u3057\u307e\u3059\u3002\\"\\n          },\\n          {\\n            \\"name\\": \\"minutes\\",\\n            \\"description\\": \\"\u8b70\u4e8b\u9332\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\\"\\n          }\\n        ]\\n      }\\n    ]\\n  },\\n  ...\\n}\\n```\\n\\n\u3042\u3068\u306f\u3001`src/extension.ts` \u306e\u5b9f\u88c5\u3092\u4fee\u6b63\u3059\u308c\u3070\u5b8c\u4e86\u3067\u3059\u3002\\n\u4eca\u56de\u306f[\u30b3\u30de\u30f3\u30c9\u306e\u7a2e\u985e\u306b\u5fdc\u3058\u3066\u30d7\u30ed\u30f3\u30d7\u30c8\u3092\u5909\u66f4\u3059\u308b\u51e6\u7406](https://github.com/ks6088ts-labs/sandbox-vscode-extension/blob/v0.0.3/src/extension.ts#L49)\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002\\n\\n## Marketplace \u306b\u516c\u958b\u3059\u308b\\n\\n[Publishing Extensions](https://code.visualstudio.com/api/working-with-extensions/publishing-extension) \u3092\u53c2\u8003\u306b\u3001Marketplace \u306b\u62e1\u5f35\u6a5f\u80fd\u3092\u516c\u958b\u3057\u307e\u3059\u3002\\n\u30b5\u30a4\u30c8\u306b\u3082\u8a18\u8f09\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u4f5c\u6210\u3084\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u53d6\u5f97\u3001Publisher \u306e\u4f5c\u6210\u306a\u3069\u304c\u5fc5\u8981\u3067\u3059\u3002\\n\u3056\u3063\u304f\u308a\u3044\u3046\u3068\u4ee5\u4e0b\u306e\u624b\u9806\u304c\u5fc5\u8981\u3067\u3059\u3002\\n\\n- `https://dev.azure.com/YOUR_ORG/_usersSettings/tokens` \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001\u62e1\u5f35\u6a5f\u80fd\u3092\u516c\u958b\u3059\u308b\u305f\u3081\u306e Personal Access Token \u3092\u53d6\u5f97\\n- `https://marketplace.visualstudio.com/manage/publishers/YOUR_ORG` \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001Publisher \u3068 VSCode \u62e1\u5f35\u6a5f\u80fd\u3092\u7ba1\u7406\\n\\n\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u516c\u958b\u306e\u305f\u3081\u306b\u5fc5\u8981\u306a\u30b3\u30fc\u30c9\u306e\u4fee\u6b63\u3068\u3057\u3066\u306f\u3001\\n\\n- `package.json` \u306e `publisher`, `repository`, `name` \u306a\u3069\u306e\u60c5\u5831\u3092\u9069\u5207\u306b\u8a2d\u5b9a\\n- `README.md` \u306b\u62e1\u5f35\u6a5f\u80fd\u306e\u8aac\u660e\u3092\u8a18\u8f09\\n- `LICENSE` \u30d5\u30a1\u30a4\u30eb\u3092\u8ffd\u52a0\\n\\n\u306a\u3069\u304c\u3042\u308a\u307e\u3059\u3002\\n\u306a\u304a\u3001\u79c1\u306e\u74b0\u5883\u3060\u3051\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c pnpm \u3067\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u30f3\u30b0\u304c\u3046\u307e\u304f\u3044\u304b\u306a\u3044\u305f\u3081\u3001npm \u304b yarn \u3067\u30d1\u30c3\u30b1\u30fc\u30b8\u30f3\u30b0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002(\u3053\u3053\u3067\u306f yarn \u3092\u5229\u7528\u3057\u3066\u3044\u307e\u3059)\\n\\n---\\n\\n## \u307e\u3068\u3081\\n\\nGitHub Copilot Chat extension \u6a5f\u80fd\u3092\u5229\u7528\u3057\u3066\u3001VS Code \u62e1\u5f35\u6a5f\u80fd\u3092\u4f5c\u6210\u3057\u3001Marketplace \u306b\u516c\u958b\u3057\u307e\u3057\u305f\u3002\\n\u516c\u5f0f\u304c\u63d0\u4f9b\u3059\u308b\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u8003\u306b\u3001\u57fa\u790e\u7684\u306a\u62e1\u5f35\u6a5f\u80fd\u306e\u4f5c\u6210\u65b9\u6cd5\u3092\u5b66\u3073\u3001GitHub Copilot Chat extension \u6a5f\u80fd\u3092\u5229\u7528\u3057\u3066\u3001\u65e5\u3005\u306e\u696d\u52d9\u306b\u5f79\u7acb\u3064\u6a5f\u80fd\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002"},{"id":"configure-oidc-azure","metadata":{"permalink":"/blog/configure-oidc-azure","source":"@site/blog/2024-12-13-configure-oidc-azure/index.md","title":"GitHub Actions \u304b\u3089 OpenID Connect \u3067 Azure \u306b\u63a5\u7d9a\u3059\u308b\u8a2d\u5b9a\u4f5c\u696d\u3092 Terraform \u3067\u81ea\u52d5\u5316\u3059\u308b","description":"Microsoft Azure Tech Advent Calendar 2024 \u306e 12/13 \u306e\u6295\u7a3f\u8a18\u4e8b\u3067\u3059\u3002","date":"2024-12-13T00:00:00.000Z","tags":[{"inline":true,"label":"azure","permalink":"/blog/tags/azure"},{"inline":true,"label":"terraform","permalink":"/blog/tags/terraform"},{"inline":true,"label":"github","permalink":"/blog/tags/github"}],"readingTime":22.33,"hasTruncateMarker":true,"authors":[{"name":"ks6088ts","title":"Software Engineer / Solutions Architect","url":"https://github.com/ks6088ts","imageURL":"https://github.com/ks6088ts.png","key":"ks6088ts","page":null}],"frontMatter":{"slug":"configure-oidc-azure","title":"GitHub Actions \u304b\u3089 OpenID Connect \u3067 Azure \u306b\u63a5\u7d9a\u3059\u308b\u8a2d\u5b9a\u4f5c\u696d\u3092 Terraform \u3067\u81ea\u52d5\u5316\u3059\u308b","authors":"ks6088ts","tags":["azure","terraform","github"]},"unlisted":false,"prevItem":{"title":"GitHub Copilot Chat extension \u6a5f\u80fd\u3092\u5229\u7528\u3057\u305f VS Code Extension \u306e\u958b\u767a","permalink":"/blog/vscode-extension-github-copilot-chat"},"nextItem":{"title":"GitHub \u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u8ffd\u52a0\u3059\u308b","permalink":"/blog/default-community-health-files"}},"content":"\x3c!-- textlint-disable --\x3e\\n\\n[Microsoft Azure Tech Advent Calendar 2024](https://qiita.com/advent-calendar/2024/microsoft-azure-tech) \u306e 12/13 \u306e\u6295\u7a3f\u8a18\u4e8b\u3067\u3059\u3002\\n\\n\u672c\u8a18\u4e8b\u3067\u306f\u3001GitHub Actions \u304b\u3089 OpenID Connect \u3067 Azure \u306b\u63a5\u7d9a\u3059\u308b\u8a2d\u5b9a\u4f5c\u696d\u3092 Terraform \u3067\u81ea\u52d5\u5316\u3059\u308b\u65b9\u6cd5\u306b\u3064\u3044\u3066\u3054\u7d39\u4ecb\u3057\u307e\u3059\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## TL;DR\\n\\n- Terraform \u3092\u5229\u7528\u3057\u3066\u3001GitHub Actions \u304b\u3089 OpenID Connect \u3067 Azure \u306b\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306e\u8a2d\u5b9a\u4f5c\u696d\u3092\u81ea\u52d5\u5316\u3057\u307e\u3057\u305f\\n- \u30b9\u30af\u30ea\u30d7\u30c8\u3068 Terraform \u306e\u30b5\u30f3\u30d7\u30eb\u306f [\u3053\u3061\u3089](https://github.com/ks6088ts-labs/baseline-environment-on-azure-terraform) \u306b\u3066 MIT \u30e9\u30a4\u30bb\u30f3\u30b9\u3067\u516c\u958b\u3057\u307e\u3057\u305f\\n- GitHub Codespaces \u3068 GitHub Actions \u306e\u30a4\u30d9\u30f3\u30c8\u30c8\u30ea\u30ac\u30fc\u304b\u3089\u30ea\u30bd\u30fc\u30b9\u306e\u30c7\u30d7\u30ed\u30a4\u304c\u5b9f\u884c\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3057\u305f\\n\\n---\\n\\n## \u5168\u4f53\u69cb\u6210\\n\\n### OpenID Connect \u63a5\u7d9a\u8a2d\u5b9a\u306e\u81ea\u52d5\u5316\\n\\nGitHub Actions \u304b\u3089 OpenID Connect \u3067 Azure \u306b\u63a5\u7d9a\u3059\u308b\u306e\u306b\u5fc5\u8981\u306a\u8a2d\u5b9a\u4f5c\u696d\u3092\u81ea\u52d5\u5316\u3059\u308b\u6d41\u308c\u3092\u793a\u3057\u307e\u3059\u3002  \\n\u4e0b\u56f3\u3067\u306f\u3001\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u74b0\u5883\u304b\u3089 Terraform \u3092\u5b9f\u884c\u3057\u3066\u3001GitHub \u3068 Azure \u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u4e0a\u306b\u5fc5\u8981\u306a\u8a2d\u5b9a\u6d41\u3057\u8fbc\u3080\u305f\u3081\u3001\u4ee5\u4e0b 2 \u3064\u306e\u30b7\u30ca\u30ea\u30aa\u3092\u5b9f\u884c\u3057\u3066\u3044\u307e\u3059\u3002\\n\u30b7\u30ca\u30ea\u30aa\u3092\u5206\u3051\u3066\u5b9f\u884c\u3059\u308b\u306e\u306f\u3001\u4f9d\u5b58\u3059\u308b Terraform provider \u304c\u7570\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3084\u3001\u30bf\u30fc\u30b2\u30c3\u30c8\u3068\u306a\u308b\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u304c\u7570\u306a\u308b\u3053\u3068\u304b\u3089\u518d\u5229\u7528\u6027\u3092\u9ad8\u3081\u308b\u305f\u3081\u3067\u3059\u3002\\n\\n1. [configure_github_secrets](https://github.com/ks6088ts-labs/baseline-environment-on-azure-terraform/blob/main/infra/scenarios/configure_github_secrets/README.md): GitHub \u5074\u306b Environment Secret \u3092\u4f5c\u6210\u3059\u308b\u51e6\u7406\u304c\u542b\u307e\u308c\u307e\u3059\u3002\\n1. [create_service_principal](https://github.com/ks6088ts-labs/baseline-environment-on-azure-terraform/blob/main/infra/scenarios/create_service_principal/README.md): Terraform \u3092\u4f7f\u7528\u3057\u3066\u3001Azure \u5074\u306b\u30b5\u30fc\u30d3\u30b9\u30d7\u30ea\u30f3\u30b7\u30d1\u30eb\u3092\u4f5c\u6210\u3059\u308b\u51e6\u7406\\n\\n![configure_oidc_azure.png](https://github.com/ks6088ts-labs/baseline-environment-on-azure-terraform/blob/v0.0.1/docs/images/configure_oidc_azure.png?raw=true)\\n\\n### OpenID Connect \u63a5\u7d9a\u3067 GitHub Actions \u304b\u3089 Azure \u306b\u30ea\u30bd\u30fc\u30b9\u3092\u30c7\u30d7\u30ed\u30a4\\n\\n\u4e0a\u8a18\u306e\u8a2d\u5b9a\u3092\u884c\u3046\u3068\u3001GitHub Actions \u304b\u3089 OpenID Connect \u3092\u5229\u7528\u3057\u3066 Azure \u306b\u63a5\u7d9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\\n\u4e0b\u56f3\u3067\u306f\u3001\u6255\u3044\u51fa\u3055\u308c\u305f\u63a5\u7d9a\u8a2d\u5b9a\u3092\u5229\u7528\u3057\u3066\u3001GitHub Actions \u304b\u3089 Azure \u306b\u30ea\u30bd\u30fc\u30b9\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u30b7\u30ca\u30ea\u30aa (e.g. [tfstate_backend](https://github.com/ks6088ts-labs/baseline-environment-on-azure-terraform/blob/main/infra/scenarios/tfstate_backend/README.md)) \u3092\u5b9f\u884c\u3057\u305f\u69d8\u5b50\u3092\u793a\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n![deploy_tfstate_backend.png](https://github.com/ks6088ts-labs/baseline-environment-on-azure-terraform/blob/v0.0.1/docs/images/deploy_tfstate_backend.png?raw=true)\\n\\n## GitHub Actions \u304b\u3089 OpenID Connect \u3067 Azure \u306b\u63a5\u7d9a\u3059\u308b\u8a2d\u5b9a\u4f5c\u696d\u3092\u624b\u52d5\u3067\u884c\u3046\\n\\n### \u306a\u305c OpenID Connect \u3092\u4f7f\u3063\u3066 Azure \u306b\u63a5\u7d9a\u3059\u308b\u306e\u304b\\n\\n\u307e\u305a\u3001`GitHub Actions \u304b\u3089 OpenID Connect \u3067 Azure \u306b\u63a5\u7d9a\u3059\u308b` \u3068\u306f\u3069\u3046\u3044\u3046\u3053\u3068\u304b\u8aac\u660e\u3057\u307e\u3059\u3002\\n\\nGitHub \u3068 Azure \u3092\u9023\u643a\u3055\u305b\u308b\u305f\u3081\u306b\u3001\u3053\u3053\u3067\u306f GitHub Actions \u3092\u5229\u7528\u3057\u307e\u3059\u3002GitHub Actions \u306f\u3001GitHub \u304c\u63d0\u4f9b\u3059\u308b\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u306e\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u3092\u81ea\u52d5\u5316\u3059\u308b\u30b5\u30fc\u30d3\u30b9\u3067\u3059\u3002\u4f8b\u3048\u3070\u3001GitHub \u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u30d7\u30c3\u30b7\u30e5\u3055\u308c\u305f\u30b3\u30fc\u30c9\u3092\u81ea\u52d5\u7684\u306b\u30d3\u30eb\u30c9\u3001\u30c6\u30b9\u30c8\u3001\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3088\u3046\u306a CI/CD \u306e\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u306a\u3069\u306b\u5229\u7528\u3055\u308c\u307e\u3059\u3002\\n\\nAzure \u4e0a\u3067\u52d5\u4f5c\u3059\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092 GitHub Actions \u304b\u3089\u30c6\u30b9\u30c8\u3057\u305f\u308a\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u5834\u5408\u3001Azure \u306b\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306e\u8a8d\u8a3c\u304c\u5fc5\u8981\u3067\u3059\u3002Azure \u306b\u306f\u69d8\u3005\u306a\u8a8d\u8a3c\u65b9\u6cd5\u304c\u63d0\u4f9b\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u5f93\u6765\u306f\u3001Azure \u306e\u30b5\u30fc\u30d3\u30b9\u30d7\u30ea\u30f3\u30b7\u30d1\u30eb\u3092\u4f5c\u6210\u3057\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u4f7f\u3063\u3066\u8a8d\u8a3c\u3059\u308b\u65b9\u6cd5\u304c\u4e00\u822c\u7684\u3067\u3057\u305f\u3002\u3057\u304b\u3057\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u4e0a\u306e\u7406\u7531\u304b\u3089\u3001\u73fe\u5728\u3067\u306f OpenID Connect \u3092\u4f7f\u3063\u305f\u8a8d\u8a3c\u65b9\u6cd5\u304c\u63a8\u5968\u3055\u308c\u3066\u3044\u307e\u3059\u3002 (ref. [GitHub Actions \u3092\u4f7f\u7528\u3057\u3066 Azure \u306b\u63a5\u7d9a\u3059\u308b\\n](https://learn.microsoft.com/ja-jp/azure/developer/github/connect-from-azure?tabs=azure-portal%2Clinux))\\n\\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u306e\u3088\u3046\u306a\u9759\u7684\u306a\u8a8d\u8a3c\u60c5\u5831\u306f\u6709\u52b9\u671f\u9650\u304c\u9577\u304f\u3001\u6f0f\u6d29\u3057\u305f\u5834\u5408\u306e\u30ea\u30b9\u30af\u304c\u9ad8\u3044\u3067\u3059\u3002\u307e\u305f\u3001\u30ad\u30fc\u306e\u7ba1\u7406\u3082\u7169\u96d1\u306b\u306a\u308a\u307e\u3059\u3002  \\n\u4e00\u65b9\u3067 OpenID Connect \u3092\u4f7f\u3046\u3068\u3001\u9759\u7684\u306a\u8a8d\u8a3c\u60c5\u5831\u3092\u4f7f\u7528\u305b\u305a\u4e00\u6642\u7684\u306a\u30c8\u30fc\u30af\u30f3\u3067\u8a8d\u8a3c\u3092\u884c\u3044\u307e\u3059\u3002\u3053\u306e\u30c8\u30fc\u30af\u30f3\u306f\u6709\u52b9\u671f\u9650\u304c\u77ed\u304f\u3001\u30a2\u30af\u30bb\u30b9\u5143\u3084\u5bfe\u8c61\u30ea\u30bd\u30fc\u30b9\u306e\u6a29\u9650\u7bc4\u56f2\u3092\u7d30\u304b\u304f\u5236\u9650\u3067\u304d\u308b\u305f\u3081\u3001\u6f0f\u6d29\u3057\u3066\u3082\u30ea\u30b9\u30af\u304c\u4f4e\u304f\u306a\u308a\u307e\u3059\u3002\\n\u305d\u306e\u305f\u3081\u3001OpenID Connect \u3092\u4f7f\u3063\u305f\u8a8d\u8a3c\u65b9\u6cd5\u304c\u63a8\u5968\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\n\\nOpenID Connect \u3092\u5229\u7528\u3059\u308b\u30e1\u30ea\u30c3\u30c8\u306b\u95a2\u3057\u3066\u306f\u3001[GitHub CI/CD \u5b9f\u8df5\u30ac\u30a4\u30c9\u2015\u2015\u6301\u7d9a\u53ef\u80fd\u306a\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u3092\u652f\u3048\u308b GitHub Actions \u306e\u8a2d\u8a08\u3068\u904b\u7528 \u30a8\u30f3\u30b8\u30cb\u30a2\u9078\u66f8](https://amzn.to/3Co02xA)\u306e`\u7b2c11\u7ae0 OpenID Connect\u306b\u3088\u308b\u30bb\u30ad\u30e5\u30a2\u306a\u30af\u30e9\u30a6\u30c9\u9023\u643a`\u306b\u8a73\u3057\u304f\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u3002\\n\\n### \u624b\u52d5\u3067\u306e\u63a5\u7d9a\u8a2d\u5b9a\u306f\u624b\u9593\u304c\u304b\u304b\u308b\u3057\u30df\u30b9\u304c\u8d77\u304d\u3084\u3059\u3044\\n\\nGitHub Actions \u304b\u3089 OpenID Connect \u3067 Azure \u306b\u63a5\u7d9a\u3059\u308b\u8a2d\u5b9a\u4f5c\u696d\u306f\u3001\u624b\u52d5\u3067\u884c\u3046\u3068\u3056\u3063\u304f\u308a\u3068\u4ee5\u4e0b\u306e\u6d41\u308c\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n**Azure Portal \u306b\u3066**\\n\\n- \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u767b\u9332\u3059\u308b\\n- \u767b\u9332\u3057\u305f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u5bfe\u3057\u3066\u30d5\u30a7\u30c7\u30ec\u30fc\u30b7\u30e7\u30f3\u8cc7\u683c\u60c5\u5831\u3092\u8ffd\u52a0\u3059\u308b\\n- \u30ed\u30fc\u30eb\u5272\u308a\u5f53\u3066\u3092\u884c\u3046\\n\\n**GitHub \u306b\u3066**\\n\\n- \u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u74b0\u5883(=Environment)\u3092\u4f5c\u6210\u3059\u308b\\n- \u30ea\u30dd\u30b8\u30c8\u30ea\u3067\u4f5c\u6210\u3057\u305f\u74b0\u5883\u4e0a\u306b\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u767b\u9332\u3059\u308b\\n\\n\u4f5c\u696d\u624b\u9806\u306b\u95a2\u3059\u308b\u4e00\u6b21\u60c5\u5831\u306f\u3001[GitHub Actions \u3092\u4f7f\u7528\u3057\u3066 Azure \u306b\u63a5\u7d9a\u3059\u308b](https://learn.microsoft.com/azure/developer/github/connect-from-azure?tabs=azure-cli%2Clinux) \u306b\u3042\u308a\u307e\u3059\u3002  \\n\u6b8b\u5ff5\u306a\u3053\u3068\u306b\u79c1\u306f\u305d\u308c\u3067\u3082\u3088\u304f\u308f\u304b\u3089\u306a\u304b\u3063\u305f\u306e\u3067\u3001\u8abf\u3079\u3066\u307f\u305f\u3068\u3053\u308d [Check! GitHub Actions \u3067 OpenID Connect(OIDC) \u3067 Azure \u306b\u5b89\u5168\u306b\u63a5\u7d9a\u3059\u308b](https://zenn.dev/dzeyelid/articles/5f20acbe549666) \u3068\u3044\u3046\u8a18\u4e8b\u3092\u898b\u3064\u3051\u307e\u3057\u305f\u3002GUI \u64cd\u4f5c\u306e\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\u4ed8\u304d\u3067\u5177\u4f53\u7684\u306a\u624b\u9806\u304c\u89e3\u8aac\u3055\u308c\u3066\u304a\u308a\u3001\u3068\u3066\u3082\u53c2\u8003\u306b\u306a\u308a\u307e\u3057\u305f\u3002\\n\\n![GitHub Actions \u3067 OpenID Connect \u3067 Azure \u306b\u63a5\u7d9a\u3059\u308b\u8a2d\u5b9a](https://res.cloudinary.com/zenn/image/fetch/s--jeiZgBuE--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/4db01a487f4e1f7e8807f25c.png%3Fsha%3Db18c893e94c6fdeeeb28d1d181bb1d74d1ebbd8e)\\n\\n\u624b\u52d5\u3067\u8a2d\u5b9a\u3067\u304d\u305f\u306e\u306f\u5b09\u3057\u3044\u3067\u3059\u304c\u3001\u3084\u306f\u308a\u624b\u52d5\u3067\u306e\u8a2d\u5b9a\u306f\u9762\u5012\u3067\u30df\u30b9\u304c\u8d77\u304d\u3084\u3059\u3044\u3067\u3059\u3002\u5b9f\u969b\u3001\u3053\u306e\u4f5c\u696d\u3092\u884c\u3046\u904e\u7a0b\u3067\u4f55\u5ea6\u304b\u30df\u30b9\u3092\u3057\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\\n\\n## \u9762\u5012\u3067\u7e70\u308a\u8fd4\u3059\u4f5c\u696d\u306f\u81ea\u52d5\u5316\u3059\u3079\u3057\\n\\n\u624b\u52d5\u3067\u3053\u306e\u4f5c\u696d\u3092\u884c\u3046\u306e\u306f\u9762\u5012\u3067\u30df\u30b9\u304c\u8d77\u304d\u3084\u3059\u3044\u3067\u3059\u3002  \\nAzure \u3068 GitHub \u3092\u4f7f\u3063\u305f CI/CD \u3092\u542b\u3080\u672c\u683c\u7684\u306a\u958b\u767a\u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b\u5834\u5408\u3001\u65b0\u3057\u3044\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u7acb\u3061\u4e0a\u3052\u308b\u305f\u3073\u306b\u3053\u306e\u8a2d\u5b9a\u4f5c\u696d\u3092\u7e70\u308a\u8fd4\u3059\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\\n\u305d\u306e\u305f\u3081\u3001\u5c06\u6765\u306e\u81ea\u5206\u306e\u305f\u3081\u306b\u81ea\u52d5\u5316\u3057\u3066\u304a\u304f\u3068\u30b3\u30b9\u30c8\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u304c\u826f\u3044\u3068\u611f\u3058\u3001\u81ea\u52d5\u5316\u3059\u308b\u30e2\u30c1\u30d9\u30fc\u30b7\u30e7\u30f3\u304c\u6e67\u304d\u307e\u3057\u305f\u3002\\n\\n### \u30a2\u30d7\u30ed\u30fc\u30c1 1. \u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u3044\u3066\u81ea\u52d5\u5316\u3059\u308b\\n\\nAzure Portal \u306a\u3069\u306e Web UI \u306f\u3001\u30d9\u30f3\u30c0\u30fc\u5074\u306e\u89aa\u5207\u5fc3\u3067\u898b\u305f\u76ee\u3084\u64cd\u4f5c\u624b\u9806\u304c\u5909\u308f\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\u3092\u4f7f\u3063\u305f\u624b\u9806\u66f8\u306f\u521d\u5fc3\u8005\u306b\u3068\u3063\u3066\u975e\u5e38\u306b\u308f\u304b\u308a\u3084\u3059\u3044\u53cd\u9762\u3001UI \u304c\u5909\u308f\u308b\u305f\u3073\u306b\u66f4\u65b0\u304c\u5fc5\u8981\u3067\u3059\u3002\u4e00\u65b9\u3001\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u304c\u5185\u90e8\u7684\u306b\u30b3\u30fc\u30eb\u3057\u3066\u3044\u308b API \u306f\u57fa\u672c\u7684\u306b\u5f8c\u65b9\u4e92\u63db\u6027\u304c\u4fdd\u305f\u308c\u308b\u3053\u3068\u304c\u591a\u3044\u305f\u3081\u3001API \u3092\u4f7f\u3063\u305f\u81ea\u52d5\u5316\u306f\u4fdd\u5b88\u6027\u306b\u512a\u308c\u3066\u3044\u307e\u3059\u3002`GUI\u306f\u5909\u308f\u308b\u304cAPI\u306f\u5909\u308f\u3089\u306a\u3044`\u3068\u3044\u3046\u8003\u3048\u65b9\u306f\u3001\u81ea\u52d5\u5316\u306e\u89b3\u70b9\u304b\u3089\u91cd\u8981\u3067\u3059\u3002\\n\\n\u64cd\u4f5c\u624b\u9806\u3092\u81ea\u52d5\u5316\u3059\u308b\u30a2\u30d7\u30ed\u30fc\u30c1\u3068\u3057\u3066\u3001\u6b63\u653b\u6cd5\u3068\u3057\u3066\u306f UI \u64cd\u4f5c\u306b\u5bfe\u5fdc\u3059\u308b API \u3092\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3084 Copilot \u3092\u4f7f\u3063\u3066\u8abf\u3079\u3001CLI \u306e\u30b3\u30de\u30f3\u30c9\u3084\u30b9\u30af\u30ea\u30d7\u30c8\u306b\u66f8\u304d\u8d77\u3053\u3059\u3053\u3068\u304c\u8003\u3048\u3089\u308c\u307e\u3059\u3002\\n\\n\u5834\u5408\u306b\u4f9d\u3063\u3066\u306f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\u306a\u3044\u5834\u5408\u3082\u3042\u308a\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30d6\u30e9\u30a6\u30b6\u306e\u30c4\u30fc\u30eb\u3092\u4f7f\u3063\u3066\u30ea\u30af\u30a8\u30b9\u30c8\u5185\u5bb9\u3092\u30ad\u30e3\u30d7\u30c1\u30e3\u3057\u3001\u305d\u3053\u304b\u3089\u89b3\u6e2c\u3067\u304d\u305f\u6319\u52d5\u3092\u5143\u306b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u304f\u3053\u3068\u3082\u6280\u8853\u7684\u306b\u306f\u53ef\u80fd\u3067\u3059\u3002\\n(\u203b \u305f\u3060\u3057\u3001\u3053\u308c\u306f\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30de\u304c\u660e\u793a\u7684\u306b API \u3092\u5b9a\u7fa9\u3057\u305f\u3082\u306e\u3067\u306f\u306a\u3044\u305f\u3081\u3001\u3042\u307e\u308a\u884c\u5100\u306e\u826f\u3044\u65b9\u6cd5\u3067\u306f\u306a\u304f\u63a8\u5968\u3055\u308c\u307e\u305b\u3093\u3002)\\n\\n| \u30d6\u30e9\u30a6\u30b6       | \u30ea\u30f3\u30af                                                                                                                 |\\n| -------------- | ---------------------------------------------------------------------------------------------------------------------- |\\n| Microsoft Edge | [\u30cd\u30c3\u30c8\u30ef\u30fc\u30af \u30a2\u30af\u30c6\u30a3\u30d3\u30c6\u30a3\u306e\u691c\u67fb](https://learn.microsoft.com/ja-jp/microsoft-edge/devtools-guide-chromium/network/) |\\n| Google Chrome  | [\u30cd\u30c3\u30c8\u30ef\u30fc\u30af \u30d1\u30cd\u30eb\u306e\u4f7f\u7528](https://developer.chrome.com/docs/devtools/network?hl=ja)                                  |\\n\\n\u30b9\u30af\u30ea\u30d7\u30c8\u3078\u306e\u66f8\u304d\u8d77\u3053\u3057\u306f\u4e00\u6614\u524d\u307e\u3067\u306f\u30a6\u30a7\u30d6\u691c\u7d22\u3057\u3066\u89e3\u6c7a\u3057\u3066\u3044\u307e\u3057\u305f\u304c\u3001\u4eca\u306f [GitHub Copilot](https://github.com/features/copilot)\u306b\u304a\u4efb\u305b\u3059\u308b\u3068\u65e9\u3044\u3067\u3059\u3002\u30c1\u30e3\u30c3\u30c8\u3067\u805e\u304f\u3082\u3088\u3057\u3001\u9069\u5f53\u306a\u30d5\u30a1\u30a4\u30eb\u4e0a\u3067\u30b3\u30e1\u30f3\u30c8\u88dc\u5b8c\u306e\u5f62\u3067\u5bfe\u8a71\u3059\u308b\u3082\u3088\u3057\u3067\u3059\u3002  \\n\u79c1\u306f\u5f8c\u8005\u306e\u624b\u6cd5\u3092\u3088\u304f\u4f7f\u3044\u307e\u3059\u3002\u3084\u308a\u304b\u305f\u306f [GitHub Copilot \u30d1\u30bf\u30fc\u30f3&\u30a8\u30af\u30b5\u30b5\u30a4\u30ba > \u30b3\u30e1\u30f3\u30c8\u304b\u3089\u30b3\u30fc\u30c9\u3092\u751f\u6210](https://patterns.hattori.dev/ja/general/comment-to-code/) \u3092\u53c2\u8003\u306b\u3057\u3066\u3044\u307e\u3059\u3002\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u76ee\u6a19\u3068\u3057\u3066\u3044\u305f Azure \u3068 GitHub \u306e\u8a2d\u5b9a\u3092\u81ea\u52d5\u5316\u3059\u308b\u305f\u3081\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\u3002\\n\\n- [scripts/create-service-principal.sh](https://github.com/ks6088ts-labs/baseline-environment-on-azure-terraform/blob/v0.0.1/scripts/create-service-principal.sh): \u30b5\u30fc\u30d3\u30b9\u30d7\u30ea\u30f3\u30b7\u30d1\u30eb\u3092\u4f5c\u6210\u3057\u3066\u8cc7\u683c\u60c5\u5831\u30fb\u6a29\u9650\u5272\u308a\u5f53\u3066\u3092\u5b9f\u884c\u3059\u308b\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\\n- [scripts/configure-github-secrets.sh](https://github.com/ks6088ts-labs/baseline-environment-on-azure-terraform/blob/v0.0.1/scripts/configure-github-secrets.sh): GitHub \u306e\u74b0\u5883\u306b\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u8a2d\u5b9a\u3059\u308b\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\\n\\n\u9577\u3063\u305f\u3089\u3057\u3044\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u306f\u3042\u308a\u307e\u3059\u304c\u3001\u5b9f\u884c\u74b0\u5883\u306e\u4f9d\u5b58\u95a2\u4fc2\u306f\u30b3\u30f3\u30d1\u30af\u30c8\u306b\u7e8f\u307e\u3063\u3066\u3044\u308b\u306e\u3067\u8eab\u8efd\u306b\u4f7f\u3048\u305d\u3046\u3067\u3059\u3002\\n\u305f\u3060\u3001\u9014\u4e2d\u3067\u30a8\u30e9\u30fc\u304c\u8d77\u304d\u305f\u308a\u3057\u305f\u5834\u5408\u306f\u624b\u52d5\u3067\u4fee\u6b63\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u306e\u3067\u3001\u5b8c\u5168\u306a\u81ea\u52d5\u5316\u3068\u306f\u8a00\u3048\u307e\u305b\u3093\u3002\u518d\u73fe\u6027\u306b\u3082\u554f\u984c\u304c\u3042\u308b\u306e\u3067\u4ed6\u306e\u4eba\u306b\u81ea\u4fe1\u3092\u6301\u3063\u3066\u6e21\u3059\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002\\n\\n### \u30a2\u30d7\u30ed\u30fc\u30c1 2. IaC \u30c4\u30fc\u30eb\u3092\u5229\u7528\u3057\u3066\u81ea\u52d5\u5316\u3059\u308b\\n\\n\u624b\u9806\u304c\u8907\u96d1\u3067\u91cd\u539a\u9577\u5927\u306a\u6210\u679c\u7269\u3092\u4ed6\u8005\u306b\u6e21\u3059\u5834\u5408\u306f IaC \u30c4\u30fc\u30eb\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u304c\u591a\u3044\u3067\u3059\u3002\\n\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u306b\u6bd4\u3079\u308b\u3068\u66f8\u304f\u306e\u306b\u624b\u9593\u304c\u304b\u304b\u308a\u307e\u3059\u304c\u3001\u518d\u73fe\u6027\u3084\u4fdd\u5b88\u6027\u304c\u9ad8\u3044\u306e\u3067\u4ed6\u8005\u306b\u6e21\u3059\u5834\u5408\u306f IaC \u30c4\u30fc\u30eb\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u304c\u591a\u3044\u3067\u3059\u3002\\nIaC \u30c4\u30fc\u30eb\u3068\u3057\u3066\u306f\u5927\u304d\u304f Bicep, Terraform \u306a\u3069\u304c\u8003\u3048\u3089\u308c\u307e\u3059\u3002\\n\u4eca\u56de\u306e\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u306b\u304a\u3044\u3066\u306f\u3001Azure \u3068 GitHub \u306e\u30ea\u30bd\u30fc\u30b9\u3092\u7ba1\u7406\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u305f\u3081 Terraform \u304c\u9069\u3057\u3066\u3044\u308b\u3068\u601d\u3044\u307e\u3059\u3002\\nIaC \u30c4\u30fc\u30eb\u9078\u5b9a\u306b\u8ff7\u3063\u305f\u5834\u5408\u306f\u3001[Terraform \u3068 Bicep \u306e\u6bd4\u8f03](https://learn.microsoft.com/ja-jp/azure/developer/terraform/comparing-terraform-and-bicep?tabs=comparing-bicep-terraform-integration-features#infrastructure-targets) \u304c\u53c2\u8003\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n## Terraform \u3067\u5b9f\u88c5\u3059\u308b\\n\\n\u57fa\u672c\u7684\u306b CRUD \u64cd\u4f5c\u3092\u884c\u3046 Web API \u3092\u63d0\u4f9b\u3057\u3066\u3044\u308b\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u306b\u306f Terraform Provider \u3092\u5b9f\u88c5\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\\n\u5e78\u3044\u3001\u4eca\u56de\u30bf\u30fc\u30b2\u30c3\u30c8\u3068\u3057\u3066\u3044\u308b\u5404\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u5411\u3051\u306b\u4ee5\u4e0b\u306e\u30d7\u30ed\u30d0\u30a4\u30c0\u304c\u63d0\u4f9b\u3055\u308c\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u305d\u308c\u3092\u5229\u7528\u3057\u3066\u8a2d\u5b9a\u3092\u81ea\u52d5\u5316\u3057\u3066\u307f\u307e\u3059\u3002\\n\\n(\u4eee\u306b\u30d7\u30ed\u30d0\u30a4\u30c0\u304c\u7121\u3044\u5834\u5408\u306f\u3001[2. SORACOM \u5411\u3051\u30ab\u30b9\u30bf\u30e0\u30d7\u30ed\u30d0\u30a4\u30c0\u306e\u5b9f\u88c5](https://ks6088ts.github.io/blog/terraform-provider-soracom#2-soracom-%E5%90%91%E3%81%91%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%A0%E3%83%97%E3%83%AD%E3%83%90%E3%82%A4%E3%83%80%E3%81%AE%E5%AE%9F%E8%A3%85)\u306e\u3088\u3046\u306a\u5f62\u3067\u30d5\u30eb\u30b9\u30af\u30e9\u30c3\u30c1\u3067\u30d7\u30ed\u30d0\u30a4\u30c0\u3092\u5b9f\u88c5\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059)\\n\\n| \u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0             | \u30d7\u30ed\u30d0\u30a4\u30c0                                                                                 |\\n| ---------------------------- | ------------------------------------------------------------------------------------------ |\\n| GitHub                       | [integrations/github](https://registry.terraform.io/providers/integrations/github/latest)  |\\n| Microsoft Entra ID(Azure AD) | [hashicorp/azuread](https://registry.terraform.io/providers/hashicorp/azuread/latest/docs) |\\n| Azure                        | [hashicorp/azurerm](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs) |\\n\\n### \u958b\u767a\u74b0\u5883\u3092\u6574\u3048\u308b\\n\\n\u30a8\u30c7\u30a3\u30bf\u306e\u62e1\u5f35\u6a5f\u80fd\u306b\u3088\u308b\u6c7a\u5b9a\u8ad6\u7684\u306a\u30a4\u30f3\u30c6\u30ea\u30bb\u30f3\u30b9\u3001GitHub Copilot \u306b\u3088\u308b\u751f\u6210 AI \u30d9\u30fc\u30b9\u306e\u30a4\u30f3\u30c6\u30ea\u30bb\u30f3\u30b9\u3001\u9759\u7684\u89e3\u6790\u30c4\u30fc\u30eb\u306b\u3088\u308b\u54c1\u8cea\u4fdd\u8a3c\u306a\u3069\u3001\u4e8b\u524d\u306b\u958b\u767a\u74b0\u5883\u3092\u6574\u3048\u308b\u3053\u3068\u3067\u751f\u7523\u6027\u304c\u5411\u4e0a\u3057\u307e\u3059\u3002\\n\\nVisual Studio Code \u4e0a\u3067\u958b\u767a\u3059\u308b\u5834\u5408\u3001VS Code \u62e1\u5f35\u3068\u3057\u3066\u4ee5\u4e0b\u306e\u3082\u306e\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068 Terraform \u306e\u958b\u767a\u304c\u6357\u308a\u307e\u3059\u3002\u3044\u305a\u308c\u3082 HashiCorp \u304c\u63d0\u4f9b\u3057\u3066\u3044\u308b\u3082\u306e\u3067\u3059\u3002\\n\\n| \u62e1\u5f35\u6a5f\u80fd\u540d                                 | \u30ea\u30f3\u30af                                                                                         |\\n| ------------------------------------------ | ---------------------------------------------------------------------------------------------- |\\n| Terraform Extension for Visual Studio Code | [HashiCorp Terraform](https://marketplace.visualstudio.com/items?itemName=HashiCorp.terraform) |\\n| HCL Extension for Visual Studio Code       | [HashiCorp HCL](https://marketplace.visualstudio.com/items?itemName=HashiCorp.HCL)             |\\n\\n### \u9759\u7684\u89e3\u6790\u3092\u5c0e\u5165\u3059\u308b\\n\\nTerraform \u306e\u30b3\u30fc\u30c9\u306b\u9759\u7684\u89e3\u6790\u30c4\u30fc\u30eb\u3092\u5c0e\u5165\u3057\u3066\u304a\u304f\u3068\u3001\u30b3\u30fc\u30c9\u306e\u54c1\u8cea\u3092\u4fdd\u3064\u306e\u306b\u5f79\u7acb\u3061\u307e\u3059\u3002\u4eca\u56de\u306f\u4ee5\u4e0b\u306e\u30c4\u30fc\u30eb\u3092\u5c0e\u5165\u3057\u3066\u307f\u307e\u3057\u305f\u3002\\n\\n#### **[TFLint](https://github.com/terraform-linters/tflint)**\\n\\n\u9759\u7684\u89e3\u6790\u30c4\u30fc\u30eb\u3002\u672a\u4f7f\u7528\u5909\u6570\u3068\u304b\u304c\u3042\u308b\u3068\u6559\u3048\u3066\u304f\u308c\u307e\u3059\u3002\u4f8b\u3048\u3070\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3001\u672a\u4f7f\u7528\u306e\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u304c\u3042\u308b\u3053\u3068\u3092\u6307\u6458\u3057\u3066\u304f\u308c\u307e\u3059\u3002\\n\\n```\\n2 issue(s) found:\\n\\nWarning: data \\"azuread_client_config\\" \\"client_config\\" is declared but not used (terraform_unused_declarations)\\n\\n  on scenarios/create_user_group/main.tf line 26:\\n  26: data \\"azuread_client_config\\" \\"client_config\\" {\\n\\nReference: https://github.com/terraform-linters/tflint-ruleset-terraform/blob/v0.2.2/docs/rules/terraform_unused_declarations.md\\n\\nWarning: data \\"azuread_service_principal\\" \\"msgraph\\" is declared but not used (terraform_unused_declarations)\\n\\n  on scenarios/create_user_group/main.tf line 32:\\n  32: data \\"azuread_service_principal\\" \\"msgraph\\" {\\n\\nReference: https://github.com/terraform-linters/tflint-ruleset-terraform/blob/v0.2.2/docs/rules/terraform_unused_declarations.md\\n\\nmake: *** [Makefile:52: tflint] Error 2\\nError: Process completed with exit code 2.\\n```\\n\\n#### **[Trivy](https://github.com/aquasecurity/trivy)**\\n\\nTrivy \u306f\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u306e\u8106\u5f31\u6027\u30b9\u30ad\u30e3\u30f3\u30c4\u30fc\u30eb\u3067\u3059\u304c\u3001Terraform \u306e\u30b3\u30fc\u30c9\u306b\u3082\u9069\u7528\u3067\u304d\u307e\u3059\u3002  \\n\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306b\u95a2\u3059\u308b\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u306b\u6cbf\u3063\u3066\u3044\u306a\u3044\u30b3\u30fc\u30c9\u3092\u6307\u6458\u3057\u3066\u304f\u308c\u307e\u3059\u3002\\n\\n#### (\u53c2\u8003) **[tfsec](https://github.com/aquasecurity/tfsec)**\\n\\n\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306e\u9759\u7684\u89e3\u6790\u30c4\u30fc\u30eb\u3067\u3059\u304c\u3001\u73fe\u5728\u306f\u975e\u63a8\u5968\u3067 Trivy \u306b\u79fb\u884c\u3059\u308b\u3053\u3068\u304c\u63a8\u5968\u3055\u308c\u3066\u3044\u307e\u3059\u3002  \\n[tfsec is joining the Trivy family #1994](https://github.com/aquasecurity/tfsec/discussions/1994) \u306b\u3088\u308b\u3068\u3001tfsec \u306f 2023 \u5e74 2 \u6708\u306b Aqua Security \u793e\u306b\u8cb7\u53ce\u3055\u308c\u3066\u304a\u308a\u3001Trivy \u30d5\u30a1\u30df\u30ea\u306b\u7d44\u307f\u8fbc\u307e\u308c\u308b\u3053\u3068\u304c\u767a\u8868\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\n[tfsec \u304b\u3089 Trivy \u306b\u79fb\u884c\u3057\u305f\u8a71](https://zenn.dev/acntechjp/articles/9f0e3d4813e36d#tfsec%E3%81%AE%E7%8F%BE%E7%8A%B6) \u3084 [Trivy \u3078\u306e\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9](https://github.com/aquasecurity/tfsec/blob/master/tfsec-to-trivy-migration-guide.md)\u304c\u51fa\u3066\u3044\u308b\u72b6\u6cc1\u3082\u9451\u307f\u307e\u3059\u3068\u3001\u4eca\u5f8c\u306f Trivy \u3092\u4f7f\u3063\u3066\u3044\u304f\u306e\u304c\u826f\u3055\u305d\u3046\u3067\u3059\u3002\\n\\n## \u3069\u3053\u304b\u3089\u3067\u3082\u52d5\u304b\u305b\u308b\u3088\u3046\u306b\u3059\u308b\\n\\n### GitHub Codespaces\\n\\n\u30d6\u30e9\u30a6\u30b6\u3060\u3051\u3067\u52d5\u304b\u305b\u308b\u3068\u306a\u304a\u6709\u96e3\u3044\u306e\u3067\u3001GitHub Codespaces \u3067\u3082\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b Dev Container \u306e\u8a2d\u5b9a\u3082\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\u3002\u5b9f\u969b\u306b\u66f8\u3044\u305f\u8a2d\u5b9a\u306f\u3053\u3061\u3089: [.devcontainer/devcontainer.json](https://github.com/ks6088ts-labs/baseline-environment-on-azure-terraform/blob/v0.0.1/.devcontainer/devcontainer.json)\u3002  \\n[Dev Container Features](https://containers.dev/features) \u3068\u3044\u3046\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u30d9\u30fc\u30b9\u306e\u62e1\u5f35\u6a5f\u80fd\u304c\u5145\u5b9f\u3057\u3066\u3044\u3066\u3001CLI \u30c4\u30fc\u30eb\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u7a0b\u5ea6\u3067\u3042\u308c\u3070\u3001\u3082\u306f\u3084 Dockerfile \u3059\u3089\u66f8\u304b\u306a\u304f\u3066\u3082\u3088\u3044\u611f\u3058\u3067\u3059\u3002\\nGitHub Codespace \u306b\u5bfe\u5fdc\u3057\u3066\u304a\u3051\u3070\u3001\u958b\u767a\u7aef\u672b\u304c\u306a\u304f\u3066\u3082\u958b\u767a\u74b0\u5883\u3092\u69cb\u7bc9\u3067\u304d\u308b\u306e\u3067\u3001\u958b\u767a\u74b0\u5883\u306e\u69cb\u7bc9\u3092\u624b\u8efd\u306b\u884c\u3044\u305f\u3044\u5834\u5408\u306b\u4fbf\u5229\u3067\u3059\u3002\\n\\n### GitHub Actions \u306e `workflow_dispatch`\\n\\n\u30d6\u30e9\u30a6\u30b6\u304b\u3089 GitHub Actions \u306e\u624b\u52d5\u5b9f\u884c\u3092\u884c\u3046\u305f\u3081\u306b\u306f\u3001`workflow_dispatch` \u30a4\u30d9\u30f3\u30c8\u3092\u5229\u7528\u3057\u307e\u3059\u3002\\n\u5b9f\u969b\u306b\u66f8\u3044\u305f\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u306f [.github/workflows/deploy.yml](https://github.com/ks6088ts-labs/baseline-environment-on-azure-terraform/blob/v0.0.1/.github/workflows/deploy.yml) \u3067\u3059\u3002\\n\\nEnvironment \u306e\u6d3b\u7528\u65b9\u6cd5\u306b\u3064\u3044\u3066\u306f\u3001[GitHub Actions \u3067\u74b0\u5883(Environment)\u3092\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u3067\u6307\u5b9a\u3059\u308b](https://aadojo.alterbooth.com/entry/2023/07/17/150000)\u304c\u53c2\u8003\u306b\u306a\u308a\u307e\u3057\u305f\u3002\\nGitHub Actions \u306e\u74b0\u5883(Environment) \u3092\u4f7f\u3046\u3068\u3001\u540c\u69d8\u306e\u51e6\u7406\u3092\u7570\u306a\u308b\u74b0\u5883\u306b\u5bfe\u3057\u3066\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002IT \u7ba1\u7406\u8005\u304c\u958b\u767a\u74b0\u5883\u3084\u30ea\u30bd\u30fc\u30b9\u3092\u6255\u3044\u51fa\u3059\u5834\u5408\u306b\u3082\u6709\u7528\u306a\u306e\u3067\u306f\uff1f\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n## \u5b9f\u884c\u4f8b\\n\\n\u5b9f\u969b\u306b GitHub Actions \u3092\u4f7f\u7528\u3057\u3066 OpenID Connect \u3067 Azure \u306b\u63a5\u7d9a\u3059\u308b\u8a2d\u5b9a\u3092\u81ea\u52d5\u5316\u3057\u305f Terraform (HCL) \u30b3\u30fc\u30c9\u3092\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002\\n\\n```shell\\n# \u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u30af\u30ed\u30fc\u30f3\\ngit clone git@github.com:ks6088ts-labs/baseline-environment-on-azure-terraform.git\\n```\\n\\n### 1. [create_service_principal](https://github.com/ks6088ts-labs/baseline-environment-on-azure-terraform/blob/main/infra/scenarios/create_service_principal/README.md): \u30b5\u30fc\u30d3\u30b9\u30d7\u30ea\u30f3\u30b7\u30d1\u30eb\u3092\u4f5c\u6210\u3057\u3001OpenID Connect \u3092\u8a2d\u5b9a\u3057\u3066 Azure \u306b\u8a8d\u8a3c\u3057\u307e\u3059\u3002\\n\\n\u4ee5\u4e0b\u306e\u51e6\u7406\u3092 Terraform \u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\\n\\n- Microsoft Entra ID \u306b\u65b0\u3057\u3044\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3068\u30b5\u30fc\u30d3\u30b9\u30d7\u30ea\u30f3\u30b7\u30d1\u30eb\u3092\u4f5c\u6210\\n- \u5fc5\u8981\u306a\u30ea\u30bd\u30fc\u30b9\u30a2\u30af\u30bb\u30b9\u6a29\u3084\u30ed\u30fc\u30eb\u3092\u5272\u308a\u5f53\u3066\u308b\\n- GitHub Actions \u9023\u643a\u7528\u306e\u30d5\u30a7\u30c7\u30ec\u30fc\u30b7\u30e7\u30f3\u8a8d\u8a3c\u8a2d\u5b9a\u306e\u6255\u3044\u51fa\u3057\\n- \u30ed\u30fc\u30ab\u30eb\u958b\u767a\u7528\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u4f5c\u6210\\n\\n```shell\\n# \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\\ncd infra/scenarios/create_service_principal\\n\\n# Azure CLI \u3067\u30ed\u30b0\u30a4\u30f3\\naz login\\n\\n# (\u30aa\u30d7\u30b7\u30e7\u30f3) \u73fe\u5728\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u308b\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u78ba\u8a8d\\naz ad signed-in-user show\\n\\n# Terraform \u3067\u5229\u7528\u3055\u308c\u308b\u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\\nexport ARM_SUBSCRIPTION_ID=$(az account show --query id --output tsv)\\nexport TF_VAR_service_principal_name=\\"baseline-environment-on-azure-terraform_tf\\"\\nexport TF_VAR_github_environment=\\"tf\\"\\n\\n# Terraform\u306e\u8a2d\u5b9a\u3092\u521d\u671f\u5316\\nterraform init\\n\\n# \u30ea\u30bd\u30fc\u30b9\u306e\u4f5c\u6210\\nterraform apply -auto-approve\\n```\\n\\n\u60f3\u5b9a\u901a\u308a\u30ea\u30bd\u30fc\u30b9\u304c\u4f5c\u6210\u3067\u304d\u3066\u3044\u308b\u304b Azure Portal \u304b\u3089\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\\n\u4ee5\u4e0b\u3067\u306f API \u306e\u30a2\u30af\u30bb\u30b9\u8a31\u53ef\u8a2d\u5b9a\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002(\u7ba1\u7406\u8005\u306e\u540c\u610f\u306f\u672a\u5b9f\u65bd)\\n\\n![api_permissions](./api_permissions.png)\\n\\nGitHub \u5411\u3051\u306e\u30d5\u30a7\u30c7\u30ec\u30fc\u30b7\u30e7\u30f3\u8a8d\u8a3c\u8a2d\u5b9a\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\\n\\n![federated_credentials](./federated_credentials.png)\\n\\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u6a29\u9650\u3092\u4ed8\u4e0e\u3059\u308b\u305f\u3081\u306b\u306f\u7ba1\u7406\u8005\u306e\u540c\u610f\u304c\u5fc5\u8981\u3067\u3059\u3002\\n\u5bfe\u8c61\u3068\u306a\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8 ID \u306f output \u3067\u51fa\u529b\u3057\u3066\u304a\u308a\u307e\u3059\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u7ba1\u7406\u8005\u306e\u540c\u610f\u3092\u5b9f\u65bd\u3067\u304d\u307e\u3059\u3002\\n\\n```shell\\n# \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u6a29\u9650\u3092\u4ed8\u4e0e\\napplication_object_id=$(terraform output -raw application_object_id)\\naz ad app permission admin-consent --id $application_object_id\\n```\\n\\n### 2. [configure_github_secrets](https://github.com/ks6088ts-labs/baseline-environment-on-azure-terraform/blob/main/infra/scenarios/configure_github_secrets/README.md): GitHub \u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u8a2d\u5b9a\\n\\nGitHub CLI \u306e\u8a8d\u8a3c\u60c5\u5831\u3092\u5229\u7528\u3057\u3066\u3001\u4ee5\u4e0b\u306e\u51e6\u7406\u3092 Terraform \u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\\n\\n- GitHub \u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u4f5c\u6210\\n- \u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u74b0\u5883\u3092\u4f5c\u6210\\n- \u4f5c\u6210\u3057\u305f\u74b0\u5883\u306b\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u8a2d\u5b9a\\n\\n1 \u3067\u4f5c\u6210\u3057\u305f Azure \u306e\u8a2d\u5b9a\u3092\u5229\u7528\u3057\u3066 GitHub \u306b\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u8a2d\u5b9a\u3059\u308b\u305f\u3081\u3001`terraform.tfvars` \u306b Azure \u306e\u8a2d\u5b9a\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\\n\\n```shell\\n# \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\\ncd infra/scenarios/configure_github_secrets/\\n\\n# Azure CLI \u3067\u30ed\u30b0\u30a4\u30f3\\naz login\\n\\n# (\u30aa\u30d7\u30b7\u30e7\u30f3) \u73fe\u5728\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u308b\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u78ba\u8a8d\\naz ad signed-in-user show\\n\\n# \u4f5c\u6210\u3057\u305f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u60c5\u5831\u3092\u53d6\u5f97\\nAPPLICATION_NAME=\\"baseline-environment-on-azure-terraform_tf\\"\\nAPPLICATION_ID=$(az ad sp list --display-name \\"$APPLICATION_NAME\\" --query \\"[0].appId\\" --output tsv)\\nSUBSCRIPTION_ID=$(az account show --query id --output tsv)\\nTENANT_ID=$(az account show --query tenantId --output tsv)\\n\\n# terraform.tfvars \u306b Azure \u306e\u8a2d\u5b9a\u3092\u8a18\u8ff0\\ncat <<EOF > terraform.tfvars\\ncreate_github_repository = \\"false\\"\\norganization = \\"ks6088ts-labs\\"\\nrepository_name = \\"baseline-environment-on-azure-terraform\\"\\nenvironment_name = \\"tf\\"\\nactions_environment_secrets = [\\n    {\\n        name  = \\"ARM_CLIENT_ID\\"\\n        value = \\"$APPLICATION_ID\\"\\n    },\\n    {\\n        name  = \\"ARM_SUBSCRIPTION_ID\\"\\n        value = \\"$SUBSCRIPTION_ID\\"\\n    },\\n    {\\n      name  = \\"ARM_TENANT_ID\\"\\n      value = \\"$TENANT_ID\\"\\n    },\\n    {\\n      name  = \\"ARM_USE_OIDC\\"\\n      value = \\"true\\"\\n    },\\n]\\nEOF\\n```\\n\\n\u4e0a\u8a18\u306e\u8a2d\u5b9a\u3092\u5229\u7528\u3057\u3066\u3001\u4ee5\u4e0b\u306e\u51e6\u7406\u3092 Terraform \u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\\nTerraform \u3067 GitHub \u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u74b0\u5883\u3092\u4f5c\u6210\u3057\u3001\u74b0\u5883\u306b\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\\n\\n```shell\\n# \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\\ncd infra/scenarios/configure_github_secrets/\\n\\n# GitHub CLI \u3067\u30ed\u30b0\u30a4\u30f3\\ngh auth login\\n\\n# (\u30aa\u30d7\u30b7\u30e7\u30f3) \u73fe\u5728\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u308b\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u78ba\u8a8d\\ngh auth status\\n\\n# Terraform \u306e\u521d\u671f\u5316\\nterraform init\\n\\n# \u30ea\u30bd\u30fc\u30b9\u306e\u4f5c\u6210\\nterraform apply -auto-approve\\n```\\n\\nGitHub \u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u74b0\u5883\u304c\u4f5c\u6210\u3055\u308c\u3001\u74b0\u5883\u306b\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\\n\\n![configure_github_secrets](./configure_github_secrets.png)\\n\\n### 3. GitHub Actions \u304b\u3089 OpenID Connect \u3067 Azure \u306b\u63a5\u7d9a\u3057\u3066\u307f\u308b\\n\\n\u624b\u9806 1, \u624b\u9806 2 \u3067\u4f5c\u6210\u3057\u305f\u8a2d\u5b9a\u3092\u5229\u7528\u3057\u3066\u3001GitHub Actions \u304b\u3089 OpenID Connect \u3067 Azure \u306b\u63a5\u7d9a\u3057\u3066\u307f\u307e\u3059\u3002\\n\\n[.github/workflows/deploy.yml](https://github.com/ks6088ts-labs/baseline-environment-on-azure-terraform/blob/v0.0.1/.github/workflows/deploy.yml) \u306b GitHub Actions \u306e\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\n\\nGitHub Actions \u3067\u306f\u3001input \u3092\u53d7\u3051\u53d6\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u3088\u3046\u306b `scenario` \u3068 `environment` \u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001\u30c7\u30d7\u30ed\u30a4\u5bfe\u8c61\u306e\u30b7\u30ca\u30ea\u30aa\u3068\u74b0\u5883\u3092\u9078\u629e\u3057\u3066\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u3092\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\\n\\n```yaml\\non:\\n  workflow_dispatch:\\n    inputs:\\n      # \u30c7\u30d7\u30ed\u30a4\u5bfe\u8c61\u306e\u30b7\u30ca\u30ea\u30aa\u3092\u9078\u629e\\n      scenario:\\n        type: string\\n        required: true\\n        description: \\"Scenario to deploy\\"\\n        default: \\"tfstate_backend\\"\\n      # \u74b0\u5883\u3092\u9078\u629e\\n      environment:\\n        type: environment\\n        required: true\\n        description: \\"Environment to deploy\\"\\n        default: \\"ci\\"\\n```\\n\\n\u4e0a\u8a18\u306e\u8a2d\u5b9a\u3092\u4f5c\u6210\u3059\u308b\u3068\u3001GitHub \u306e\u30a6\u30a7\u30d6 UI \u304b\u3089\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u624b\u52d5\u3067\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u3092\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\\n\\n![workflow_dispatch](./workflow_dispatch.png)\\n\\n\u5b9f\u884c\u5bfe\u8c61\u306e\u74b0\u5883\u3068\u3001\u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\\n\\n```yaml\\nenvironment: ${{ github.event.inputs.environment }}\\nenv:\\n  ARM_CLIENT_ID: ${{ secrets.ARM_CLIENT_ID }}\\n  ARM_SUBSCRIPTION_ID: ${{ secrets.ARM_SUBSCRIPTION_ID }}\\n  ARM_TENANT_ID: ${{ secrets.ARM_TENANT_ID }}\\n  ARM_USE_OIDC: ${{secrets.ARM_USE_OIDC}}\\n```\\n\\n\u63a5\u7d9a\u306b\u6210\u529f\u3059\u308b\u3068\u3001Azure \u306b\u30ea\u30bd\u30fc\u30b9\u304c\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u307e\u3059\u3002\u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n![github_actions](./github_actions.png)\\n\\n## \u307e\u3068\u3081\\n\\n\u672c\u8a18\u4e8b\u3067\u306f\u3001GitHub Actions \u304b\u3089 OpenID Connect \u3092\u5229\u7528\u3057\u3066 Azure \u306b\u63a5\u7d9a\u3059\u308b\u8a2d\u5b9a\u3092 Terraform \u3067\u81ea\u52d5\u5316\u3059\u308b\u65b9\u6cd5\u3092\u3054\u7d39\u4ecb\u3057\u307e\u3057\u305f\u3002  \\n\u3053\u306e\u81ea\u52d5\u5316\u306b\u3088\u308a\u3001\u958b\u767a\u8005\u306f\u74b0\u5883\u69cb\u7bc9\u306e\u624b\u9593\u3092\u7701\u304d\u3001\u672c\u6765\u306e\u958b\u767a\u696d\u52d9\u306b\u96c6\u4e2d\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u307e\u305f\u3001\u624b\u52d5\u8a2d\u5b9a\u306b\u6bd4\u3079\u3066\u30df\u30b9\u304c\u6e1b\u308a\u3001OpenID Connect \u3092\u4f7f\u3063\u305f\u8a8d\u8a3c\u306b\u3088\u308a\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30ea\u30b9\u30af\u3082\u8efd\u6e1b\u3055\u308c\u307e\u3059\u3002  \\nGitHub Actions \u3092\u5229\u7528\u3057\u3066 Azure \u306b\u30ea\u30bd\u30fc\u30b9\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u69cb\u6210\u306f\u3001\u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u304b\u3089\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u5834\u5408\u3068\u7570\u306a\u308a\u3001\u30c7\u30d7\u30ed\u30a4\u306b\u5fc5\u8981\u306a\u6a29\u9650\u3092 GitHub Actions \u5074\u306b\u59d4\u8b72\u3067\u304d\u308b\u3053\u3068\u304b\u3089\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306e\u89b3\u70b9\u304b\u3089\u3082\u6709\u7528\u3067\u3059\u3002\\n\u4e8b\u696d\u90e8\u9580\u304c Entra \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u63d0\u4f9b\u30b5\u30fc\u30d3\u30b9\u7528\u306b\u5916\u51fa\u3057\u3057\u3066\u3044\u308b\u30b1\u30fc\u30b9\u3084\u3001\u958b\u767a\u8005\u304c\u30aa\u30da\u30ec\u30fc\u30bf\u30fc\u3092\u517c\u306d\u308b\u5834\u5408\u306a\u3069\u3001\u69d8\u3005\u306a\u30b7\u30fc\u30f3\u3067\u6d3b\u7528\u3067\u304d\u308b\u3068\u601d\u3044\u307e\u3059\u3002"},{"id":"default-community-health-files","metadata":{"permalink":"/blog/default-community-health-files","source":"@site/blog/2024-11-18-default-community-health-file/index.md","title":"GitHub \u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u8ffd\u52a0\u3059\u308b","description":"GitHub \u3067\u306f\u3001Organization \u307e\u305f\u306f\u500b\u4eba\u7528\u30a2\u30ab\u30a6\u30f3\u30c8\u914d\u4e0b\u306b .github \u3068\u3044\u3046\u540d\u524d\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3001\u305d\u306e\u4e2d\u306b\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3059\u308b\u3053\u3068\u3067\u3001Code of Conduct \u3084 Contributing Guide\u3001Issue \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3001Pull Request \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3001Security Policy \u306a\u3069\u306e\u8a2d\u5b9a\u3092\u5171\u901a\u5316\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002","date":"2024-11-18T00:00:00.000Z","tags":[{"inline":true,"label":"github","permalink":"/blog/tags/github"},{"inline":true,"label":"devops","permalink":"/blog/tags/devops"}],"readingTime":8.465,"hasTruncateMarker":true,"authors":[{"name":"ks6088ts","title":"Software Engineer / Solutions Architect","url":"https://github.com/ks6088ts","imageURL":"https://github.com/ks6088ts.png","key":"ks6088ts","page":null}],"frontMatter":{"slug":"default-community-health-files","title":"GitHub \u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u8ffd\u52a0\u3059\u308b","authors":"ks6088ts","tags":["github","devops"]},"unlisted":false,"prevItem":{"title":"GitHub Actions \u304b\u3089 OpenID Connect \u3067 Azure \u306b\u63a5\u7d9a\u3059\u308b\u8a2d\u5b9a\u4f5c\u696d\u3092 Terraform \u3067\u81ea\u52d5\u5316\u3059\u308b","permalink":"/blog/configure-oidc-azure"},"nextItem":{"title":"Azure \u4e0a\u3067\u4f5c\u308b RAG \u30a2\u30d7\u30ea\u958b\u767a\u5165\u9580","permalink":"/blog/handson-rag-app"}},"content":"GitHub \u3067\u306f\u3001Organization \u307e\u305f\u306f\u500b\u4eba\u7528\u30a2\u30ab\u30a6\u30f3\u30c8\u914d\u4e0b\u306b `.github` \u3068\u3044\u3046\u540d\u524d\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3001\u305d\u306e\u4e2d\u306b\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3059\u308b\u3053\u3068\u3067\u3001Code of Conduct \u3084 Contributing Guide\u3001Issue \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3001Pull Request \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3001Security Policy \u306a\u3069\u306e\u8a2d\u5b9a\u3092\u5171\u901a\u5316\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\\n\\n\u672c\u8a18\u4e8b\u3067\u306f GitHub \u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u8ffd\u52a0\u3059\u308b\u65b9\u6cd5\u3068\u3001\u305d\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u5185\u5bb9\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## TL;DR\\n\\n- `ORGANIZATION/.github` \u3068\u3044\u3046\u540d\u524d\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3001\u305d\u306e\u4e2d\u306b\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3059\u308b\u3053\u3068\u3067\u3001\u30b3\u30f3\u30c8\u30ea\u30d3\u30e5\u30fc\u30bf\u30fc\u306b\u5bfe\u3057\u3066\u4e00\u8cab\u6027\u306e\u3042\u308b\u60c5\u5831\u3092\u63d0\u4f9b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\\n- \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u3082\u306e\u304c\u3042\u308a\u307e\u3059\u3002\\n  - `CODE_OF_CONDUCT.md`: \u884c\u52d5\u898f\u7bc4\u3092\u8a18\u8f09\u3059\u308b\\n  - `CONTRIBUTING.md`: \u30b3\u30f3\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u306e\u30ac\u30a4\u30c9\u30e9\u30a4\u30f3\u3092\u8a18\u8f09\u3059\u308b\\n  - `ISSUE_TEMPLATE`: Issue \u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u8a18\u8f09\u3059\u308b\\n  - `PULL_REQUEST_TEMPLATE`: Pull Request \u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u8a18\u8f09\u3059\u308b\\n  - `SECURITY.md`: \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306b\u95a2\u3059\u308b\u60c5\u5831\u3092\u8a18\u8f09\u3059\u308b\\n- \u5b9f\u969b\u306b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u8ffd\u52a0\u3057\u305f\u30b5\u30f3\u30d7\u30eb\u3092\u4ee5\u4e0b\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u3066\u516c\u958b\u3057\u3066\u3044\u307e\u3059\u3002\\n  [https://github.com/ks6088ts-labs/.github](https://github.com/ks6088ts-labs/.github)\\n\\n---\\n\\n## Default Community Health Files \u3068\u306f\\n\\n\u30b3\u30f3\u30c8\u30ea\u30d3\u30e5\u30fc\u30c8\u30ac\u30a4\u30c9\u30e9\u30a4\u30f3\u3001\u884c\u52d5\u898f\u7bc4\u3001Issue \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3001Pull Request \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30dd\u30ea\u30b7\u30fc\u306a\u3069\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092 Community Health Files \u3068\u547c\u3073\u307e\u3059\u3002\\n\u3053\u308c\u3089\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u914d\u7f6e\u3059\u308b\u3053\u3068\u3067\u3001\u30b3\u30f3\u30c8\u30ea\u30d3\u30e5\u30fc\u30bf\u30fc\u306b\u5bfe\u3057\u3066\u4e00\u8cab\u6027\u306e\u3042\u308b\u60c5\u5831\u3092\u63d0\u4f9b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\\n\\nGitHub \u3067\u306f `.github` \u3068\u3044\u3046\u540d\u524d\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3001\u305d\u306e\u4e2d\u306b\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3059\u308b\u3053\u3068\u3067\u30a2\u30ab\u30a6\u30f3\u30c8\u5168\u4f53\u3067\u8a2d\u5b9a\u3092\u5171\u901a\u5316\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\\n\u5177\u4f53\u7684\u306b\u306f\u3001[\u65e2\u5b9a\u306e\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u6b63\u5e38\u6027\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210](https://docs.github.com/ja/communities/setting-up-your-project-for-healthy-contributions/creating-a-default-community-health-file) \u306b\u5f93\u3063\u3066\u3001\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3057\u307e\u3059\u3002\\n\\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u3082\u306e\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n- `CODE_OF_CONDUCT.md`: \u884c\u52d5\u898f\u7bc4\u3092\u8a18\u8f09\u3059\u308b\\n- `CONTRIBUTING.md`: \u30b3\u30f3\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u306e\u30ac\u30a4\u30c9\u30e9\u30a4\u30f3\u3092\u8a18\u8f09\u3059\u308b\\n- `ISSUE_TEMPLATE`: Issue \u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u8a18\u8f09\u3059\u308b\\n- `PULL_REQUEST_TEMPLATE`: Pull Request \u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u8a18\u8f09\u3059\u308b\\n- `SECURITY.md`: \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306b\u95a2\u3059\u308b\u60c5\u5831\u3092\u8a18\u8f09\u3059\u308b\\n\\n\u3053\u308c\u3089\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3057\u3066\u304a\u304f\u3068\u3001\u5225\u9014\u30ea\u30dd\u30b8\u30c8\u30ea\u3054\u3068\u306b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b\u5fc5\u8981\u304c\u306a\u304f\u306a\u308a\u307e\u3059\u3002\\n\u8a2d\u5b9a\u3092\u5171\u901a\u5316\u3059\u308b\u3053\u3068\u3067\u3001\u30b3\u30f3\u30c8\u30ea\u30d3\u30e5\u30fc\u30bf\u30fc\u306b\u5bfe\u3057\u3066\u4e00\u8cab\u6027\u306e\u3042\u308b\u60c5\u5831\u3092\u63d0\u4f9b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\\n\\n\u306a\u304a\u3001\u30ea\u30dd\u30b8\u30c8\u30ea\u306e `.github/ISSUE_TEMPLATE` \u30d5\u30a9\u30eb\u30c0\u30fc\u306b\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308b\u5834\u5408 (Issue \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3084 config.yml \u30d5\u30a1\u30a4\u30eb\u3092\u542b\u3080)\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e `.github/ISSUE_TEMPLATE` \u30d5\u30a9\u30eb\u30c0\u30fc\u306e\u5185\u5bb9\u306f\u4f7f\u308f\u308c\u307e\u305b\u3093\u3002\\n\\nCommunity Standards \u306e\u5bfe\u5fdc\u72b6\u6cc1\u306f\u3001\u30ea\u30dd\u30b8\u30c8\u30ea\u306e `Insights` \u304b\u3089\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\\n`https://github.com/${ORGANIZATION}/${REPOSITORY}/community` \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\\n\\n![Community Standards](./community_standards.png)\\n\\n\u30b3\u30f3\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u306e\u30ac\u30a4\u30c9\u30e9\u30a4\u30f3\u3084\u884c\u52d5\u898f\u7bc4\u306e\u4f5c\u6210\u65b9\u6cd5\u306b\u3064\u3044\u3066\u306f\u3001[Open Source Guides](https://opensource.guide/) \u306b\u8a73\u7d30\u304c\u8a18\u8f09\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\n\\n## \u30cf\u30f3\u30ba\u30aa\u30f3: \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u8ffd\u52a0\u3059\u308b\\n\\n\u5b9f\u969b\u306b Community Health Files \u3092\u8ffd\u52a0\u3059\u308b\u624b\u9806\u3092\u8aac\u660e\u3057\u307e\u3059\u3002\\n\u30bc\u30ed\u304b\u3089\u59cb\u3081\u308b\u3068\u7d50\u69cb\u8f9b\u3044\u306e\u3067\u3001\u307e\u305a\u306f\u5e7e\u3064\u304b\u306e OSS \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u53c2\u8003\u306b\u3057\u306a\u304c\u3089\u3001\u81ea\u5206\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3068\u306e\u6574\u5408\u6027\u3092\u5224\u65ad\u3057\u3064\u3064\u53d6\u308a\u8fbc\u3093\u3067\u3044\u304f\u3068\u826f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n\u500b\u4eba\u7684\u306b\u53c2\u8003\u306b\u3057\u3066\u3044\u308b `.github` \u30ea\u30dd\u30b8\u30c8\u30ea\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\\n\\n- [github/.github](https://github.com/github/.github)\\n- [microsoft/.github](https://github.com/microsoft/.github)\\n- [google/.github](https://github.com/google/.github)\\n\\n\u307e\u305f\u3001\u53c2\u8003\u306b\u306a\u308b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u4f8b\u3068\u3057\u3066\u4ee5\u4e0b\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n- [freeCodeCamp/freeCodeCamp](https://github.com/freeCodeCamp/freeCodeCamp)\\n- [microsoft/vscode](https://github.com/microsoft/vscode)\\n- [Azure-Samples/azure-search-openai-demo](https://github.com/Azure-Samples/azure-search-openai-demo)\\n\\n.github \u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u305f\u72b6\u614b\u3067\u65b0\u898f\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u4f5c\u6210\u3059\u308b\u3068\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u6709\u52b9\u306b\u306a\u308a\u307e\u3059\u3002\\n\u30ea\u30dd\u30b8\u30c8\u30ea\u4f5c\u6210\u8005\u306f\u7279\u306b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u81ea\u5206\u3067\u4f5c\u6210\u3059\u308b\u5fc5\u8981\u306a\u304f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u958b\u59cb\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u8ffd\u52a0\u3057\u305f\u30b5\u30f3\u30d7\u30eb\u306f\u4ee5\u4e0b\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u3066\u516c\u958b\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n[https://github.com/ks6088ts-labs/.github](https://github.com/ks6088ts-labs/.github)\\n\\n\u4ee5\u4e0b\u3067\u306f\u3001\u500b\u3005\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u8ffd\u52a0\u3059\u308b\u624b\u9806\u3092\u8aac\u660e\u3057\u307e\u3059\u3002\\n\\n---\\n\\n### [\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3078\u306e\u884c\u52d5\u898f\u7bc4\u306e\u8ffd\u52a0](https://docs.github.com/ja/communities/setting-up-your-project-for-healthy-contributions/adding-a-code-of-conduct-to-your-project)\\n\\n\u7d44\u7e54\u3084\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u306e\u884c\u52d5\u898f\u7bc4\u3092\u307e\u3068\u3081\u305f\u6587\u66f8\u3068\u3057\u3066\u3001`.github/CODE_OF_CONDUCT.md` \u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\\n\u30e1\u30f3\u30d0\u30fc\u306b\u5bfe\u3057\u3066\u3001\u671f\u5f85\u3055\u308c\u308b\u884c\u52d5\u3084\u502b\u7406\u3001\u30eb\u30fc\u30eb\u3092\u793a\u3057\u3001\u9069\u5207\u306a\u632f\u308b\u821e\u3044\u3092\u4fc3\u3059\u3053\u3068\u3092\u76ee\u7684\u3068\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n- \u53c2\u8003: [add CODE_OF_CONDUCT.md #7](https://github.com/ks6088ts-labs/.github/pull/7)\\n\\n### [\u30ea\u30dd\u30b8\u30c8\u30ea\u30b3\u30f3\u30c8\u30ea\u30d3\u30e5\u30fc\u30bf\u30fc\u306e\u305f\u3081\u306e\u30ac\u30a4\u30c9\u30e9\u30a4\u30f3\u3092\u5b9a\u3081\u308b](https://docs.github.com/ja/communities/setting-up-your-project-for-healthy-contributions/setting-guidelines-for-repository-contributors)\\n\\n\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u304a\u3051\u308b\u30b3\u30f3\u30c8\u30ea\u30d3\u30e5\u30fc\u30bf\u30fc\u5411\u3051\u306e\u30ac\u30a4\u30c9\u30e9\u30a4\u30f3\u3092\u8a18\u8f09\u3057\u305f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3068\u3057\u3066\u3001`.github/CONTRIBUTING.md` \u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u4e3b\u306b\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u3067\u306f\u3001\u30b3\u30f3\u30c8\u30ea\u30d3\u30e5\u30fc\u30bf\u30fc\u304c\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u8ca2\u732e\u3059\u308b\u65b9\u6cd5\u3084\u3001\u30b3\u30fc\u30c9\u306e\u30b9\u30bf\u30a4\u30eb\u3001\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u624b\u9806\u306a\u3069\u3092\u8aac\u660e\u3057\u307e\u3059\u3002\\n\\n- \u53c2\u8003: [add CONTRIBUTING.md #8](https://github.com/ks6088ts-labs/.github/pull/8)\\n\\n### [\u30ea\u30dd\u30b8\u30c8\u30ea\u3078\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3 \u30dd\u30ea\u30b7\u30fc\u306e\u8ffd\u52a0](https://docs.github.com/ja/code-security/getting-started/adding-a-security-policy-to-your-repository)\\n\\n\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u304a\u3051\u308b\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u95a2\u9023\u306e\u60c5\u5831\u3084\u30ac\u30a4\u30c9\u30e9\u30a4\u30f3\u3092\u8a18\u8f09\u3059\u308b\u305f\u3081\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3068\u3057\u3066\u3001`.github/SECURITY.md` \u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u7279\u306b\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u5229\u7528\u8005\u3084\u958b\u767a\u8005\u304c\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306b\u95a2\u3059\u308b\u554f\u984c\u3092\u5831\u544a\u3057\u305f\u308a\u3001\u5bfe\u5fdc\u3057\u305f\u308a\u3059\u308b\u65b9\u6cd5\u3092\u7406\u89e3\u3059\u308b\u305f\u3081\u306b\u4f7f\u308f\u308c\u307e\u3059\u3002\\n\\n- \u53c2\u8003: [add SECURITY.md #9](https://github.com/ks6088ts-labs/.github/pull/9)\\n\\n### [\u30ea\u30dd\u30b8\u30c8\u30ea\u7528\u306b Issue \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u8a2d\u5b9a\u3059\u308b](https://docs.github.com/ja/communities/using-templates-to-encourage-useful-issues-and-pull-requests/configuring-issue-templates-for-your-repository)\\n\\nGitHub \u30ea\u30dd\u30b8\u30c8\u30ea\u3067\u8ab2\u984c\uff08Issue\uff09\u3092\u4f5c\u6210\u3059\u308b\u969b\u306b\u5229\u7528\u8005\u306b\u30ac\u30a4\u30c9\u3092\u63d0\u4f9b\u3059\u308b\u305f\u3081\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3068\u3057\u3066 `ISSUE_TEMPLATE` \u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u8ca2\u732e\u8005\u304c\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u95a2\u3059\u308b\u554f\u984c\u3084\u63d0\u6848\u3092\u9069\u5207\u306b\u8a18\u8ff0\u3057\u3084\u3059\u304f\u306a\u308a\u307e\u3059\u3002\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u904b\u55b6\u8005\u304c\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3067\u304d\u3001\u5177\u4f53\u7684\u306a\u60c5\u5831\u3092\u5f97\u3084\u3059\u304f\u3059\u308b\u3053\u3068\u3067\u3001\u554f\u984c\u89e3\u6c7a\u306e\u52b9\u7387\u3092\u9ad8\u3081\u307e\u3059\u3002\\n\\n- \u53c2\u8003: [Update issue templates #11](https://github.com/ks6088ts-labs/.github/pull/11)\\n\\n### [Issue \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u9078\u629e\u753b\u9762\u3092\u8a2d\u5b9a\u3059\u308b](https://docs.github.com/ja/communities/using-templates-to-encourage-useful-issues-and-pull-requests/configuring-issue-templates-for-your-repository#configuring-the-template-chooser)\\n\\nIssue \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u9078\u629e\u753b\u9762\u3092\u8a2d\u5b9a\u3059\u308b `config.yml` \u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3067\u3001Issue \u4f5c\u6210\u6642\u306b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u9078\u629e\u3059\u308b\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\\n\\n- \u53c2\u8003: [add config.yml to configure template chooser #18](https://github.com/ks6088ts-labs/.github/pull/18)\\n\\n### [\u30ea\u30dd\u30b8\u30c8\u30ea\u7528\u306e\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u4f5c\u6210](https://docs.github.com/ja/communities/using-templates-to-encourage-useful-issues-and-pull-requests/creating-a-pull-request-template-for-your-repository)\\n\\nGitHub \u30ea\u30dd\u30b8\u30c8\u30ea\u3067\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\uff08Pull Request, PR\uff09\u3092\u4f5c\u6210\u3059\u308b\u969b\u306b\u5229\u7528\u8005\u3092\u30ac\u30a4\u30c9\u3059\u308b\u305f\u3081\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3068\u3057\u3066\u3001`PULL_REQUEST_TEMPLATE.md` \u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u3053\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u7528\u3044\u308b\u3053\u3068\u3067\u3001\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u306b\u5fc5\u8981\u306a\u60c5\u5831\u3092\u660e\u78ba\u306b\u3057\u3001\u30ec\u30d3\u30e5\u30fc\u306e\u52b9\u7387\u5316\u3084\u30b3\u30df\u30e5\u30cb\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u5186\u6ed1\u5316\u306b\u5bc4\u4e0e\u3057\u307e\u3059\u3002\\n\\n- \u53c2\u8003: [add PULL_REQUEST_TEMPLATE #12](https://github.com/ks6088ts-labs/.github/pull/12)\\n\\n### [Organization \u306e\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba](https://docs.github.com/ja/organizations/collaborating-with-groups-in-organizations/customizing-your-organizations-profile)\\n\\nOrganization \u306e\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u3092\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3059\u308b\u305f\u3081\u306e `README.md` \u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002Organization \u306e\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u306b\u306f\u3001Organization \u306e\u76ee\u7684\u3084\u6d3b\u52d5\u5185\u5bb9\u3001\u30b3\u30f3\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u306e\u65b9\u6cd5\u306a\u3069\u3092\u8a18\u8f09\u3057\u307e\u3059\u3002\\n\\n- \u53c2\u8003: [add organization profile #15](https://github.com/ks6088ts-labs/.github/pull/15)\\n\\n### [\u30b3\u30fc\u30c9\u30aa\u30fc\u30ca\u30fc\u306b\u3064\u3044\u3066](https://docs.github.com/ja/repositories/managing-your-repositorys-settings-and-features/customizing-your-repository/about-code-owners)\\n\\n\u30b3\u30fc\u30c9\u30aa\u30fc\u30ca\u30fc\u3092\u8a2d\u5b9a\u3059\u308b\u305f\u3081\u306e `CODEOWNERS` \u30d5\u30a1\u30a4\u30eb\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\u30b3\u30fc\u30c9\u30aa\u30fc\u30ca\u30fc\u306f\u3001\u30ea\u30dd\u30b8\u30c8\u30ea\u5185\u306e\u7279\u5b9a\u306e\u30d5\u30a1\u30a4\u30eb\u3084\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u5bfe\u3057\u3066\u3001\u30b3\u30fc\u30c9\u306e\u30ec\u30d3\u30e5\u30fc\u3084\u30de\u30fc\u30b8\u3092\u884c\u3046\u8cac\u4efb\u3092\u6301\u3064\u4eba\u30fb\u30c1\u30fc\u30e0\u3092\u6307\u5b9a\u3059\u308b\u305f\u3081\u306e\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u3002\\n\\n\u30b3\u30fc\u30c9\u30aa\u30fc\u30ca\u30fc\u306e\u8a2d\u5b9a\u3067\u3001Team \u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\u3001\u30d5\u30a1\u30a4\u30eb\u3092\u8ffd\u52a0\u3059\u308b\u4ee5\u5916\u306b\u3082\u3001\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30a2\u30af\u30bb\u30b9\u6a29\u9650\u3068\u3057\u3066\u3001`Write` \u4ee5\u4e0a\u306e\u6a29\u9650\u3092\u6301\u3064 Team \u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\\n[GitHub codeowners \u3067 Github \u30b0\u30eb\u30fc\u30d7\u3092\u6307\u5b9a\u3057\u3066\u3082\u53cd\u6620\u3055\u308c\u306a\u3044\u6642\u306e\u5bfe\u51e6\u65b9\u6cd5](https://shunyaueta.com/posts/2020-09-19/) \u304c\u53c2\u8003\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n- \u53c2\u8003: [add CODEOWNERS #16](https://github.com/ks6088ts-labs/.github/pull/16)"},{"id":"handson-rag-app","metadata":{"permalink":"/blog/handson-rag-app","source":"@site/blog/2024-02-05-handson-rag-app.md","title":"Azure \u4e0a\u3067\u4f5c\u308b RAG \u30a2\u30d7\u30ea\u958b\u767a\u5165\u9580","description":"\u672c\u8a18\u4e8b\u3067\u306f Azure \u4e0a\u3067 RAG \u30a2\u30d7\u30ea\u3092\u958b\u767a\u3059\u308b\u306b\u3042\u305f\u308a\u3001\u5fc5\u8981\u3068\u306a\u308b\u95a2\u9023\u30ea\u30bd\u30fc\u30b9\u3068\u3057\u3066 Azure OpenAI Service, Azure AI Search, Bing Search \u306e\u30d9\u30fc\u30b7\u30c3\u30af\u306a\u6a5f\u80fd\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u5b9f\u969b\u306b\u3001Bing Search API \u3084 Azure AI Search \u3068\u9023\u643a\u3057\u305f\u5c0f\u898f\u6a21\u306a RAG \u30a2\u30d7\u30ea\u306e\u4f5c\u6210\u3082\u884c\u3044\u307e\u3059\u3002","date":"2024-02-05T00:00:00.000Z","tags":[{"inline":true,"label":"azure","permalink":"/blog/tags/azure"},{"inline":true,"label":"app-service","permalink":"/blog/tags/app-service"},{"inline":true,"label":"azure-openai-service","permalink":"/blog/tags/azure-openai-service"}],"readingTime":22.785,"hasTruncateMarker":true,"authors":[{"name":"ks6088ts","title":"Software Engineer / Solutions Architect","url":"https://github.com/ks6088ts","imageURL":"https://github.com/ks6088ts.png","key":"ks6088ts","page":null}],"frontMatter":{"slug":"handson-rag-app","title":"Azure \u4e0a\u3067\u4f5c\u308b RAG \u30a2\u30d7\u30ea\u958b\u767a\u5165\u9580","authors":"ks6088ts","tags":["azure","app-service","azure-openai-service"]},"unlisted":false,"prevItem":{"title":"GitHub \u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u8ffd\u52a0\u3059\u308b","permalink":"/blog/default-community-health-files"},"nextItem":{"title":"Microsoft Graph API \u95a2\u9023\u60c5\u5831\u306e\u307e\u3068\u3081","permalink":"/blog/graph-api-summary"}},"content":"\x3c!-- textlint-disable --\x3e\\n\\n\u672c\u8a18\u4e8b\u3067\u306f Azure \u4e0a\u3067 RAG \u30a2\u30d7\u30ea\u3092\u958b\u767a\u3059\u308b\u306b\u3042\u305f\u308a\u3001\u5fc5\u8981\u3068\u306a\u308b\u95a2\u9023\u30ea\u30bd\u30fc\u30b9\u3068\u3057\u3066 Azure OpenAI Service, Azure AI Search, Bing Search \u306e\u30d9\u30fc\u30b7\u30c3\u30af\u306a\u6a5f\u80fd\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u5b9f\u969b\u306b\u3001Bing Search API \u3084 Azure AI Search \u3068\u9023\u643a\u3057\u305f\u5c0f\u898f\u6a21\u306a RAG \u30a2\u30d7\u30ea\u306e\u4f5c\u6210\u3082\u884c\u3044\u307e\u3059\u3002\\n\\n\x3c!-- textlint-enable --\x3e\\n\\n\u672c\u8a18\u4e8b\u3067\u63b2\u8f09\u3057\u3066\u3044\u308b Python \u30b9\u30af\u30ea\u30d7\u30c8\u306f\u3001\u4ee5\u4e0b\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u914d\u7f6e\u3057\u3066\u3044\u307e\u3059\u3002\\n[https://github.com/ks6088ts-labs/recipes/python/handson_rag_apps](https://github.com/ks6088ts-labs/recipes/blob/main/python/handson_rag_apps/README.md)\\n\\n\x3c!--truncate--\x3e\\n\\n## Azure \u95a2\u9023\u30b5\u30fc\u30d3\u30b9\u306e\u30ad\u30e3\u30c3\u30c1\u30a2\u30c3\u30d7\u65b9\u6cd5\\n\\n\x3c!-- textlint-disable --\x3e\\n\\n\u30b5\u30fc\u30d3\u30b9\u3092\u4f7f\u3044\u3053\u306a\u3057\u3066\u30a2\u30d7\u30ea\u3092\u958b\u767a\u30fb\u30ea\u30ea\u30fc\u30b9\u3059\u308b\u305f\u3081\u306b\u306f\u3001\u3044\u304f\u3064\u304b\u306e\u30b9\u30c6\u30c3\u30d7\u3092\u8e0f\u3080\u3053\u3068\u304c\u5fc5\u8981\u3067\u3059\u3002\\n\u79c1\u306f\u4ee5\u4e0b\u306e\u30b9\u30c6\u30c3\u30d7\u3067\u30b5\u30fc\u30d3\u30b9\u306e\u30ad\u30e3\u30c3\u30c1\u30a2\u30c3\u30d7\u3092\u3059\u308b\u3053\u3068\u304c\u591a\u3044\u3067\u3059\u3002\\n\\n\x3c!-- textlint-enable --\x3e\\n\\n### 1. \u4ed5\u69d8\u3092\u7406\u89e3\u3059\u308b\\n\\nMicrosoft Azure \u306e AI \u95a2\u9023\u30b5\u30fc\u30d3\u30b9\u306b\u3064\u3044\u3066\u306f\u3001Microsoft Learn \u306b\u591a\u304f\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\u516c\u958b\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u57fa\u672c\u7684\u306b\u6700\u521d\u306b\u4ed5\u69d8\u3092\u7406\u89e3\u3059\u308b\u305f\u3081\u306b\u306f\u3001\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u8aad\u3080\u3053\u3068\u304c\u91cd\u8981\u3067\u3059\u3002\\n\\n- MS Learn \u306e\u6982\u8981\u30da\u30fc\u30b8\\n- REST API \u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\\n- (\u8a73\u7d30\u306e\u7406\u89e3\u304c\u5fc5\u8981\u306a\u5834\u5408) OpenAPI \u4ed5\u69d8\u66f8\\n\\n\u304c\u9069\u5207\u306a\u4e00\u6b21\u60c5\u5831\u3067\u3059\u3002\\n\\n\u65e5\u672c\u8a9e\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\u53e4\u3044\u5834\u5408\u306f\u82f1\u8a9e\u306b\u5207\u308a\u66ff\u3048\u308b\u306a\u3069\u3057\u3066\u3001\u6700\u65b0\u306e\u60c5\u5831\u3092\u78ba\u8a8d\u3067\u304d\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\\nAzure \u306e REST API \u4ed5\u69d8\u306f [Azure/azure-rest-api-specs](https://github.com/Azure/azure-rest-api-specs) \u3067\u516c\u958b\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\n\u904e\u53bb\u306e API \u4ed5\u69d8\u304b\u3089\u306e\u5909\u9077\u3084\u3001\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\u4e0d\u8db3\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001OpenAPI \u4ed5\u69d8\u66f8\u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u3067\u88dc\u5b8c\u3067\u304d\u307e\u3059\u3002API \u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u3067\u306f\u8a73\u7d30\u304c\u66f8\u304d\u304d\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3082\u3042\u308b\u305f\u3081\u3001\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u3053\u3061\u3089\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u53c2\u7167\u3059\u308b\u3068\u826f\u3044\u3067\u3059\u3002\\n\\n\x3c!-- textlint-disable --\x3e\\n\\n\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u898b\u65b9\u3067\u3059\u304c\u3001\u4f8b\u3048\u3070 Azure OpenAI Service \u3067\u306f\u3001API \u30d0\u30fc\u30b8\u30e7\u30f3\u3054\u3068\u306b\u4ed5\u69d8\u306f\u5225\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u5b9a\u7fa9\u3055\u308c\u3066\u304a\u308a\u307e\u3059\u3002\\n`2023-12-01-preview` \u3067\u3059\u3068 [specification/cognitiveservices/data-plane/AzureOpenAI/inference/preview/2023-12-01-preview/inference.json](https://github.com/Azure/azure-rest-api-specs/blob/main/specification/cognitiveservices/data-plane/AzureOpenAI/inference/preview/2023-12-01-preview/inference.json)\u3067\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\\n\\n[Swagger UI](https://petstore.swagger.io/) \u306e\u30c7\u30e2\u30b5\u30a4\u30c8\u306b Azure OpenAI Service \u306e\u4ed5\u69d8\u3092\u8aad\u307f\u8fbc\u307e\u305b\u308b\u3053\u3068\u3067\u3001\u7c21\u5358\u306b API \u306e\u4ed5\u69d8\u3092\u30b0\u30e9\u30d5\u30a3\u30ab\u30eb\u306b\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\\nOpenAPI \u4ed5\u69d8\u66f8\u306e JSON \u30d5\u30a1\u30a4\u30eb\u306f GitHub \u4e0a\u3067 `Raw` \u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3053\u3068\u3067\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001`https://raw.githubusercontent.com/Azure/azure-rest-api-specs/main/specification/cognitiveservices/data-plane/AzureOpenAI/inference/preview/2023-12-01-preview/inference.json` \u3092 Swagger UI \u306e `Explore` \u30dc\u30bf\u30f3\u306b\u5165\u529b\u3059\u308b\u3053\u3068\u3067\u3001API \u306e\u4ed5\u69d8\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\\n\\n#### Azure OpenAI Service \u306e\u53c2\u8003\u60c5\u5831\\n\\n- [Azure OpenAI Service \u3068\u306f](https://learn.microsoft.com/ja-jp/azure/ai-services/openai/overview)\\n- [Azure OpenAI Service \u306e REST API \u30ea\u30d5\u30a1\u30ec\u30f3\u30b9](https://learn.microsoft.com/ja-jp/azure/ai-services/openai/reference)\\n- [specification/cognitiveservices/data-plane/AzureOpenAI](https://github.com/Azure/azure-rest-api-specs/tree/main/specification/cognitiveservices/data-plane/AzureOpenAI)\\n\\n#### Azure AI Search \u306e\u53c2\u8003\u60c5\u5831\\n\\n- [Azure AI Search \u3068\u306f](https://learn.microsoft.com/ja-jp/azure/search/search-what-is-azure-search)\\n- [Azure AI Search REST API \u30ea\u30d5\u30a1\u30ec\u30f3\u30b9](https://learn.microsoft.com/ja-jp/rest/api/searchservice/)\\n- [specification/search/data-plane/Azure.Search](https://github.com/Azure/azure-rest-api-specs/tree/main/specification/search/data-plane/Azure.Search)\\n\\n\x3c!-- textlint-enable --\x3e\\n\\n### 2. \u52d5\u304b\u3057\u3066\u307f\u308b\\n\\nMS Learn \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u898b\u308b\u3068\u3001\\"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\\"\u3084\\"\u30af\u30a4\u30c3\u30af\u30b9\u30bf\u30fc\u30c8\\"\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u3089\u3092\u5b9f\u969b\u306b\u52d5\u304b\u3057\u3066\u307f\u308b\u3053\u3068\u3067\u3001\u30b5\u30fc\u30d3\u30b9\u306e\u52d5\u4f5c\u3092\u7406\u89e3\u3067\u304d\u307e\u3059\u3002\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u8aad\u3080\u3060\u3051\u3060\u3068\u60f3\u50cf\u304c\u3064\u304b\u306a\u3044\u5834\u5408\u306b\u306f\u3001\u5b9f\u969b\u306b\u52d5\u304b\u3057\u3066\u307f\u308b\u3053\u3068\u304c\u91cd\u8981\u3067\u3059\u3002\\n\\n\u4f8b\u3048\u3070 Azure \u306e AI \u95a2\u9023\u30ea\u30bd\u30fc\u30b9\u306b\u3064\u3044\u3066\u306f\u4ee5\u4e0b\u306e\u60c5\u5831\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n#### Azure OpenAI Service \u306e\u53c2\u8003\u60c5\u5831\\n\\n- [\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb: Azure OpenAI Service \u306e\u57cb\u3081\u8fbc\u307f\u3068\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u691c\u7d22\u3092\u78ba\u8a8d\u3059\u308b](https://learn.microsoft.com/ja-jp/azure/ai-services/openai/tutorials/embeddings?tabs=python%2Ccommand-line&pivots=programming-language-python)\\n- [\u30af\u30a4\u30c3\u30af \u30b9\u30bf\u30fc\u30c8: Azure OpenAI Service \u3092\u4f7f\u7528\u3057\u3066\u30c6\u30ad\u30b9\u30c8\u306e\u751f\u6210\u3092\u958b\u59cb\u3059\u308b](https://learn.microsoft.com/ja-jp/azure/ai-services/openai/quickstart?tabs=command-line%2Cpython&pivots=programming-language-studio)\\n\\n#### Azure AI Search \u306e\u53c2\u8003\u60c5\u5831\\n\\n- [1 - Python \u306b\u3088\u308b Web \u30b5\u30a4\u30c8\u3078\u306e\u691c\u7d22\u306e\u8ffd\u52a0\u306e\u6982\u8981](https://learn.microsoft.com/ja-jp/azure/search/tutorial-python-overview)\\n- [\u30af\u30a4\u30c3\u30af\u30b9\u30bf\u30fc\u30c8: Azure OpenAI Studio \u3067\u691c\u7d22\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3068\u30c1\u30e3\u30c3\u30c8\u3059\u308b](https://learn.microsoft.com/ja-jp/azure/search/search-get-started-retrieval-augmented-generation)\\n\\n### 3. \u30a2\u30d7\u30ea\u3092\u4f5c\u308b\\n\\nSDK \u4ed8\u5c5e\u306e\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306f\u3001\u5404\u7a2e\u6a5f\u80fd\u3092\u8aac\u660e\u7684\u304b\u3064\u30b7\u30f3\u30d7\u30eb\u306b\u5b9f\u88c5\u3057\u3066\u3044\u308b\u5834\u5408\u304c\u591a\u304f\u3001\u975e\u5e38\u306b\u53c2\u8003\u306b\u306a\u308a\u307e\u3059\u3002\u4ee5\u4e0b\u306f Python SDK \u306e\u30b5\u30f3\u30d7\u30eb\u306e\u53c2\u7167\u30ea\u30f3\u30af\u3067\u3059\u3002\\n\\n- [openai/openai-python](https://github.com/openai/openai-python)\\n- [Azure AI Search \u306e Python \u30b5\u30f3\u30d7\u30eb](https://learn.microsoft.com/ja-jp/azure/search/samples-python)\\n\\n## Azure OpenAI Service \u306e\u30cf\u30f3\u30ba\u30aa\u30f3\\n\\n\x3c!-- textlint-disable --\x3e\\n\\n\u5916\u90e8\u4ed5\u69d8\u304c\u78ba\u8a8d\u3067\u304d\u305f\u3089\u3001\u306a\u308b\u3079\u304f\u30e9\u30a4\u30d6\u30e9\u30ea\u7b49\u306e\u4f9d\u5b58\u95a2\u4fc2\u304c\u7121\u3044\u72b6\u614b\u3067\u7d20\u306e HTTP \u30ea\u30af\u30a8\u30b9\u30c8\u3092\u767a\u884c\u3057\u3066\u52d5\u4f5c\u78ba\u8a8d\u3059\u308b\u3068\u7406\u89e3\u304c\u6df1\u307e\u308a\u307e\u3059\u3002\\n\u3053\u3053\u3067\u306f curl \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3063\u3066 API \u3092\u53e9\u3044\u3066\u307f\u307e\u3059\u3002\\n\\ncurl \u3060\u3051\u3060\u3068\u8907\u96d1\u306a\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u9001\u308b\u306e\u306b\u624b\u9593\u304c\u304b\u304b\u308b\u305f\u3081\u3001OpenAI \u793e\u304c\u63d0\u4f9b\u3059\u308b Python \u30e9\u30a4\u30d6\u30e9\u30ea [openai/openai-python](https://github.com/openai/openai-python) \u3092\u4f7f\u3063\u3066\u3001Python \u304b\u3089 Azure OpenAI Service \u3092\u5229\u7528\u3059\u308b\u65b9\u6cd5\u3082\u7d39\u4ecb\u3057\u307e\u3059\u3002\\n\\n[Python \u3092\u4f7f\u7528\u3057\u3066 OpenAI \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3068 Azure OpenAI \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u5207\u308a\u66ff\u3048\u308b\u65b9\u6cd5](https://learn.microsoft.com/ja-jp/azure/ai-services/openai/how-to/switching-endpoints)\u3092\u53c2\u8003\u306b\u3001\u4ee5\u4e0b\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u3001Azure OpenAI Service \u3092\u5229\u7528\u3067\u304d\u307e\u3059\u3002\\n\\n\u3053\u3053\u3067\u306f\u3001\u4ee5\u4e0b 4 \u3064\u306e\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u306b\u3064\u3044\u3066\u3001curl \u30b3\u30de\u30f3\u30c9\u3068 Python \u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u4f7f\u3063\u3066 Azure OpenAI Service \u3092\u5229\u7528\u3059\u308b\u65b9\u6cd5\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\\n\\n1. \u30b7\u30f3\u30d7\u30eb\u306a Chat Completions API \u547c\u3073\u51fa\u3057\\n2. Functions \u3092\u5229\u7528\u3057\u305f Chat Completions API \u547c\u3073\u51fa\u3057 (\u975e\u63a8\u5968)\\n3. Tools \u3092\u5229\u7528\u3057\u305f Chat Completions API \u547c\u3073\u51fa\u3057 (\u63a8\u5968)\\n4. JSON mode \u3092\u5229\u7528\u3057\u305f Chat Completions API \u547c\u3073\u51fa\u3057\\n\\n\x3c!-- textlint-disable --\x3e\\n\\nFunctions \u306f\u975e\u63a8\u5968\u3068\u306a\u308a\u3001\u4ee3\u308f\u308a\u306b tools \u3092\u5229\u7528\u3059\u308b\u3053\u3068\u304c\u63a8\u5968\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001Tools \u3092\u5229\u7528\u3057\u305f\u4e26\u5217\u95a2\u6570\u547c\u3073\u51fa\u3057\u304c\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u308b\u30e2\u30c7\u30eb\u30fbAPI \u30d0\u30fc\u30b8\u30e7\u30f3\u306f[Azure OpenAI Service (\u30d7\u30ec\u30d3\u30e5\u30fc) \u3067\u95a2\u6570\u547c\u3073\u51fa\u3057\u3092\u4f7f\u7528\u3059\u308b\u65b9\u6cd5](https://learn.microsoft.com/ja-jp/azure/ai-services/openai/how-to/function-calling?tabs=python)\u306e\u3068\u304a\u308a\u6bd4\u8f03\u7684\u65b0\u3057\u3044\u3082\u306e\u306b\u9650\u5b9a\u3055\u308c\u308b\u305f\u3081\u3001\u975e\u63a8\u5968\u306e functions \u3092\u5229\u7528\u3057\u305f\u4f8b\u3082\u4f75\u305b\u3066\u7d39\u4ecb\u3057\u3066\u304a\u308a\u307e\u3059\u3002\\n\\n\x3c!-- textlint-enable --\x3e\\n\\n### 1. \u30b7\u30f3\u30d7\u30eb\u306a Chat Completions API \u547c\u3073\u51fa\u3057\\n\\n#### curl \u7248\\n\\n```shell\\nYOUR_AOAI_NAME=\\"your-aoai-name\\"\\nYOUR_DEPLOYMENT_ID=\\"your-deployment-id\\"\\nYOUR_API_KEY=\\"your-api-key\\"\\n\\n\u276f curl -X \'POST\' \\\\\\n    \\"https://$YOUR_AOAI_NAME.openai.azure.com/openai/deployments/$YOUR_DEPLOYMENT_ID/chat/completions?api-version=2023-12-01-preview\\" \\\\\\n    -H \\"api-key: $YOUR_API_KEY\\" \\\\\\n    -H \'Content-Type: application/json\' \\\\\\n    -d \'{\\n      \\"messages\\": [\\n        {\\"role\\": \\"user\\", \\"content\\": \\"What is the weather like in Boston and New York?\\"}\\n      ]\\n    }\' | jq -r .\\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\\n                                 Dload  Upload   Total   Spent    Left  Speed\\n100  1141  100  1018  100   123    721     87  0:00:01  0:00:01 --:--:--   808\\n{\\n  \\"id\\": \\"chatcmpl-8p6zGrVKz9baniwtCzlrYuU4dya57\\",\\n  \\"object\\": \\"chat.completion\\",\\n  \\"created\\": 1707192278,\\n  \\"model\\": \\"gpt-35-turbo\\",\\n  \\"prompt_filter_results\\": [\\n    {\\n      \\"prompt_index\\": 0,\\n      \\"content_filter_results\\": {\\n        \\"hate\\": {\\n          \\"filtered\\": false,\\n          \\"severity\\": \\"safe\\"\\n        },\\n        \\"self_harm\\": {\\n          \\"filtered\\": false,\\n          \\"severity\\": \\"safe\\"\\n        },\\n        \\"sexual\\": {\\n          \\"filtered\\": false,\\n          \\"severity\\": \\"safe\\"\\n        },\\n        \\"violence\\": {\\n          \\"filtered\\": false,\\n          \\"severity\\": \\"safe\\"\\n        }\\n      }\\n    }\\n  ],\\n  \\"choices\\": [\\n    {\\n      \\"finish_reason\\": \\"stop\\",\\n      \\"index\\": 0,\\n      \\"message\\": {\\n        \\"role\\": \\"assistant\\",\\n        \\"content\\": \\"As an AI, I cannot provide real-time weather updates. However, you can easily check the current weather in Boston and New York by using a weather app, checking a weather website, or asking a virtual assistant like Siri or Alexa.\\"\\n      },\\n      \\"content_filter_results\\": {\\n        \\"hate\\": {\\n          \\"filtered\\": false,\\n          \\"severity\\": \\"safe\\"\\n        },\\n        \\"self_harm\\": {\\n          \\"filtered\\": false,\\n          \\"severity\\": \\"safe\\"\\n        },\\n        \\"sexual\\": {\\n          \\"filtered\\": false,\\n          \\"severity\\": \\"safe\\"\\n        },\\n        \\"violence\\": {\\n          \\"filtered\\": false,\\n          \\"severity\\": \\"safe\\"\\n        }\\n      }\\n    }\\n  ],\\n  \\"usage\\": {\\n    \\"prompt_tokens\\": 18,\\n    \\"completion_tokens\\": 47,\\n    \\"total_tokens\\": 65\\n  },\\n  \\"system_fingerprint\\": \\"fp_68a7d165bf\\"\\n}\\n```\\n\\nAzure OpenAI Service \u306e Chat Completions API \u306b\u306f\u9010\u6b21\u90e8\u5206\u7684\u306b\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u8fd4\u3059 stream mode \u304c\u3042\u308a\u307e\u3059\u3002\u30c1\u30e3\u30c3\u30c8 UI \u306a\u3069\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u6027\u3092\u8981\u6c42\u3059\u308b\u30a2\u30d7\u30ea\u306b\u306f\u3053\u3061\u3089\u304c\u6709\u52b9\u3067\u3059\u3002stream \u3092\u30aa\u30f3\u306b\u3057\u3066\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u6295\u3052\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u6319\u52d5\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n```shell\\n\u276f curl -X \'POST\' \\\\\\n    \\"https://$YOUR_AOAI_NAME.openai.azure.com/openai/deployments/$YOUR_DEPLOYMENT_ID/chat/completions?api-version=2023-12-01-preview\\" \\\\\\n    -H \\"api-key: $YOUR_API_KEY\\" \\\\\\n    -H \'Content-Type: application/json\' \\\\\\n    -d \'{\\n      \\"messages\\": [\\n        {\\"role\\": \\"user\\", \\"content\\": \\"What is the weather like in Boston and New York?\\"}\\n      ],\\n      \\"stream\\": true\\n    }\'\\ndata: {\\"id\\":\\"\\",\\"object\\":\\"\\",\\"created\\":0,\\"model\\":\\"\\",\\"prompt_filter_results\\":[{\\"prompt_index\\":0,\\"content_filter_results\\":{\\"hate\\":{\\"filtered\\":false,\\"severity\\":\\"safe\\"},\\"self_harm\\":{\\"filtered\\":false,\\"severity\\":\\"safe\\"},\\"sexual\\":{\\"filtered\\":false,\\"severity\\":\\"safe\\"},\\"violence\\":{\\"filtered\\":false,\\"severity\\":\\"safe\\"}}}],\\"choices\\":[]}\\n\\ndata: {\\"id\\":\\"chatcmpl-8uw19bQk3hDKNIlwyK5md5wkLdBgA\\",\\"object\\":\\"chat.completion.chunk\\",\\"created\\":1708580079,\\"model\\":\\"gpt-35-turbo\\",\\"choices\\":[{\\"finish_reason\\":null,\\"index\\":0,\\"delta\\":{\\"role\\":\\"assistant\\"},\\"content_filter_results\\":{}}],\\"system_fingerprint\\":\\"fp_68a7d165bf\\"}\\n\\ndata: {\\"id\\":\\"chatcmpl-8uw19bQk3hDKNIlwyK5md5wkLdBgA\\",\\"object\\":\\"chat.completion.chunk\\",\\"created\\":1708580079,\\"model\\":\\"gpt-35-turbo\\",\\"choices\\":[{\\"finish_reason\\":null,\\"index\\":0,\\"delta\\":{\\"content\\":\\"As\\"},\\"content_filter_results\\":{\\"hate\\":{\\"filtered\\":false,\\"severity\\":\\"safe\\"},\\"self_harm\\":{\\"filtered\\":false,\\"severity\\":\\"safe\\"},\\"sexual\\":{\\"filtered\\":false,\\"severity\\":\\"safe\\"},\\"violence\\":{\\"filtered\\":false,\\"severity\\":\\"safe\\"}}}],\\"system_fingerprint\\":\\"fp_68a7d165bf\\"}\\n\\ndata: {\\"id\\":\\"chatcmpl-8uw19bQk3hDKNIlwyK5md5wkLdBgA\\",\\"object\\":\\"chat.completion.chunk\\",\\"created\\":1708580079,\\"model\\":\\"gpt-35-turbo\\",\\"choices\\":[{\\"finish_reason\\":null,\\"index\\":0,\\"delta\\":{\\"content\\":\\" of\\"},\\"content_filter_results\\":{\\"hate\\":{\\"filtered\\":false,\\"severity\\":\\"safe\\"},\\"self_harm\\":{\\"filtered\\":false,\\"severity\\":\\"safe\\"},\\"sexual\\":{\\"filtered\\":false,\\"severity\\":\\"safe\\"},\\"violence\\":{\\"filtered\\":false,\\"severity\\":\\"safe\\"}}}],\\"system_fingerprint\\":\\"fp_68a7d165bf\\"}\\n\\ndata: {\\"id\\":\\"chatcmpl-8uw19bQk3hDKNIlwyK5md5wkLdBgA\\",\\"object\\":\\"chat.completion.chunk\\",\\"created\\":1708580079,\\"model\\":\\"gpt-35-turbo\\",\\"choices\\":[{\\"finish_reason\\":null,\\"index\\":0,\\"delta\\":{\\"content\\":\\" now\\"},\\"content_filter_results\\":{\\"hate\\":{\\"filtered\\":false,\\"severity\\":\\"safe\\"},\\"self_harm\\":{\\"filtered\\":false,\\"severity\\":\\"safe\\"},\\"sexual\\":{\\"filtered\\":false,\\"severity\\":\\"safe\\"},\\"violence\\":{\\"filtered\\":false,\\"severity\\":\\"safe\\"}}}],\\"system_fingerprint\\":\\"fp_68a7d165bf\\"}\\n\\ndata: {\\"id\\":\\"chatcmpl-8uw19bQk3hDKNIlwyK5md5wkLdBgA\\",\\"object\\":\\"chat.completion.chunk\\",\\"created\\":1708580079,\\"model\\":\\"gpt-35-turbo\\",\\"choices\\":[{\\"finish_reason\\":null,\\"index\\":0,\\"delta\\":{\\"content\\":\\",\\"},\\"content_filter_results\\":{\\"hate\\":{\\"filtered\\":false,\\"severity\\":\\"safe\\"},\\"self_harm\\":{\\"filtered\\":false,\\"severity\\":\\"safe\\"},\\"sexual\\":{\\"filtered\\":false,\\"severity\\":\\"safe\\"},\\"violence\\":{\\"filtered\\":false,\\"severity\\":\\"safe\\"}}}],\\"system_fingerprint\\":\\"fp_68a7d165bf\\"}\\n\\n...\\n\\ndata: {\\"id\\":\\"chatcmpl-8uw19bQk3hDKNIlwyK5md5wkLdBgA\\",\\"object\\":\\"chat.completion.chunk\\",\\"created\\":1708580079,\\"model\\":\\"gpt-35-turbo\\",\\"choices\\":[{\\"finish_reason\\":null,\\"index\\":0,\\"delta\\":{\\"content\\":\\" winds\\"},\\"content_filter_results\\":{\\"hate\\":{\\"filtered\\":false,\\"severity\\":\\"safe\\"},\\"self_harm\\":{\\"filtered\\":false,\\"severity\\":\\"safe\\"},\\"sexual\\":{\\"filtered\\":false,\\"severity\\":\\"safe\\"},\\"violence\\":{\\"filtered\\":false,\\"severity\\":\\"safe\\"}}}],\\"system_fingerprint\\":\\"fp_68a7d165bf\\"}\\n\\ndata: {\\"id\\":\\"chatcmpl-8uw19bQk3hDKNIlwyK5md5wkLdBgA\\",\\"object\\":\\"chat.completion.chunk\\",\\"created\\":1708580079,\\"model\\":\\"gpt-35-turbo\\",\\"choices\\":[{\\"finish_reason\\":null,\\"index\\":0,\\"delta\\":{\\"content\\":\\".\\"},\\"content_filter_results\\":{\\"hate\\":{\\"filtered\\":false,\\"severity\\":\\"safe\\"},\\"self_harm\\":{\\"filtered\\":false,\\"severity\\":\\"safe\\"},\\"sexual\\":{\\"filtered\\":false,\\"severity\\":\\"safe\\"},\\"violence\\":{\\"filtered\\":false,\\"severity\\":\\"safe\\"}}}],\\"system_fingerprint\\":\\"fp_68a7d165bf\\"}\\n\\ndata: {\\"id\\":\\"chatcmpl-8uw19bQk3hDKNIlwyK5md5wkLdBgA\\",\\"object\\":\\"chat.completion.chunk\\",\\"created\\":1708580079,\\"model\\":\\"gpt-35-turbo\\",\\"choices\\":[{\\"finish_reason\\":\\"stop\\",\\"index\\":0,\\"delta\\":{},\\"content_filter_results\\":{}}],\\"system_fingerprint\\":\\"fp_68a7d165bf\\"}\\n\\ndata: [DONE]\\n```\\n\\n#### Python \u7248\\n\\n```python title=\\"aoai.py\\"\\nimport os\\nfrom openai import AzureOpenAI\\n\\nclient = AzureOpenAI(\\n    api_key=os.getenv(\\"YOUR_API_KEY\\"),\\n    api_version=\\"2023-12-01-preview\\",\\n    azure_endpoint=os.getenv(\\"YOUR_AOAI_ENDPOINT\\"),\\n)\\n\\nchat_completion = client.chat.completions.create(\\n    model=\\"gpt-35-turbo\\",\\n    messages=[\\n        {\\"role\\": \\"user\\", \\"content\\": \\"What is the weather like in Boston and New York?\\"},\\n    ],\\n)\\n\\nprint(chat_completion)\\n```\\n\\n\u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\\n\\n```shell\\n\u276f python aoai.py\\nChatCompletion(id=\'chatcmpl-8p74TiwwCMW4aLHsDK0Q1bujqYARa\', choices=[Choice(finish_reason=\'stop\', index=0, logprobs=None, message=ChatCompletionMessage(content=\'The current weather in Boston is 57\xb0F with overcast skies. In New York, the temperature is 61\xb0F with cloudy skies.\', role=\'assistant\', function_call=None, tool_calls=None), content_filter_results={\'hate\': {\'filtered\': False, \'severity\': \'safe\'}, \'self_harm\': {\'filtered\': False, \'severity\': \'safe\'}, \'sexual\': {\'filtered\': False, \'severity\': \'safe\'}, \'violence\': {\'filtered\': False, \'severity\': \'safe\'}})], created=1707192601, model=\'gpt-35-turbo\', object=\'chat.completion\', system_fingerprint=\'fp_68a7d165bf\', usage=CompletionUsage(completion_tokens=28, prompt_tokens=18, total_tokens=46), prompt_filter_results=[{\'prompt_index\': 0, \'content_filter_results\': {\'hate\': {\'filtered\': False, \'severity\': \'safe\'}, \'self_harm\': {\'filtered\': False, \'severity\': \'safe\'}, \'sexual\': {\'filtered\': False, \'severity\': \'safe\'}, \'violence\': {\'filtered\': False, \'severity\': \'safe\'}}}])\\n```\\n\\n### 2. Functions \u3092\u5229\u7528\u3057\u305f Chat Completions API \u547c\u3073\u51fa\u3057 (\u975e\u63a8\u5968)\\n\\n#### curl \u7248\\n\\n```shell\\nYOUR_AOAI_NAME=\\"your-aoai-name\\"\\nYOUR_DEPLOYMENT_ID=\\"your-deployment-id\\"\\nYOUR_API_KEY=\\"your-api-key\\"\\n\\n\u276f curl -X \'POST\' \\\\\\n    \\"https://$YOUR_AOAI_NAME.openai.azure.com/openai/deployments/$YOUR_DEPLOYMENT_ID/chat/completions?api-version=2023-12-01-preview\\" \\\\\\n    -H \\"api-key: $YOUR_API_KEY\\" \\\\\\n    -H \'Content-Type: application/json\' \\\\\\n    -d \'{\\n      \\"messages\\": [\\n        {\\"role\\": \\"user\\", \\"content\\": \\"What is the weather like in Boston and New York?\\"}\\n      ],\\n      \\"functions\\": [\\n        {\\n          \\"name\\": \\"get_current_weather\\",\\n          \\"description\\": \\"Get the current weather in a given location\\",\\n          \\"parameters\\": {\\n            \\"type\\": \\"object\\",\\n            \\"properties\\": {\\n              \\"location\\": {\\n                \\"type\\": \\"string\\",\\n                \\"description\\": \\"The city and state, e.g. San Francisco, CA\\"\\n              },\\n              \\"unit\\": {\\n                \\"type\\": \\"string\\",\\n                \\"enum\\": [\\"celsius\\", \\"fahrenheit\\"]\\n              }\\n            },\\n            \\"required\\": [\\"location\\"]\\n          }\\n        }\\n      ]\\n    }\' | jq -r .\\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\\n                                 Dload  Upload   Total   Spent    Left  Speed\\n100  1405  100   692  100   713    612    631  0:00:01  0:00:01 --:--:--  1244\\n{\\n  \\"id\\": \\"chatcmpl-8p6vmJOIC42rotQPE00q3qlKbbVn4\\",\\n  \\"object\\": \\"chat.completion\\",\\n  \\"created\\": 1707192062,\\n  \\"model\\": \\"gpt-35-turbo\\",\\n  \\"prompt_filter_results\\": [\\n    {\\n      \\"prompt_index\\": 0,\\n      \\"content_filter_results\\": {\\n        \\"hate\\": {\\n          \\"filtered\\": false,\\n          \\"severity\\": \\"safe\\"\\n        },\\n        \\"self_harm\\": {\\n          \\"filtered\\": false,\\n          \\"severity\\": \\"safe\\"\\n        },\\n        \\"sexual\\": {\\n          \\"filtered\\": false,\\n          \\"severity\\": \\"safe\\"\\n        },\\n        \\"violence\\": {\\n          \\"filtered\\": false,\\n          \\"severity\\": \\"safe\\"\\n        }\\n      }\\n    }\\n  ],\\n  \\"choices\\": [\\n    {\\n      \\"finish_reason\\": \\"function_call\\",\\n      \\"index\\": 0,\\n      \\"message\\": {\\n        \\"role\\": \\"assistant\\",\\n        \\"function_call\\": {\\n          \\"name\\": \\"get_current_weather\\",\\n          \\"arguments\\": \\"{\\\\\\"location\\\\\\":\\\\\\"Boston, MA\\\\\\"}\\"\\n        }\\n      },\\n      \\"content_filter_results\\": {}\\n    }\\n  ],\\n  \\"usage\\": {\\n    \\"prompt_tokens\\": 85,\\n    \\"completion_tokens\\": 17,\\n    \\"total_tokens\\": 102\\n  },\\n  \\"system_fingerprint\\": \\"fp_68a7d165bf\\"\\n}\\n```\\n\\n#### Python \u7248\\n\\n```python title=\\"aoai_functions.py\\"\\nimport os\\nfrom openai import AzureOpenAI\\n\\nclient = AzureOpenAI(\\n    api_key=os.getenv(\\"YOUR_API_KEY\\"),\\n    api_version=\\"2023-12-01-preview\\",\\n    azure_endpoint=os.getenv(\\"YOUR_AOAI_ENDPOINT\\"),\\n)\\n\\nfunctions = []\\nfunctions.append(\\n    {\\n        \\"name\\": \\"get_current_weather\\",\\n        \\"description\\": \\"Get the current weather in a given location\\",\\n        \\"parameters\\": {\\n            \\"type\\": \\"object\\",\\n            \\"properties\\": {\\n                \\"location\\": {\\n                    \\"type\\": \\"string\\",\\n                    \\"description\\": \\"The city and state, e.g. San Francisco, CA\\",\\n                },\\n                \\"unit\\": {\\"type\\": \\"string\\", \\"enum\\": [\\"celsius\\", \\"fahrenheit\\"]},\\n            },\\n            \\"required\\": [\\"location\\"],\\n        },\\n    }\\n)\\n\\nchat_completion = client.chat.completions.create(\\n    model=\\"gpt-35-turbo\\",\\n    messages=[\\n        {\\"role\\": \\"user\\", \\"content\\": \\"What is the weather like in Boston and New York?\\"},\\n    ],\\n    functions=functions,\\n)\\n\\nprint(chat_completion)\\n```\\n\\n\u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\\n\\n```shell\\n\u276f python aoai_functions.py\\nChatCompletion(id=\'chatcmpl-8p78fyrbkZLx2cOZxEeZeQqWA2FJT\', choices=[Choice(finish_reason=\'function_call\', index=0, logprobs=None, message=ChatCompletionMessage(content=None, role=\'assistant\', function_call=FunctionCall(arguments=\'{\\"location\\":\\"Boston, MA\\"}\', name=\'get_current_weather\'), tool_calls=None), content_filter_results={})], created=1707192861, model=\'gpt-35-turbo\', object=\'chat.completion\', system_fingerprint=\'fp_68a7d165bf\', usage=CompletionUsage(completion_tokens=17, prompt_tokens=85, total_tokens=102), prompt_filter_results=[{\'prompt_index\': 0, \'content_filter_results\': {\'hate\': {\'filtered\': False, \'severity\': \'safe\'}, \'self_harm\': {\'filtered\': False, \'severity\': \'safe\'}, \'sexual\': {\'filtered\': False, \'severity\': \'safe\'}, \'violence\': {\'filtered\': False, \'severity\': \'safe\'}}}])\\n```\\n\\n### 3. Tools \u3092\u5229\u7528\u3057\u305f Chat Completions API \u547c\u3073\u51fa\u3057 (\u63a8\u5968)\\n\\n#### curl \u7248\\n\\n```shell\\nYOUR_AOAI_NAME=\\"your-aoai-name\\"\\nYOUR_DEPLOYMENT_ID=\\"your-deployment-id\\"\\nYOUR_API_KEY=\\"your-api-key\\"\\n\\n\u276f curl -X \'POST\' \\\\\\n    \\"https://$YOUR_AOAI_NAME.openai.azure.com/openai/deployments/$YOUR_DEPLOYMENT_ID/chat/completions?api-version=2023-12-01-preview\\" \\\\\\n    -H \\"api-key: $YOUR_API_KEY\\" \\\\\\n    -H \'Content-Type: application/json\' \\\\\\n    -d \'{\\n      \\"messages\\": [\\n        {\\"role\\": \\"user\\", \\"content\\": \\"What is the weather like in Boston and New York?\\"}\\n      ],\\n      \\"tools\\": [\\n        {\\n          \\"type\\": \\"function\\",\\n          \\"function\\": {\\n            \\"name\\": \\"get_current_weather\\",\\n            \\"description\\": \\"Get the current weather in a given location\\",\\n            \\"parameters\\": {\\n              \\"type\\": \\"object\\",\\n              \\"properties\\": {\\n                \\"location\\": {\\n                  \\"type\\": \\"string\\",\\n                  \\"description\\": \\"The city and state, e.g. San Francisco, CA\\"\\n                },\\n                \\"unit\\": {\\n                  \\"type\\": \\"string\\",\\n                  \\"enum\\": [\\"celsius\\", \\"fahrenheit\\"]\\n                }\\n              },\\n              \\"required\\": [\\"location\\"]\\n            }\\n          }\\n        }\\n      ]\\n    }\' | jq -r .\\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\\n                                 Dload  Upload   Total   Spent    Left  Speed\\n100  1748  100   941  100   807    754    646  0:00:01  0:00:01 --:--:--  1401\\n{\\n  \\"id\\": \\"chatcmpl-8p6wgRFekQXcrd1dfDs8qxD4D7GFw\\",\\n  \\"object\\": \\"chat.completion\\",\\n  \\"created\\": 1707192118,\\n  \\"model\\": \\"gpt-35-turbo\\",\\n  \\"prompt_filter_results\\": [\\n    {\\n      \\"prompt_index\\": 0,\\n      \\"content_filter_results\\": {\\n        \\"hate\\": {\\n          \\"filtered\\": false,\\n          \\"severity\\": \\"safe\\"\\n        },\\n        \\"self_harm\\": {\\n          \\"filtered\\": false,\\n          \\"severity\\": \\"safe\\"\\n        },\\n        \\"sexual\\": {\\n          \\"filtered\\": false,\\n          \\"severity\\": \\"safe\\"\\n        },\\n        \\"violence\\": {\\n          \\"filtered\\": false,\\n          \\"severity\\": \\"safe\\"\\n        }\\n      }\\n    }\\n  ],\\n  \\"choices\\": [\\n    {\\n      \\"finish_reason\\": \\"tool_calls\\",\\n      \\"index\\": 0,\\n      \\"message\\": {\\n        \\"role\\": \\"assistant\\",\\n        \\"tool_calls\\": [\\n          {\\n            \\"id\\": \\"call_vhjgnb3JxWZH8lwKkxAHKAIg\\",\\n            \\"type\\": \\"function\\",\\n            \\"function\\": {\\n              \\"name\\": \\"get_current_weather\\",\\n              \\"arguments\\": \\"{\\\\\\"location\\\\\\": \\\\\\"Boston\\\\\\", \\\\\\"unit\\\\\\": \\\\\\"celsius\\\\\\"}\\"\\n            }\\n          },\\n          {\\n            \\"id\\": \\"call_iS1plHIkgjE87DveKHMaWi8V\\",\\n            \\"type\\": \\"function\\",\\n            \\"function\\": {\\n              \\"name\\": \\"get_current_weather\\",\\n              \\"arguments\\": \\"{\\\\\\"location\\\\\\": \\\\\\"New York\\\\\\", \\\\\\"unit\\\\\\": \\\\\\"celsius\\\\\\"}\\"\\n            }\\n          }\\n        ]\\n      },\\n      \\"content_filter_results\\": {}\\n    }\\n  ],\\n  \\"usage\\": {\\n    \\"prompt_tokens\\": 85,\\n    \\"completion_tokens\\": 56,\\n    \\"total_tokens\\": 141\\n  },\\n  \\"system_fingerprint\\": \\"fp_68a7d165bf\\"\\n}\\n```\\n\\n#### Python \u7248\\n\\n```python title=\\"aoai_tools.py\\"\\nimport os\\nfrom openai import AzureOpenAI\\n\\nclient = AzureOpenAI(\\n    api_key=os.getenv(\\"YOUR_API_KEY\\"),\\n    api_version=\\"2023-12-01-preview\\",\\n    azure_endpoint=os.getenv(\\"YOUR_AOAI_ENDPOINT\\"),\\n)\\n\\ntools = []\\ntools.append(\\n    {\\n        \\"type\\": \\"function\\",\\n        \\"function\\": {\\n            \\"name\\": \\"get_current_weather\\",\\n            \\"description\\": \\"Get the current weather in a given location\\",\\n            \\"parameters\\": {\\n                \\"type\\": \\"object\\",\\n                \\"properties\\": {\\n                    \\"location\\": {\\n                        \\"type\\": \\"string\\",\\n                        \\"description\\": \\"The city and state, e.g. San Francisco, CA\\",\\n                    },\\n                    \\"unit\\": {\\"type\\": \\"string\\", \\"enum\\": [\\"celsius\\", \\"fahrenheit\\"]},\\n                },\\n                \\"required\\": [\\"location\\"],\\n            },\\n        },\\n    }\\n)\\n\\nchat_completion = client.chat.completions.create(\\n    model=\\"gpt-35-turbo\\",\\n    messages=[\\n        {\\"role\\": \\"user\\", \\"content\\": \\"What is the weather like in Boston and New York?\\"},\\n    ],\\n    tools=tools,\\n)\\n\\nprint(chat_completion)\\n```\\n\\n\u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\\n\\n```shell\\n\u276f python aoai_tools.py\\nChatCompletion(id=\'chatcmpl-8p7Bf2YPutAOCQsGZtrWsBC6fksEq\', choices=[Choice(finish_reason=\'tool_calls\', index=0, logprobs=None, message=ChatCompletionMessage(content=None, role=\'assistant\', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id=\'call_zjvQkpjG6VNvOuIqahk7Izzo\', function=Function(arguments=\'{\\"location\\": \\"Boston\\", \\"unit\\": \\"celsius\\"}\', name=\'get_current_weather\'), type=\'function\'), ChatCompletionMessageToolCall(id=\'call_myRctsQpRHmrwsnF5u1HUwxn\', function=Function(arguments=\'{\\"location\\": \\"New York\\", \\"unit\\": \\"celsius\\"}\', name=\'get_current_weather\'), type=\'function\')]), content_filter_results={})], created=1707193047, model=\'gpt-35-turbo\', object=\'chat.completion\', system_fingerprint=\'fp_68a7d165bf\', usage=CompletionUsage(completion_tokens=56, prompt_tokens=85, total_tokens=141), prompt_filter_results=[{\'prompt_index\': 0, \'content_filter_results\': {\'hate\': {\'filtered\': False, \'severity\': \'safe\'}, \'self_harm\': {\'filtered\': False, \'severity\': \'safe\'}, \'sexual\': {\'filtered\': False, \'severity\': \'safe\'}, \'violence\': {\'filtered\': False, \'severity\': \'safe\'}}}])\\n```\\n\\n### 4. JSON mode \u3092\u5229\u7528\u3057\u305f Chat Completions API \u547c\u3073\u51fa\u3057\\n\\n[Learn how to use JSON mode](https://learn.microsoft.com/en-us/azure/ai-services/openai/how-to/json-mode?tabs=python) \u3092\u53c2\u8003\u306b JSON \u30e2\u30fc\u30c9\u306e Chat Completions API \u3092\u547c\u3073\u51fa\u3057\u307e\u3059\u3002\\n\\n#### curl \u7248\\n\\n```shell\\nYOUR_AOAI_NAME=\\"your-aoai-name\\"\\nYOUR_DEPLOYMENT_ID=\\"your-deployment-id\\"\\nYOUR_API_KEY=\\"your-api-key\\"\\n\\n\u276f curl -X \'POST\' \\\\\\n  \\"https://$YOUR_AOAI_NAME.openai.azure.com/openai/deployments/$YOUR_DEPLOYMENT_ID/chat/completions?api-version=2023-12-01-preview\\" \\\\\\n  -H \\"api-key: $YOUR_API_KEY\\" \\\\\\n  -H \'Content-Type: application/json\' \\\\\\n  -d \'{\\n      \\"response_format\\": {\\n        \\"type\\": \\"json_object\\"\\n      },\\n      \\"messages\\": [\\n        {\\"role\\": \\"system\\", \\"content\\": \\"You are a helpful assistant designed to output JSON.\\"},\\n        {\\"role\\": \\"user\\", \\"content\\": \\"What is the weather like in Boston and New York?\\"}\\n      ]\\n    }\' | jq -r .\\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\\n                                 Dload  Upload   Total   Spent    Left  Speed\\n100  1414  100  1130  100   284    721    181  0:00:01  0:00:01 --:--:--   902\\n{\\n  \\"id\\": \\"chatcmpl-8p7nWSptPghX7ss4ko9AI638VBRIG\\",\\n  \\"object\\": \\"chat.completion\\",\\n  \\"created\\": 1707195394,\\n  \\"model\\": \\"gpt-35-turbo\\",\\n  \\"prompt_filter_results\\": [\\n    {\\n      \\"prompt_index\\": 0,\\n      \\"content_filter_results\\": {\\n        \\"hate\\": {\\n          \\"filtered\\": false,\\n          \\"severity\\": \\"safe\\"\\n        },\\n        \\"self_harm\\": {\\n          \\"filtered\\": false,\\n          \\"severity\\": \\"safe\\"\\n        },\\n        \\"sexual\\": {\\n          \\"filtered\\": false,\\n          \\"severity\\": \\"safe\\"\\n        },\\n        \\"violence\\": {\\n          \\"filtered\\": false,\\n          \\"severity\\": \\"safe\\"\\n        }\\n      }\\n    }\\n  ],\\n  \\"choices\\": [\\n    {\\n      \\"finish_reason\\": \\"stop\\",\\n      \\"index\\": 0,\\n      \\"message\\": {\\n        \\"role\\": \\"assistant\\",\\n        \\"content\\": \\"{\\\\n  \\\\\\"locations\\\\\\": {\\\\n    \\\\\\"Boston\\\\\\": {\\\\n      \\\\\\"weather\\\\\\": \\\\\\"Partly cloudy\\\\\\",\\\\n      \\\\\\"temperature\\\\\\": \\\\\\"72\xb0F\\\\\\",\\\\n      \\\\\\"humidity\\\\\\": \\\\\\"56%\\\\\\",\\\\n      \\\\\\"wind\\\\\\": \\\\\\"10 mph\\\\\\"\\\\n    },\\\\n    \\\\\\"New York\\\\\\": {\\\\n      \\\\\\"weather\\\\\\": \\\\\\"Sunny\\\\\\",\\\\n      \\\\\\"temperature\\\\\\": \\\\\\"78\xb0F\\\\\\",\\\\n      \\\\\\"humidity\\\\\\": \\\\\\"50%\\\\\\",\\\\n      \\\\\\"wind\\\\\\": \\\\\\"8 mph\\\\\\"\\\\n    }\\\\n  }\\\\n}\\"\\n      },\\n      \\"content_filter_results\\": {\\n        \\"hate\\": {\\n          \\"filtered\\": false,\\n          \\"severity\\": \\"safe\\"\\n        },\\n        \\"self_harm\\": {\\n          \\"filtered\\": false,\\n          \\"severity\\": \\"safe\\"\\n        },\\n        \\"sexual\\": {\\n          \\"filtered\\": false,\\n          \\"severity\\": \\"safe\\"\\n        },\\n        \\"violence\\": {\\n          \\"filtered\\": false,\\n          \\"severity\\": \\"safe\\"\\n        }\\n      }\\n    }\\n  ],\\n  \\"usage\\": {\\n    \\"prompt_tokens\\": 32,\\n    \\"completion_tokens\\": 87,\\n    \\"total_tokens\\": 119\\n  },\\n  \\"system_fingerprint\\": \\"fp_68a7d165bf\\"\\n}\\n```\\n\\n#### Python \u7248\\n\\n```python title=\\"aoai_json_mode.py\\"\\nimport os\\nfrom openai import AzureOpenAI\\n\\nclient = AzureOpenAI(\\n    api_key=os.getenv(\\"YOUR_API_KEY\\"),\\n    api_version=\\"2023-12-01-preview\\",\\n    azure_endpoint=os.getenv(\\"YOUR_AOAI_ENDPOINT\\"),\\n)\\n\\nchat_completion = client.chat.completions.create(\\n    model=\\"gpt-35-turbo\\",\\n    response_format={\\"type\\": \\"json_object\\"},\\n    messages=[\\n        {\\n            \\"role\\": \\"system\\",\\n            \\"content\\": \\"You are a helpful assistant designed to output JSON.\\",\\n        },\\n        {\\"role\\": \\"user\\", \\"content\\": \\"What is the weather like in Boston and New York?\\"},\\n    ],\\n)\\n\\nprint(chat_completion.choices[0].message.content)\\n```\\n\\n\u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\\n\\n```shell\\n\u276f python aoai_json_mode.py\\n{\\n  \\"locations\\": {\\n    \\"Boston\\": {\\n      \\"weather\\": \\"Partly cloudy\\",\\n      \\"temperature\\": \\"57\xb0F\\"\\n    },\\n    \\"New York\\": {\\n      \\"weather\\": \\"Mostly sunny\\",\\n      \\"temperature\\": \\"62\xb0F\\"\\n    }\\n  }\\n}\\n```\\n\\n## Bing Search API \u3092\u4f7f\u3063\u305f RAG \u306e\u4f8b\\n\\n### Bing Search API \u306e\u30cf\u30f3\u30ba\u30aa\u30f3\\n\\nRAG \u30a2\u30d7\u30ea\u3092\u4f5c\u6210\u3059\u308b\u305f\u3081\u306b\u3001\u5916\u90e8\u306e\u60c5\u5831\u6e90\u3068\u3057\u3066 Bing Search API \u3092\u5229\u7528\u3057\u307e\u3059\u3002\\nBing Search API \u306e\u5916\u90e8\u4ed5\u69d8\u306f [Bing Search API documentation](https://learn.microsoft.com/en-us/bing/search-apis/bing-web-search/) \u3067\u516c\u958b\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\n\\n\x3c!-- textlint-disable --\x3e\\n\\n[Create Bing Search resource through Azure Marketplace](https://learn.microsoft.com/en-us/bing/search-apis/bing-web-search/create-bing-search-service-resource) \u306e\u624b\u9806\u306b\u5f93\u3044\u3001Azure Portal \u3067 `Bing Resources` \u3092\u691c\u7d22\u3057\u3001\u30ea\u30bd\u30fc\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\\n\\n\x3c!-- textlint-enable --\x3e\\n\\n\u4f5c\u6210\u3059\u308b\u3068 API \u30ad\u30fc\u304c\u767a\u884c\u3055\u308c\u308b\u306e\u3067\u3001\u305d\u308c\u3092\u5229\u7528\u3057\u3066 Bing Search API \u3092\u5229\u7528\u3067\u304d\u307e\u3059\u3002\\n\\n#### curl \u7248\\n\\n```shell\\nYOUR_BING_SEARCH_API_KEY=\\"your-bing-search-api-key\\"\\n\\ncurl \\"https://api.bing.microsoft.com/v7.0/search?q=\'Microsoft\'\\" \\\\\\n    -H \\"Ocp-Apim-Subscription-Key: $YOUR_BING_SEARCH_API_KEY\\"\\n```\\n\\n#### Python \u7248\\n\\n[Bing Web Search samples](https://learn.microsoft.com/en-us/bing/search-apis/bing-web-search/samples#samples-using-native-http-get-requests) \u306b\u5404\u7a2e\u8a00\u8a9e\u306e\u30b5\u30f3\u30d7\u30eb\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u3053\u3067\u306f Python \u306e\u4f8b\u3092\u793a\u3057\u307e\u3059\u3002\\n\\n```python title=\\"bing_search.py\\"\\nimport os\\nimport requests\\nimport json\\n\\nsubscription_key = os.getenv(\\"YOUR_BING_SEARCH_API_KEY\\")\\nsearch_url = \\"https://api.bing.microsoft.com/v7.0/search\\"\\nsearch_term = \\"\u6700\u65b0\u306e\u30d7\u30ea\u30ad\u30e5\u30a2\u306e\u30bf\u30a4\u30c8\u30eb\u3092\u6559\u3048\u3066\\"\\n\\nheaders = {\\"Ocp-Apim-Subscription-Key\\": subscription_key}\\nparams = {\\"q\\": search_term, \\"textDecorations\\": True, \\"textFormat\\": \\"HTML\\"}\\nresponse = requests.get(search_url, headers=headers, params=params)\\nresponse.raise_for_status()\\nsearch_results = response.json()\\n\\nsources = []\\nfor search_result in search_results[\\"webPages\\"][\\"value\\"]:\\n    sources.append(search_result[\\"name\\"])\\n\\nprint(\\"\\\\n\\".join(sources))\\n```\\n\\n\u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\\n\\n```shell\\n\u276f python bing_search.py\\n\u65b0\u4f5c\u30d7\u30ea\u30ad\u30e5\u30a2\u30bf\u30a4\u30c8\u30eb\u767a\u8868\uff01 \u300e\u308f\u3093\u3060\u3075\u308b\u3077\u308a\u304d\u3085\u3042\uff01\u300f\u306f ...\\n\u30d7\u30ea\u30ad\u30e5\u30a2\u65b0\u4f5c\u30bf\u30a4\u30c8\u30eb\u767a\u8868 21\u4f5c\u76ee\u306f\u300e\u308f\u3093\u3060\u3075\u308b\u3077\u308a\u304d\u3085\u3042 ...\\n\u30d7\u30ea\u30ad\u30e5\u30a2\u65b0\u4f5c\u30bf\u30a4\u30c8\u30eb\u767a\u8868 21\u4f5c\u76ee\u306f\u300e\u308f\u3093\u3060\u3075\u308b\u3077\u308a\u304d\u3085\u3042 ...\\n\u3010\u30d7\u30ea\u30ad\u30e5\u30a2\u3011\u65b0\u30b7\u30ea\u30fc\u30ba\u306e\u30bf\u30a4\u30c8\u30eb\u306f\u300e\u308f\u3093\u3060\u3075\u308b ...\\n\u300c\u30d7\u30ea\u30ad\u30e5\u30a2\u300d\u7b2c19\u5f3e\u30bf\u30a4\u30c8\u30eb\u304c\u300c\u30c7\u30ea\u30b7\u30e3\u30b9\u30d1\u30fc\u30c6\u30a3 ...\\n\u30d7\u30ea\u30ad\u30e5\u30a2\u7b2c21\u5f3e\u30bf\u30a4\u30c8\u30eb\u300c\u308f\u3093\u3060\u3075\u308b\u3077\u308a\u304d\u3085\u3042\uff01\u300d\u306b\u6c7a\u5b9a ...\\n\u300c\u30d7\u30ea\u30ad\u30e5\u30a2\u300d\u65b0\u4f5c\u30bf\u30a4\u30c8\u30eb\u306f\u300c\u308f\u3093\u3060\u3075\u308b\u3077\u308a\u304d\u3085\u3042\uff01\u300d\u521d ...\\n\u30d7\u30ea\u30ad\u30e5\u30a2\u30b7\u30ea\u30fc\u30ba\u6700\u65b0\u4f5c\u300e\u30c7\u30ea\u30b7\u30e3\u30b9\u30d1\u30fc\u30c6\u30a3\u2661\u30d7\u30ea\u30ad\u30e5\u30a2 ...\\n\u30d7\u30ea\u30ad\u30e5\u30a2\u65b0\u4f5c\u3001\u30bf\u30a4\u30c8\u30eb\u767a\u8868 \u30b7\u30ea\u30fc\u30ba\u7b2c19\u5f3e\u306f\u300e\u30c7\u30ea\u30b7\u30e3\u30b9 ...\\n\u300c\u30d7\u30ea\u30ad\u30e5\u30a2\u300d\u65b0\u4f5c\u30bf\u30a4\u30c8\u30eb\u306f\u300c\u308f\u3093\u3060\u3075\u308b\u3077\u308a\u304d\u3085\u3042\uff01\u300d\u521d ...\\n```\\n\\n### RAG \u30a2\u30d7\u30ea\u306e\u4f5c\u6210\\n\\nAzure OpenAI Service \u3068 Bing Search API \u3092\u5229\u7528\u3057\u3066\u3001RAG \u30a2\u30d7\u30ea\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\\ncurl \u3067\u3082\u5b9f\u88c5\u306f\u53ef\u80fd\u3067\u3059\u304c\u3001\u30b3\u30fc\u30c9\u304c\u8907\u96d1\u306b\u306a\u308b\u305f\u3081\u3053\u3053\u3067\u306f Python \u3067\u5b9f\u88c5\u3057\u305f\u4f8b\u306e\u307f\u7d39\u4ecb\u3057\u307e\u3059\u3002\\n\u4ee5\u4e0b\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u306f\u3001Bing Search API \u3092\u5229\u7528\u3057\u3066\u691c\u7d22\u7d50\u679c\u3092\u53d6\u5f97\u3057\u3001\u305d\u308c\u3092 Azure OpenAI Service \u306b\u6e21\u3057\u3066\u56de\u7b54\u3092\u53d6\u5f97\u3059\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\u3067\u3059\u3002\\n\\n```python title=\\"rag_bing.py\\"\\nimport os\\nfrom openai import AzureOpenAI\\nimport requests\\n\\n\\ndef get_sources_string(search_term: str):\\n    \\"\\"\\"Bing Search API\u3092\u4f7f\u3063\u3066\u691c\u7d22\u7d50\u679c\u306e\u30bd\u30fc\u30b9\u3092\u53d6\u5f97\u3059\u308b\\"\\"\\"\\n    subscription_key = os.getenv(\\"YOUR_BING_SEARCH_API_KEY\\")\\n    search_url = \\"https://api.bing.microsoft.com/v7.0/search\\"\\n    headers = {\\"Ocp-Apim-Subscription-Key\\": subscription_key}\\n    params = {\\"q\\": search_term, \\"textDecorations\\": True, \\"textFormat\\": \\"HTML\\"}\\n\\n    response = requests.get(search_url, headers=headers, params=params)\\n    response.raise_for_status()\\n    search_results = response.json()\\n\\n    sources = []\\n    for search_result in search_results[\\"webPages\\"][\\"value\\"]:\\n        sources.append(search_result[\\"name\\"])\\n\\n    return \\"\\\\n\\".join(sources)\\n\\n\\ndef get_response_with_sources(sources_str: str):\\n    \\"\\"\\"Azure OpenAI \u3092\u4f7f\u3063\u3066\u30dc\u30c3\u30c8\u306e\u56de\u7b54\u3092\u53d6\u5f97\u3059\u308b\\"\\"\\"\\n    client = AzureOpenAI(\\n        api_key=os.getenv(\\"YOUR_API_KEY\\"),\\n        api_version=\\"2023-12-01-preview\\",\\n        azure_endpoint=os.getenv(\\"YOUR_AOAI_ENDPOINT\\"),\\n    )\\n    messages = [\\n        {\\"role\\": \\"system\\", \\"content\\": \\"\u3042\u306a\u305f\u306f\u512a\u79c0\u306a\u30d8\u30eb\u30d7\u30c7\u30b9\u30af\u30dc\u30c3\u30c8\u3067\u3059\u3002\\"},\\n        {\\"role\\": \\"user\\", \\"content\\": search_term},\\n    ]\\n\\n    messages.append({\\"role\\": \\"system\\", \\"content\\": f\\"Sources: {sources_str}\\"})\\n\\n    chat_completion = client.chat.completions.create(\\n        model=\\"gpt-35-turbo\\",\\n        messages=messages,\\n    )\\n    return chat_completion.choices[0].message.content\\n\\n\\nif __name__ == \\"__main__\\":\\n    search_term = \\"\u6700\u65b0\u306e\u30d7\u30ea\u30ad\u30e5\u30a2\u306e\u30bf\u30a4\u30c8\u30eb\u3092\u6559\u3048\u3066\\"\\n    sources_str = get_sources_string(search_term)\\n    response = get_response_with_sources(sources_str)\\n    print(f\\"\u30dc\u30c3\u30c8\u306e\u56de\u7b54: {response}\\")\\n```\\n\\n\u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\\n\\n```shell\\n\u276f python rag_bing.py\\n\u30dc\u30c3\u30c8\u306e\u56de\u7b54: \u6700\u65b0\u306e\u30d7\u30ea\u30ad\u30e5\u30a2\u30b7\u30ea\u30fc\u30ba\u306e\u30bf\u30a4\u30c8\u30eb\u306f\u300e\u308f\u3093\u3060\u3075\u308b\u3077\u308a\u304d\u3085\u3042\uff01\u300f\u3067\u3059\u3002\\n```\\n\\nBing Search \u306e\u6700\u65b0\u306e\u691c\u7d22\u7d50\u679c\u3092 Azure OpenAI Service \u306b\u6e21\u3057\u3066\u56de\u7b54\u3092\u53d6\u5f97\u3067\u304d\u307e\u3057\u305f\u3002\\n2024/02 \u73fe\u5728\u653e\u9001\u4e2d\u306e\u30d7\u30ea\u30ad\u30e5\u30a2\u30b7\u30ea\u30fc\u30ba\u306f[\u300e\u308f\u3093\u3060\u3075\u308b\u3077\u308a\u304d\u3085\u3042\uff01\u300f](https://ja.wikipedia.org/wiki/%E3%82%8F%E3%82%93%E3%81%A0%E3%81%B5%E3%82%8B%E3%81%B7%E3%82%8A%E3%81%8D%E3%82%85%E3%81%82!)\u3067\u3059\u306e\u3067\u6b63\u3057\u304f\u56de\u7b54\u304c\u751f\u6210\u3067\u304d\u3066\u3044\u307e\u3059\u3002\\n\\n\x3c!-- textlint-disable --\x3e\\n\\nBing Search API \u306e\u7d50\u679c\u306e\u4e2d\u306b\u3001[\u30c7\u30ea\u30b7\u30e3\u30b9\u30d1\u30fc\u30c6\u30a3\u30d7\u30ea\u30ad\u30e5\u30a2](https://ja.wikipedia.org/wiki/%E3%83%87%E3%83%AA%E3%82%B7%E3%83%A3%E3%82%B9%E3%83%91%E3%83%BC%E3%83%86%E3%82%A3%E2%99%A1%E3%83%97%E3%83%AA%E3%82%AD%E3%83%A5%E3%82%A2) \u3082\u5165\u3063\u3066\u3044\u307e\u3057\u305f\u304c\u300121 \u4f5c\u76ee\u3068 19 \u4f5c\u76ee\u3068\u3044\u3046\u60c5\u5831\u304c\u5165\u3063\u3066\u3044\u305f\u305f\u3081\u3001Azure OpenAI Service \u306b\u3066\u6b63\u3057\u3044\u56de\u7b54\u304c\u751f\u6210\u3067\u304d\u305f\u3068\u8003\u3048\u3089\u308c\u307e\u3059\u3002\\n\\n\x3c!-- textlint-enable --\x3e\\n\\n## Azure AI Search \u3092\u4f7f\u3063\u305f RAG \u306e\u4f8b\\n\\nAzure AI Search \u306e\u5229\u7528\u65b9\u6cd5\u306b\u3064\u3044\u3066\u53c2\u8003\u60c5\u5831\u3092\u4ee5\u4e0b\u306b\u793a\u3057\u307e\u3059\u3002\\n\\n- [Azure AI Search REST API \u30ea\u30d5\u30a1\u30ec\u30f3\u30b9](https://learn.microsoft.com/ja-jp/rest/api/searchservice/?view=rest-searchservice-2023-11-01)\\n- [REST API \u30d0\u30fc\u30b8\u30e7\u30f3 (Azure AI Search)](https://learn.microsoft.com/ja-jp/rest/api/searchservice/search-service-api-versions)\\n- [Azure AI Search \u306e\u5404\u7a2e\u64cd\u4f5c](https://learn.microsoft.com/ja-jp/rest/api/searchservice/operation-groups?view=rest-searchservice-2023-11-01)\\n- [OpenAPI specification: Azure/azure-rest-api-specs](https://github.com/Azure/azure-rest-api-specs/tree/master/specification/search/data-plane/Azure.Search)\\n- [SDK \u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9 / Samples for Azure Cognitive Search client library for Python](https://github.com/Azure/azure-sdk-for-python/tree/main/sdk/search/azure-search-documents/samples)\\n\\n### Azure AI Search \u306e\u30cf\u30f3\u30ba\u30aa\u30f3\\n\\n[\u30dd\u30fc\u30bf\u30eb\u3067 Azure AI Search \u30b5\u30fc\u30d3\u30b9\u3092\u4f5c\u6210\u3059\u308b](https://learn.microsoft.com/ja-jp/azure/search/search-create-service-portal) \u3092\u53c2\u8003\u306b\u3001Azure Portal \u3067 Azure AI Search \u30b5\u30fc\u30d3\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002  \\nAzure AI Search \u3067\u30d9\u30af\u30c8\u30eb\u691c\u7d22\u3092\u5229\u7528\u3059\u308b\u305f\u3081\u306b\u306f\u3001\u5225\u9014 Azure OpenAI Service \u306e\u30ea\u30bd\u30fc\u30b9\u3082\u5fc5\u8981\u3067\u3059\u3002[Azure OpenAI Service \u30ea\u30bd\u30fc\u30b9\u3092\u4f5c\u6210\u3057\u3066\u30c7\u30d7\u30ed\u30a4\u3059\u308b](https://learn.microsoft.com/ja-JP/azure/ai-services/openai/how-to/create-resource?pivots=web-portal)\u3092\u53c2\u8003\u306b\u30c7\u30d7\u30ed\u30a4\u3057\u307e\u3059\u3002\\n\\n[python/azure_ai_search_client](https://github.com/ks6088ts-labs/recipes/tree/main/python/azure_ai_search_client) \u306b\u5168\u4f53\u306e\u5b9f\u88c5\u4f8b\u3092\u63b2\u8f09\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n#### curl \u7248\\n\\n[API \u30ea\u30d5\u30a1\u30ec\u30f3\u30b9 / \u30c7\u30fc\u30bf \u30d7\u30ec\u30fc\u30f3](https://learn.microsoft.com/ja-jp/rest/api/searchservice/operation-groups?view=rest-searchservice-2023-11-01) \u4ee5\u4e0b\u306b\u5404\u7a2e\u64cd\u4f5c\u306e API \u3068\u305d\u306e\u5b9f\u884c\u4f8b\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n\x3c!-- table --\x3e\\n\\n| API                                                                                                                                                    | \u8aac\u660e                                   |\\n| ------------------------------------------------------------------------------------------------------------------------------------------------------ | -------------------------------------- |\\n| [Indexes - Create](https://learn.microsoft.com/en-us/rest/api/searchservice/indexes/create?view=rest-searchservice-2023-11-01&tabs=HTTP)               | \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u4f5c\u6210                     |\\n| [Add, Update or Delete Documents (Azure AI Search REST API)](https://learn.microsoft.com/en-us/rest/api/searchservice/addupdate-or-delete-documents)   | \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u767b\u9332                     |\\n| [Documents - Search Post](https://learn.microsoft.com/en-us/rest/api/searchservice/documents/search-post?view=rest-searchservice-2023-11-01&tabs=HTTP) | \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u4e0a\u306b\u3042\u308b\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u691c\u7d22 |\\n\\n[ks6088ts-labs/cogsearchctl](https://github.com/ks6088ts-labs/cogsearchctl/tree/main/examples) \u306b\u914d\u7f6e\u3055\u308c\u305f\u30b5\u30f3\u30d7\u30eb\u7528 json \u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u3063\u3066\u4ee5\u4e0b\u306e\u901a\u308a\u5b9f\u884c\u3057\u307e\u3059\u3002  \\njson \u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u9001\u4fe1\u3059\u308b\u305f\u3081\u3001`-d @examples/create_index.json` \u306e\u3088\u3046\u306b `-d` \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u3063\u3066\u30ea\u30af\u30a8\u30b9\u30c8\u30dc\u30c7\u30a3\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\\n\\n```shell\\nYOUR_AZURE_AI_SEARCH_ENDPOINT=\\"https://youar-azure-ai-search-name.search.windows.net\\"\\nYOUR_AZURE_AI_SEARCH_API_KEY=\\"your-azure-ai-search-api-key\\"\\nYOUR_AZURE_AI_SEARCH_INDEX_NAME=\\"your-azure-ai-search-index-name\\"\\n\\n# \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u4f5c\u6210\\ncurl -X PUT \\"$YOUR_AZURE_AI_SEARCH_ENDPOINT/indexes/$YOUR_AZURE_AI_SEARCH_INDEX_NAME?api-version=2023-11-01\\" \\\\\\n  -H \\"Content-Type: application/json\\" \\\\\\n  -H \\"api-key: $YOUR_AZURE_AI_SEARCH_API_KEY\\" -d @examples/create_index.json\\n\\n\u276f cat examples/create_index.json\\n{\\n  \\"fields\\": [\\n    {\\n      \\"name\\": \\"content\\",\\n      \\"type\\": \\"Edm.String\\",\\n      \\"facetable\\": false,\\n      \\"filterable\\": false,\\n      \\"key\\": false,\\n      \\"retrievable\\": true,\\n      ...\\n    }\\n  ],\\n  \\"suggesters\\": [\\n    {\\n      \\"name\\": \\"sg1\\",\\n      \\"searchMode\\": \\"analyzingInfixMatching\\",\\n      \\"sourceFields\\": [\\"merged_content\\"]\\n    }\\n  ],\\n  \\"scoringProfiles\\": [],\\n  \\"defaultScoringProfile\\": \\"\\",\\n  \\"corsOptions\\": {\\n    \\"allowedOrigins\\": [\\"*\\"],\\n    \\"maxAgeInSeconds\\": null\\n  },\\n  \\"analyzers\\": [],\\n  \\"charFilters\\": [],\\n  \\"tokenFilters\\": [],\\n  \\"tokenizers\\": [],\\n  \\"similarity\\": {\\n    \\"@odata.type\\": \\"#Microsoft.Azure.Search.BM25Similarity\\",\\n    \\"k1\\": null,\\n    \\"b\\": null\\n  }\\n}\\n```\\n\\n#### Python \u7248\\n\\n[recipes/python/handson_rag_apps/scripts\\n/azure_ai_search.py](https://github.com/ks6088ts-labs/recipes/blob/main/python/handson_rag_apps/scripts/azure_ai_search.py) \u306b\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u3092\u63b2\u8f09\u3057\u3066\u3044\u307e\u3059\u3002  \\n\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u4f5c\u6210\u3001\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u767b\u9332\u3001\u691c\u7d22\u306e 3 \u3064\u306e\u64cd\u4f5c\u3092\u5b9f\u65bd\u3059\u308b CLI \u30d7\u30ed\u30b0\u30e9\u30e0\u3067\u3059\u3002\\n\\n### Azure Portal \u304b\u3089\u691c\u7d22\u3059\u308b\u65b9\u6cd5\\n\\n[\u30af\u30a4\u30c3\u30af \u30b9\u30bf\u30fc\u30c8: Search \u30a8\u30af\u30b9\u30d7\u30ed\u30fc\u30e9\u30fc\u3092\u4f7f\u7528\u3057\u3066 Azure portal \u3067\u30af\u30a8\u30ea\u3092\u5b9f\u884c\u3059\u308b](https://learn.microsoft.com/ja-jp/azure/search/search-explorer) \u3092\u53c2\u8003\u306b\u3001Azure Portal \u304b\u3089 Azure AI Search \u3092\u5229\u7528\u3057\u307e\u3059\u3002\\n\u547c\u3073\u51fa\u3057\u3066\u3044\u308b API \u306f [Documents - Search Post](https://learn.microsoft.com/ja-jp/rest/api/searchservice/documents/search-post?view=rest-searchservice-2023-11-01&tabs=HTTP) \u3068\u306a\u308a\u307e\u3059\u3002\\n\\n\u4f8b\u3048\u3070[\u691c\u7d22\u7d50\u679c\u5185\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u5236\u9650](https://learn.microsoft.com/ja-jp/azure/search/search-explorer#limit-fields-in-search-results)\u3057\u305f\u3044\u5834\u5408\u3001`select` \u3092\u5229\u7528\u3057\u307e\u3059\u3002\u30d9\u30af\u30c8\u30eb\u691c\u7d22\u5229\u7528\u6642\u306b embedding \u30d5\u30a3\u30fc\u30eb\u30c9\u304c\u3042\u308b\u3068\u898b\u901a\u3057\u304c\u60aa\u3044\u6642\u306a\u3069\u306b\u5229\u7528\u3059\u308b\u3053\u3068\u304c\u591a\u3044\u3067\u3059\u3002\\n\\n```shell\\n{\\n   \\"search\\": \\"*\\",\\n   \\"select\\": \\"content, id, category, sourcefile, sourcepage\\"\\n}\\n```\\n\\n### RAG \u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u306b Azure AI Search \u3092\u7d44\u307f\u8fbc\u3080\\n\\nAzure AI Search \u3092\u5229\u7528\u3057\u3066 RAG \u30a2\u30d7\u30ea\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\\nRAG \u306e\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u3092\u53d6\u5f97\u3059\u308b\u7b87\u6240\u304c Azure AI Search \u3067\u7f6e\u304d\u63db\u308f\u3063\u305f\u3060\u3051\u3067\u3001\u305d\u306e\u4ed6\u306e\u51e6\u7406\u306f\u5909\u66f4\u304c\u3042\u308a\u307e\u305b\u3093\u3002\\n\\n```shell\\n@app.command()\\ndef rag(query_text=\\"\u6cb3\u539f\u753a\u3055\u3093\u306e\u597d\u304d\u306a\u30b9\u30dd\u30fc\u30c4\u306f\u4f55\u3067\u3059\u304b\uff1f\\"):\\n    index_name = get_index_name()\\n    documents = asyncio.run(\\n        search_impl(\\n            query_text=query_text,\\n            index_name=index_name,\\n        )\\n    )\\n    sources = []\\n    for document in documents:\\n        sources.append(document[\\"content\\"])\\n    sources_str = \\"\\\\n\\".join(sources)\\n    client = get_azure_openai_client()\\n    messages = [\\n        {\\"role\\": \\"system\\", \\"content\\": \\"\u3042\u306a\u305f\u306f\u512a\u79c0\u306a\u30d8\u30eb\u30d7\u30c7\u30b9\u30af\u30dc\u30c3\u30c8\u3067\u3059\u3002\\"},\\n        {\\"role\\": \\"user\\", \\"content\\": query_text},\\n    ]\\n    messages.append({\\"role\\": \\"system\\", \\"content\\": f\\"Sources: {sources_str}\\"})\\n\\n    chat_completion = client.chat.completions.create(\\n        model=os.getenv(\\"azure_deployment_gpt\\"),\\n        messages=messages,\\n    )\\n    print(chat_completion.choices[0].message.content)\\n```\\n\\n[Azure AI Search / RAG](https://github.com/ks6088ts-labs/recipes/blob/main/python/handson_rag_apps/README.md#rag-1) \u306b\u5b9f\u884c\u4f8b\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u6ce8\u76ee\u3059\u3079\u304d\u70b9\u306f Azure AI Search \u3067\u53d6\u5f97\u3057\u305f\u77e5\u8b58\u3092\u5143\u306b\u81ea\u7136\u306a\u56de\u7b54\u304c\u751f\u6210\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3067\u3059\u3002\\nAzure AI Search \u306b\u767b\u9332\u3055\u308c\u3066\u3044\u306a\u3044\u77e5\u8b58\u306b\u95a2\u3057\u3066\u306f\u6b63\u3057\u304f\u56de\u7b54\u3067\u304d\u306a\u3044\u305f\u3081\u3001\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u306e\u5145\u5b9f\u304c\u91cd\u8981\u3067\u3059\u3002"},{"id":"graph-api-summary","metadata":{"permalink":"/blog/graph-api-summary","source":"@site/blog/2024-01-11-graph-api-summary.md","title":"Microsoft Graph API \u95a2\u9023\u60c5\u5831\u306e\u307e\u3068\u3081","description":"Microsoft Graph API \u3092\u89e6\u308b\u5fc5\u8981\u304c\u51fa\u3066\u304d\u305f\u306e\u3067\u3001\u95a2\u9023\u60c5\u5831\u3092\u307e\u3068\u3081\u3066\u304a\u304d\u307e\u3059\u3002","date":"2024-01-11T00:00:00.000Z","tags":[{"inline":true,"label":"microsoft-graph","permalink":"/blog/tags/microsoft-graph"}],"readingTime":3.065,"hasTruncateMarker":true,"authors":[{"name":"ks6088ts","title":"Software Engineer / Solutions Architect","url":"https://github.com/ks6088ts","imageURL":"https://github.com/ks6088ts.png","key":"ks6088ts","page":null}],"frontMatter":{"slug":"graph-api-summary","title":"Microsoft Graph API \u95a2\u9023\u60c5\u5831\u306e\u307e\u3068\u3081","authors":"ks6088ts","tags":["microsoft-graph"]},"unlisted":false,"prevItem":{"title":"Azure \u4e0a\u3067\u4f5c\u308b RAG \u30a2\u30d7\u30ea\u958b\u767a\u5165\u9580","permalink":"/blog/handson-rag-app"},"nextItem":{"title":"AOAI \u306b\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u304b\u3089\u63a5\u7d9a\u3057\u3001VM \u306e\u30de\u30cd\u30fc\u30b8\u30c9 ID \u3092\u5229\u7528\u3057\u3066 API Key \u7121\u3057\u3067 AOAI \u3092\u547c\u3073\u51fa\u3059","permalink":"/blog/aoai-private-endpoint-managed-id"}},"content":"Microsoft Graph API \u3092\u89e6\u308b\u5fc5\u8981\u304c\u51fa\u3066\u304d\u305f\u306e\u3067\u3001\u95a2\u9023\u60c5\u5831\u3092\u307e\u3068\u3081\u3066\u304a\u304d\u307e\u3059\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## \u6982\u8981\u3092\u628a\u63e1\u3059\u308b\\n\\n[MS Learn / Microsoft Graph \u3068\u306f](https://learn.microsoft.com/ja-jp/training/modules/msgraph-intro-overview/) \u3067 Microsoft Graph API \u306e\u6982\u8981\u304c\u8aac\u660e\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\nMicrosoft Graph API \u306e\u6982\u8981\u3084\u3001Microsoft Graph API \u3092\u4f7f\u3046\u305f\u3081\u306b\u5fc5\u8981\u306a\u30a2\u30d7\u30ea\u306e\u767b\u9332\u306e\u624b\u9806\u306a\u3069\u304c\u8aac\u660e\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\n\\n## \u4f7f\u3063\u3066\u307f\u308b\\n\\n\u3042\u308b\u7a0b\u5ea6\u6982\u8981\u304c\u7406\u89e3\u51fa\u6765\u305f\u3089 [Graph Explorer](https://developer.microsoft.com/en-us/graph/graph-explorer) \u3067\u5b9f\u969b\u306b Microsoft Graph API \u3092\u8a66\u3057\u3066\u307f\u307e\u3059\u3002\\nGraph Explorer \u306f\u3001\u30d6\u30e9\u30a6\u30b6\u304b\u3089 Graph API \u3092\u5b9f\u884c\u3057\u3066\u7c21\u5358\u306b\u8a66\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u30c4\u30fc\u30eb\u3067\u3059\u3002\\n\\n## \u30a2\u30d7\u30ea\u306e\u767b\u9332\\n\\n\u958b\u767a\u8005\u5411\u3051\u306e\u60c5\u5831\u306f [Microsoft Graph \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](https://learn.microsoft.com/ja-jp/graph/) \u3084 [Microsoft Developer/ Microsoft Graph](https://developer.microsoft.com/en-us/graph#get-started) \u306b\u307e\u3068\u307e\u3063\u3066\u3044\u307e\u3059\u3002Microsoft Graph API \u306e\u6982\u8981\u3001\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3001\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u3001\u30b5\u30f3\u30d7\u30eb\u306a\u3069\u3092\u8fbf\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\\n\\n[Microsoft Graph \u306e\u30a2\u30af\u30bb\u30b9\u8a31\u53ef\u3068\u540c\u610f\u3092\u7406\u89e3\u3059\u308b](https://learn.microsoft.com/ja-jp/training/modules/msgraph-javascript-app/3-understand-permissions) \u3067\u306f\u3001Microsoft Graph API \u3092\u4f7f\u3046\u305f\u3081\u306b\u5fc5\u8981\u306a\u30a2\u30d7\u30ea\u306e\u767b\u9332\u306e\u624b\u9806\u304c\u8aac\u660e\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u30a2\u30d7\u30ea\u306e\u767b\u9332\u306f [Azure Portal](https://portal.azure.com/) \u304b\u3089\u884c\u3044\u307e\u3059\u3002\\n\\nAPI \u30ea\u30af\u30a8\u30b9\u30c8\u306e\u5916\u90e8\u4ed5\u69d8\u3092\u7406\u89e3\u51fa\u6765\u305f\u3089\u3001\u5b9f\u969b\u306b Web \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\\n[Microsoft Graph \u30c4\u30fc\u30eb\u30ad\u30c3\u30c8\u3092\u4f7f\u3063\u3066\u30a2\u30d7\u30ea\u3092\u958b\u767a](https://learn.microsoft.com/ja-jp/training/paths/m365-msgraph-toolkit/) \u3067\u306f\u3001Microsoft Graph API \u3092\u4f7f\u3063\u3066 Web \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b\u65b9\u6cd5\u304c\u8aac\u660e\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\n\\n## \u958b\u767a\\n\\nMicrosoft Graph API \u306b\u306f\u3001\u30b5\u30fc\u30d3\u30b9\u3054\u3068\u306b API \u547c\u3073\u51fa\u3057\u306e\u5236\u9650\u304c\u3042\u308a\u307e\u3059\u3002[Microsoft Graph \u30b5\u30fc\u30d3\u30b9\u56fa\u6709\u306e\u8abf\u6574\u5236\u9650](https://learn.microsoft.com/ja-jp/graph/throttling-limits) \u306b\u306f\u3001\u5404\u30b5\u30fc\u30d3\u30b9\u306e\u5236\u9650\u304c\u307e\u3068\u3081\u3089\u308c\u3066\u3044\u307e\u3059\u3002Microsoft Graph API \u3092\u5229\u7528\u3059\u308b\u969b\u306f\u3001\u3053\u306e\u5236\u9650\u306b\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\\n\\n[github.com/microsoftgraph/msgraph-metadata](https://github.com/microsoftgraph/msgraph-metadata) \u306b\u306f\u3001Microsoft Graph API \u306e\u30e1\u30bf\u30c7\u30fc\u30bf\u304c\u307e\u3068\u3081\u3089\u308c\u3066\u3044\u307e\u3059\u3002Microsoft Graph API \u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u306f [Microsoft Graph REST API v1.0 endpoint reference](https://docs.microsoft.com/en-us/graph/api/overview?view=graph-rest-1.0) \u306b\u3042\u308a\u307e\u3059\u3002\\n\\n## \u53c2\u8003\u8cc7\u6599\\n\\n\x3c!-- table --\x3e\\n\\n| \u30bf\u30a4\u30c8\u30eb                                                                                                        | \u3072\u3068\u3053\u3068                                                                                           |\\n| --------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------- |\\n| [Microsoft Teams \u306e\u30c1\u30fc\u30e0 ID\u3001\u30c1\u30e3\u30cd\u30eb ID \u306e\u78ba\u8a8d\u65b9\u6cd5](https://qiita.com/yamad365/items/e480f77e9102b132d258)    | Graph API \u3067\u60c5\u5831\u304c\u5fc5\u8981\u306b\u306a\u308b\u304c\u3001\u3069\u3046\u3084\u3063\u3066\u53d6\u5f97\u3059\u308b\u306e\u304b\u308f\u304b\u3089\u306a\u3044\u3068\u304d\u306b\u53c2\u8003\u306b\u306a\u3063\u305f                 |\\n| [\u8a33\u3042\u3063\u3066 Microsoft Graph API \u8abf\u3079\u3066\u307f\u305f](https://qiita.com/massie_g/items/fe7540161aa4a5f86bf5)                | Microsoft Graph API \u306e\u6982\u8981\u3068\u3001\u30a2\u30d7\u30ea\u306e\u767b\u9332\u306e\u4e00\u9023\u306e\u6d41\u308c\u304c\u660e\u5feb\u306b\u8aac\u660e\u3055\u308c\u3066\u3044\u3066\u30ad\u30e3\u30c3\u30c1\u30a2\u30c3\u30d7\u306b\u4f7f\u3048\u308b |\\n| [Microsoft Graph API Tutorial Series](https://www.youtube.com/playlist?list=PL3JVwFmb_BnT9Ti0MMRj5nPF7XoN-4MQx) | Microsoft Graph API \u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u52d5\u753b                                                           |\\n| [Microsoft Graph \u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb](https://learn.microsoft.com/ja-jp/graph/tutorials?view=graph-rest-1.0)         | Microsoft Graph API \u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb                                                               |\\n| [github.com/microsoftgraph](https://github.com/microsoftgraph)                                                  | Microsoft Graph \u95a2\u9023\u306e GitHub \u30ea\u30dd\u30b8\u30c8\u30ea                                                           |\\n| [\u3072\u3068\u76ee\u3067\u308f\u304b\u308b Microsoft Entra ID](https://amzn.to/48J2DNo)                                                    | \u7b2c 12 \u7ae0 Microsoft Entra ID \u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u7d71\u5408\u304c\u53c2\u8003\u306b\u306a\u308b                                     |"},{"id":"aoai-private-endpoint-managed-id","metadata":{"permalink":"/blog/aoai-private-endpoint-managed-id","source":"@site/blog/2023-11-13-managed-id-aoai.md","title":"AOAI \u306b\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u304b\u3089\u63a5\u7d9a\u3057\u3001VM \u306e\u30de\u30cd\u30fc\u30b8\u30c9 ID \u3092\u5229\u7528\u3057\u3066 API Key \u7121\u3057\u3067 AOAI \u3092\u547c\u3073\u51fa\u3059","description":"\u672c\u8a18\u4e8b\u3067\u306f\u4ee5\u4e0b\u306e 2 \u3064\u306e\u30b7\u30ca\u30ea\u30aa\u3092\u30cf\u30f3\u30ba\u30aa\u30f3\u5f62\u5f0f\u3067\u8aac\u660e\u3057\u307e\u3059\u3002","date":"2023-11-13T00:00:00.000Z","tags":[{"inline":true,"label":"azure","permalink":"/blog/tags/azure"},{"inline":true,"label":"aoai","permalink":"/blog/tags/aoai"},{"inline":true,"label":"bicep","permalink":"/blog/tags/bicep"},{"inline":true,"label":"iac","permalink":"/blog/tags/iac"}],"readingTime":4.065,"hasTruncateMarker":true,"authors":[{"name":"ks6088ts","title":"Software Engineer / Solutions Architect","url":"https://github.com/ks6088ts","imageURL":"https://github.com/ks6088ts.png","key":"ks6088ts","page":null}],"frontMatter":{"slug":"aoai-private-endpoint-managed-id","title":"AOAI \u306b\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u304b\u3089\u63a5\u7d9a\u3057\u3001VM \u306e\u30de\u30cd\u30fc\u30b8\u30c9 ID \u3092\u5229\u7528\u3057\u3066 API Key \u7121\u3057\u3067 AOAI \u3092\u547c\u3073\u51fa\u3059","authors":"ks6088ts","tags":["azure","aoai","bicep","iac"]},"unlisted":false,"prevItem":{"title":"Microsoft Graph API \u95a2\u9023\u60c5\u5831\u306e\u307e\u3068\u3081","permalink":"/blog/graph-api-summary"},"nextItem":{"title":"ks6088ts-labs/baseline-environment-on-azure-bicep \u306e\u30cf\u30f3\u30ba\u30aa\u30f3","permalink":"/blog/handson-baseline-environment-on-azure-bicep"}},"content":"\u672c\u8a18\u4e8b\u3067\u306f\u4ee5\u4e0b\u306e 2 \u3064\u306e\u30b7\u30ca\u30ea\u30aa\u3092\u30cf\u30f3\u30ba\u30aa\u30f3\u5f62\u5f0f\u3067\u8aac\u660e\u3057\u307e\u3059\u3002\\n\\n1. AOAI \u306b\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u304b\u3089\u63a5\u7d9a\u3059\u308b\u65b9\u6cd5\\n1. VM \u306e\u30de\u30cd\u30fc\u30b8\u30c9 ID \u3092\u5229\u7528\u3057\u3066 API Key \u7121\u3057\u3067 AOAI \u3092\u547c\u3073\u51fa\u3059\u65b9\u6cd5\\n\\n\x3c!--truncate--\x3e\\n\\n## \u958b\u767a\u74b0\u5883\u306e\u6e96\u5099\\n\\n\u30cf\u30f3\u30ba\u30aa\u30f3\u3092\u59cb\u3081\u308b\u524d\u306b\u3001\u304a\u4f7f\u3044\u306e\u958b\u767a\u30de\u30b7\u30f3\u306b\u6b21\u306e\u74b0\u5883\u3092\u6e96\u5099\u3057\u307e\u3059\u3002\\n\\n- [Azure CLI](https://learn.microsoft.com/ja-jp/cli/azure/install-azure-cli)\\n- [Bicep](https://learn.microsoft.com/ja-jp/azure/azure-resource-manager/bicep/install#azure-cli)\\n- [GNU Make](https://www.gnu.org/software/make/)\\n\\n\u4ee5\u4e0b\u306e\u74b0\u5883\u3067\u52d5\u4f5c\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002\\n\\n```shell\\n\u276f az version\\n{\\n  \\"azure-cli\\": \\"2.51.0\\",\\n  \\"azure-cli-core\\": \\"2.51.0\\",\\n  \\"azure-cli-telemetry\\": \\"1.1.0\\",\\n  \\"extensions\\": {\\n    \\"azure-iot\\": \\"0.22.0\\",\\n    \\"containerapp\\": \\"0.3.41\\"\\n  }\\n}\\n\\n\u276f az bicep version\\nBicep CLI version 0.22.6 (d62b94db31)\\n```\\n\\n\u672c\u30cf\u30f3\u30ba\u30aa\u30f3\u3067\u306f Azure OpenAI Service \u306b\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u304b\u3089\u63a5\u7d9a\u3059\u308b\u52d5\u4f5c\u78ba\u8a8d\u3092 VM \u304b\u3089\u884c\u3044\u307e\u3059\u3002\\n\\n## \u4e8b\u524d\u6e96\u5099\\n\\n\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u30af\u30ed\u30fc\u30f3\u3057\u3066 `infra/` \u306b\u79fb\u52d5\u3057\u307e\u3059\u3002\\n\\n```shell\\n# clone repository\\ngit clone https://github.com/ks6088ts-labs/baseline-environment-on-azure-bicep.git\\ncd baseline-environment-on-azure-bicep/infra\\n```\\n\\n\u30b7\u30ca\u30ea\u30aa\u3054\u3068\u306b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u5206\u3051\u3089\u308c\u3066\u3044\u308b\u305f\u3081\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u5404\u30b7\u30ca\u30ea\u30aa\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u30c7\u30d7\u30ed\u30a4\u3067\u304d\u307e\u3059\u3002  \\n\u672c\u8a18\u4e8b\u3067\u306f example \u30b7\u30ca\u30ea\u30aa\u3092\u4f7f\u3063\u3066\u8aac\u660e\u3057\u307e\u3059\u3002\\n\\n```shell\\n# deploy example resource\\nmake deployment-create SCENARIO=example\\n```\\n\\n(FIXME: \u30c7\u30d5\u30a9\u30eb\u30c8\u3060\u3068\u95a2\u4fc2\u306e\u306a\u3044\u4e0d\u8981\u306a\u30ea\u30bd\u30fc\u30b9\u3082\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u3002\u5fc5\u8981\u306b\u5fdc\u3058\u3066 .bicepparam \u306e\u30d5\u30e9\u30b0\u8a2d\u5b9a\u3092\u66f8\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002\u4eca\u56de\u306f\u8aac\u660e\u306e\u305f\u3081\u5168\u90e8\u30c7\u30d7\u30ed\u30a4\u3057\u3066\u3044\u307e\u3059\u3002)\\n\\n## 1. AOAI \u306b\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u304b\u3089\u63a5\u7d9a\u3059\u308b\u65b9\u6cd5\\n\\n\x3c!-- textlint-disable --\x3e\\n\\nAzure Portal \u304b\u3089\u306e\u64cd\u4f5c\u65b9\u6cd5\u306f [Azure OpenAI \u306b\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\uff08Private Endpoint\uff09\u3092\u8a2d\u5b9a\u3057\u3066\u6771\u65e5\u672c\u30ea\u30fc\u30b8\u30e7\u30f3\u306e\u4eee\u60f3\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u307f\u304b\u3089\u4f7f\u3046](https://blog.jbs.co.jp/entry/2023/04/07/173940) \u304c\u8a73\u3057\u3044\u3067\u3059\u3002  \\n\u4eca\u56de\u306f Azure Portal \u3067\u306f\u306a\u304f IaC \u30b9\u30af\u30ea\u30d7\u30c8\u306b\u3066\u30a4\u30f3\u30d5\u30e9\u306f\u69cb\u7bc9\u6e08\u3067\u3059\u3002Private Endpoint \u63a5\u7d9a\u306b\u95a2\u9023\u3059\u308b\u30ea\u30bd\u30fc\u30b9\u306f\u3001[baseline-environment-on-azure-bicep/infra/modules/virtualNetwork.bicep](https://github.com/ks6088ts-labs/baseline-environment-on-azure-bicep/blob/main/infra/modules/virtualNetwork.bicep) \u306e `openAiPrivateDnsZone `, `openAiPrivateDnsZoneVirtualNetworkLink`, `openAiPrivateEndpoint`, `openAiPrivateDnsZoneGroupName` \u304c\u8a72\u5f53\u3057\u307e\u3059\u3002\\n\\n\x3c!-- textlint-enable --\x3e\\n\\n\u3053\u3061\u3089\u306e\u74b0\u5883\u3067 VM \u306b SSH \u3067\u30ed\u30b0\u30a4\u30f3\u3057\u3066 Azure OpenAI Service \u306b\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u304b\u3089\u63a5\u7d9a\u51fa\u6765\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002  \\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b `nslookup` \u306e\u7d50\u679c\u3092\u898b\u308b\u3068\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30a2\u30c9\u30ec\u30b9\u304c\u8fd4\u3063\u3066\u304d\u307e\u3059\u3002  \\nref. [Azure OpenAI Service \u306b\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u304b\u3089\u63a5\u7d9a\u3059\u308b](https://zenn.dev/microsoft/articles/198989f60eba61#vm%E3%81%B8rdp%E6%8E%A5%E7%B6%9A)\\n\\n```shell\\nazadmin@TestVm:~$ nslookup  your-aoai-name.openai.azure.com\\nServer:         127.0.0.53\\nAddress:        127.0.0.53#53\\n\\nNon-authoritative answer:\\nyour-aoai-name.openai.azure.com    canonical name = your-aoai-name.privatelink.openai.azure.com.\\nName:   your-aoai-name.privatelink.openai.azure.com\\nAddress: 10.3.1.5\\n```\\n\\n## 2. VM \u306e\u30de\u30cd\u30fc\u30b8\u30c9 ID \u3092\u5229\u7528\u3057\u3066 API Key \u7121\u3057\u3067 AOAI \u3092\u547c\u3073\u51fa\u3059\u65b9\u6cd5\\n\\n\u624b\u9806\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\\n\\n\x3c!-- textlint-disable --\x3e\\n\\n1. VM \u306e\u30b7\u30b9\u30c6\u30e0\u5272\u308a\u5f53\u3066\u30de\u30cd\u30fc\u30b8\u30c9 ID \u3092\u6709\u52b9\u306b\u3059\u308b (\u4eca\u56de\u306f Bicep \u5074\u3067\u65e2\u306b\u6709\u52b9\u5316\u3057\u3066\u3044\u307e\u3059\u3002\u53c2\u8003\u8cc7\u6599\u306f [Azure portal \u3092\u4f7f\u7528\u3057\u3066 Azure VM \u3067 Azure \u30ea\u30bd\u30fc\u30b9\u306e\u30de\u30cd\u30fc\u30b8\u30c9 ID \u3092\u69cb\u6210\u3059\u308b](https://learn.microsoft.com/ja-jp/entra/identity/managed-identities-azure-resources/qs-configure-portal-windows-vm))\\n2. VM \u306e\u30b7\u30b9\u30c6\u30e0\u5272\u308a\u5f53\u3066\u30de\u30cd\u30fc\u30b8\u30c9 ID \u306b\u5bfe\u3057\u3066 AOAI \u30ea\u30bd\u30fc\u30b9\u306e\u547c\u3073\u51fa\u3057\u6a29\u9650\u3092\u5272\u308a\u5f53\u3066\u308b (Azure Portal \u304b\u3089 AOAI \u30ea\u30bd\u30fc\u30b9\u3092\u958b\u304d\u3001IAM > Add role assignment > `Cognitive Services OpenAI User` \u3092\u9078\u3073\u3001\u5272\u5f53\u5148\u3068\u3057\u3066 VM \u306e\u30de\u30cd\u30fc\u30b8\u30c9 ID \u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u53c2\u8003: [\u30de\u30cd\u30fc\u30b8\u30c9 ID \u3092\u4f7f\u7528\u3057\u3066 Azure OpenAI Service \u3092\u69cb\u6210\u3059\u308b\u65b9\u6cd5](https://learn.microsoft.com/ja-jp/azure/ai-services/openai/how-to/managed-identity))\\n3. \u4ee5\u4e0b\u30b3\u30de\u30f3\u30c9\u3067 API Key \u7121\u3057\u306b\u547c\u3073\u51fa\u3057\u304c\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\\n\\n\x3c!-- textlint-enable --\x3e\\n\\n```shell\\n# \u4eee\u60f3\u74b0\u5883\u306e\u6e96\u5099\\npython3 -m venv .venv\\nsource .venv/bin/activate\\npip install azure-identity openai==0.28\\n```\\n\\n`python` \u3092\u5b9f\u884c\u3057 REPL \u74b0\u5883\u3067\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3092\u9010\u6b21\u5b9f\u884c\u3057\u307e\u3059\u3002\\n\u30ea\u30bd\u30fc\u30b9\u540d\u306a\u3069\u306f\u9069\u5b9c\u8aad\u307f\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\u3002\\n\\n```python\\nimport openai\\nfrom azure.identity import DefaultAzureCredential\\n\\ncredential = DefaultAzureCredential()\\ntoken = credential.get_token(\\"https://cognitiveservices.azure.com/.default\\")\\n\\nopenai.api_type = \\"azure_ad\\"\\nopenai.api_key = token.token\\nopenai.api_version = \\"2023-07-01-preview\\"\\nopenai.api_base = \\"https://your-aoai.openai.azure.com\\"\\n\\nresponse = openai.ChatCompletion.create(\\n  engine=\\"gpt-35-turbo\\",\\n  messages = [\\n    {\\"role\\":\\"user\\",\\"content\\":\\"Hello\\"},\\n  ],\\n  temperature=0,\\n)\\n\\n# \u78ba\u8a8d\\nresponse\\n```\\n\\n## \u53c2\u8003\u8cc7\u6599\\n\\n- [ks6088ts-labs/baseline-environment-on-azure-bicep](https://github.com/ks6088ts-labs/baseline-environment-on-azure-bicep)"},{"id":"handson-baseline-environment-on-azure-bicep","metadata":{"permalink":"/blog/handson-baseline-environment-on-azure-bicep","source":"@site/blog/2023-11-03-handson-baseline-environment-on-azure-bicep.md","title":"ks6088ts-labs/baseline-environment-on-azure-bicep \u306e\u30cf\u30f3\u30ba\u30aa\u30f3","description":"Bicep \u306e\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u3092\u307e\u3068\u3081\u305f ks6088ts-labs/baseline-environment-on-azure-bicep \u306e\u5229\u7528\u65b9\u6cd5\u3092\u307e\u3068\u3081\u307e\u3059\u3002","date":"2023-11-03T00:00:00.000Z","tags":[{"inline":true,"label":"azure","permalink":"/blog/tags/azure"},{"inline":true,"label":"iac","permalink":"/blog/tags/iac"},{"inline":true,"label":"bicep","permalink":"/blog/tags/bicep"}],"readingTime":2.16,"hasTruncateMarker":true,"authors":[{"name":"ks6088ts","title":"Software Engineer / Solutions Architect","url":"https://github.com/ks6088ts","imageURL":"https://github.com/ks6088ts.png","key":"ks6088ts","page":null}],"frontMatter":{"slug":"handson-baseline-environment-on-azure-bicep","title":"ks6088ts-labs/baseline-environment-on-azure-bicep \u306e\u30cf\u30f3\u30ba\u30aa\u30f3","authors":"ks6088ts","tags":["azure","iac","bicep"]},"unlisted":false,"prevItem":{"title":"AOAI \u306b\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u304b\u3089\u63a5\u7d9a\u3057\u3001VM \u306e\u30de\u30cd\u30fc\u30b8\u30c9 ID \u3092\u5229\u7528\u3057\u3066 API Key \u7121\u3057\u3067 AOAI \u3092\u547c\u3073\u51fa\u3059","permalink":"/blog/aoai-private-endpoint-managed-id"},"nextItem":{"title":"Azure-Samples/azure-search-openai-demo \u306e\u30cf\u30f3\u30ba\u30aa\u30f3","permalink":"/blog/handson-azure-search-openai-demo"}},"content":"Bicep \u306e\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u3092\u307e\u3068\u3081\u305f [ks6088ts-labs/baseline-environment-on-azure-bicep](https://github.com/ks6088ts-labs/baseline-environment-on-azure-bicep) \u306e\u5229\u7528\u65b9\u6cd5\u3092\u307e\u3068\u3081\u307e\u3059\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## \u958b\u767a\u74b0\u5883\u306e\u6e96\u5099\\n\\n\u30cf\u30f3\u30ba\u30aa\u30f3\u3092\u59cb\u3081\u308b\u524d\u306b\u3001\u304a\u4f7f\u3044\u306e\u958b\u767a\u30de\u30b7\u30f3\u306b\u6b21\u306e\u74b0\u5883\u3092\u6e96\u5099\u3057\u307e\u3059\u3002\\n\\n- [Azure CLI](https://learn.microsoft.com/ja-jp/cli/azure/install-azure-cli)\\n- [Bicep](https://learn.microsoft.com/ja-jp/azure/azure-resource-manager/bicep/install#azure-cli)\\n- [GNU Make](https://www.gnu.org/software/make/)\\n\\n\u4ee5\u4e0b\u306e\u74b0\u5883\u3067\u52d5\u4f5c\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002\\n\\n```shell\\n\u276f az version\\n{\\n  \\"azure-cli\\": \\"2.51.0\\",\\n  \\"azure-cli-core\\": \\"2.51.0\\",\\n  \\"azure-cli-telemetry\\": \\"1.1.0\\",\\n  \\"extensions\\": {\\n    \\"azure-iot\\": \\"0.22.0\\",\\n    \\"containerapp\\": \\"0.3.41\\"\\n  }\\n}\\n\\n\u276f az bicep version\\nBicep CLI version 0.22.6 (d62b94db31)\\n```\\n\\n\u672c\u30cf\u30f3\u30ba\u30aa\u30f3\u3067\u306f Azure \u306e\u74b0\u5883\u4f5c\u6210\u3068 Bicep \u306e\u30b5\u30f3\u30d7\u30eb\u30b7\u30ca\u30ea\u30aa\u306e\u30c7\u30d7\u30ed\u30a4\u306b Azure CLI \u3068 Bicep \u3092\u5229\u7528\u3057\u307e\u3059\u3002\u307e\u305f\u3001\u5404\u7a2e\u64cd\u4f5c\u3092\u307e\u3068\u3081\u305f\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306e\u30bf\u30b9\u30af\u30e9\u30f3\u30ca\u30fc\u3068\u3057\u3066 Makefile \u3092\u5229\u7528\u3057\u307e\u3059\u3002  \\nBicep \u30d1\u30e9\u30e1\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u3092\u5229\u7528\u3057\u307e\u3059\u306e\u3067\u3001Bicep CLI \u30d0\u30fc\u30b8\u30e7\u30f3 0.18.4 \u4ee5\u964d\u304a\u3088\u3073 Azure CLI \u30d0\u30fc\u30b8\u30e7\u30f3 2.47.0 \u4ee5\u964d\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002  \\nref. [Bicep \u30c7\u30d7\u30ed\u30a4\u7528\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b](https://learn.microsoft.com/ja-jp/azure/azure-resource-manager/bicep/parameter-files?tabs=Bicep)\\n\\n## \u30cf\u30f3\u30ba\u30aa\u30f3\\n\\n\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u30af\u30ed\u30fc\u30f3\u3057\u3066 `infra/` \u306b\u79fb\u52d5\u3057\u307e\u3059\u3002\\n\\n```shell\\n# clone repository\\ngit clone https://github.com/ks6088ts-labs/baseline-environment-on-azure-bicep.git\\ncd baseline-environment-on-azure-bicep/infra\\n```\\n\\n\u30b7\u30ca\u30ea\u30aa\u3054\u3068\u306b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u5206\u3051\u3089\u308c\u3066\u3044\u308b\u305f\u3081\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u5404\u30b7\u30ca\u30ea\u30aa\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u30c7\u30d7\u30ed\u30a4\u3067\u304d\u307e\u3059\u3002\\n\\n```shell\\n# \u30b7\u30ca\u30ea\u30aa\u540d\u306f infra/scenarios/* \u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u540d\u3068\u4e00\u81f4\u3057\u3066\u3044\u307e\u3059\\n# \u4ee5\u4e0b\u3067\u306f\u5b9f\u884c\u4f8b\u3068\u3057\u3066 aoai-apim \u30b7\u30ca\u30ea\u30aa\u3092\u30c7\u30d7\u30ed\u30a4\u3057\u307e\u3059\u3002\\nSCENARIO=aoai-apim\\nmake deployment-create SCENARIO=$SCENARIO\\n```\\n\\nmake \u3067\u5b9f\u969b\u306b\u5b9f\u884c\u3057\u3066\u3044\u308b\u30b3\u30de\u30f3\u30c9\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\\n\\n```shell\\n# \u5b9f\u884c\u30b3\u30de\u30f3\u30c9\\naz deployment group create \\\\\\n    --resource-group rg-aoai-apim \\\\\\n    --template-file scenarios/aoai-apim/main.bicep \\\\\\n    --parameters scenarios/aoai-apim/main.parameters.bicepparam\\n```\\n\\n### \u52d5\u4f5c\u78ba\u8a8d\\n\\n- Azure Portal \u306b\u3066 `rg-aoai-apim` \u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\\n- API Management, Azure OpenAI \u30ea\u30bd\u30fc\u30b9\u304c\u751f\u6210\u3055\u308c\u3066\u3044\u308b\\n- \u5404\u7a2e\u30d1\u30e9\u30e1\u30fc\u30bf(SKU, tags, \u30e2\u30c7\u30eb, etc)\u304c\u671f\u5f85\u5024\u901a\u308a\u3067\u3042\u308b\\n\\n## \u53c2\u8003\u8cc7\u6599\\n\\n- [ks6088ts-labs/baseline-environment-on-azure-bicep](https://github.com/ks6088ts-labs/baseline-environment-on-azure-bicep)\\n- [Azure-Samples/aks-openai](https://github.com/Azure-Samples/aks-openai)\\n- [Azure/azure-quickstart-templates](https://github.com/Azure/azure-quickstart-templates)\\n- [\u3010L300-L400\u3011Infrastructure as Code Bicep \u3092\u4f7f\u3063\u305f IaC \u306e\u5b9f\u73fe](https://view.officeapps.live.com/op/view.aspx?src=https%3A%2F%2Fdownload.microsoft.com%2Fdownload%2F3%2Ff%2F5%2F3f50ffe5-acba-4651-a408-db8a912dcdf9%2FIaC_realized_in_Bicep.pptx&wdOrigin=BROWSELINK)\\n- [[AWS Black Belt Online Seminar] AWS Cloud Development Kit (CDK)](https://pages.awscloud.com/rs/112-TZM-766/images/20200303_BlackBelt_CDK.pdf)\\n- [What we leaned about CDK from developing BLEA](https://speakerdeck.com/ohmura/what-we-leaned-about-cdk-from-developing-blea)"},{"id":"handson-azure-search-openai-demo","metadata":{"permalink":"/blog/handson-azure-search-openai-demo","source":"@site/blog/2023-11-01-handson-azure-search-openai-demo.md","title":"Azure-Samples/azure-search-openai-demo \u306e\u30cf\u30f3\u30ba\u30aa\u30f3","description":"Retrieval-Augmented Generation (=RAG) pattern \u306e\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u5b9f\u88c5\u3067\u3042\u308b azure-search-openai-demo \u306e\u5229\u7528\u65b9\u6cd5\u3092\u307e\u3068\u3081\u307e\u3059\u3002","date":"2023-11-01T00:00:00.000Z","tags":[{"inline":true,"label":"azure","permalink":"/blog/tags/azure"},{"inline":true,"label":"openai","permalink":"/blog/tags/openai"}],"readingTime":4.1,"hasTruncateMarker":true,"authors":[{"name":"ks6088ts","title":"Software Engineer / Solutions Architect","url":"https://github.com/ks6088ts","imageURL":"https://github.com/ks6088ts.png","key":"ks6088ts","page":null}],"frontMatter":{"slug":"handson-azure-search-openai-demo","title":"Azure-Samples/azure-search-openai-demo \u306e\u30cf\u30f3\u30ba\u30aa\u30f3","authors":"ks6088ts","tags":["azure","openai"]},"unlisted":false,"prevItem":{"title":"ks6088ts-labs/baseline-environment-on-azure-bicep \u306e\u30cf\u30f3\u30ba\u30aa\u30f3","permalink":"/blog/handson-baseline-environment-on-azure-bicep"},"nextItem":{"title":"Azure OpenAI Service \u306e\u53c2\u8003\u30ea\u30f3\u30af\u96c6","permalink":"/blog/bookmarks-aoai"}},"content":"Retrieval-Augmented Generation (=RAG) pattern \u306e\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u5b9f\u88c5\u3067\u3042\u308b azure-search-openai-demo \u306e\u5229\u7528\u65b9\u6cd5\u3092\u307e\u3068\u3081\u307e\u3059\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## \u958b\u767a\u74b0\u5883\u306e\u6e96\u5099\\n\\n\u30cf\u30f3\u30ba\u30aa\u30f3\u3092\u59cb\u3081\u308b\u524d\u306b\u3001\u304a\u4f7f\u3044\u306e\u958b\u767a\u30de\u30b7\u30f3\u306b\u6b21\u306e\u74b0\u5883\u3092\u6e96\u5099\u3057\u307e\u3059\u3002\\n\\n- [Azure CLI](https://learn.microsoft.com/ja-jp/cli/azure/install-azure-cli)\\n- [Azure Developer CLI](https://learn.microsoft.com/ja-jp/azure/developer/azure-developer-cli/install-azd?tabs=winget-windows%2Cbrew-mac%2Cscript-linux&pivots=os-linux)\\n\\n\u672c\u30cf\u30f3\u30ba\u30aa\u30f3\u3067\u306f Azure \u306e\u74b0\u5883\u4f5c\u6210\u3068\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\u306e\u30c7\u30d7\u30ed\u30a4\u306b Azure Developer CLI \u3092\u5229\u7528\u3057\u307e\u3059\u3002Azure Developer CLI (azd \u30b3\u30de\u30f3\u30c9)\u306f\u3001Azure \u306e\u30ea\u30bd\u30fc\u30b9\u3092\u7ba1\u7406\u3059\u308b\u305f\u3081\u306e\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30c4\u30fc\u30eb\u3067\u3059\u3002\u4e3b\u306b\u4ee5\u4e0b\u306e\u51e6\u7406\u304c\u3067\u304d\u307e\u3059\u3002\\n\\n- Azure \u4e0a\u306e\u30ea\u30bd\u30fc\u30b9\u306e\u4f5c\u6210\u3001\u66f4\u65b0\u3001\u524a\u9664\\n- Azure \u306e\u30ea\u30bd\u30fc\u30b9\u3092\u7ba1\u7406\u3059\u308b\u305f\u3081\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u4f5c\u6210\\n- IaC \u306b\u3088\u308b\u81ea\u52d5\u30c7\u30d7\u30ed\u30a4\u3084\u7ba1\u7406\\n\\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3053\u308c\u3092\u3082\u3068\u306b\u74b0\u5883\u3092\u7d20\u65e9\u304f\u4f5c\u6210\u3067\u304d\u307e\u3059\u3002\\n\u3053\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306f\u81ea\u4f5c\u53ef\u80fd\u3067\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8981\u4ef6\u306b\u3042\u308f\u305b\u305f\u3082\u306e\u3092\u4f5c\u6210\u3057\u3066\u958b\u767a\u30c1\u30fc\u30e0\u3067\u5c55\u958b\u3067\u304d\u307e\u3059\u3002\\n\\nref. [Template Library](https://aka.ms/awesome-azd/)\\n\\n## \u30cf\u30f3\u30ba\u30aa\u30f3\\n\\n`RAG` \u306f\u3001\u5916\u90e8\u306e\u77e5\u8b58\u30d9\u30fc\u30b9\u304b\u3089\u4e8b\u5b9f\u3092\u691c\u7d22\u3057\u3066\u3001\u30e6\u30fc\u30b6\u30fc\u306e\u6d1e\u5bdf\u3092 LLM \u306e\u751f\u6210\u30d7\u30ed\u30bb\u30b9\u306b\u7d44\u307f\u8fbc\u3080\u3068\u3044\u3046 AI \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3067\u3059\u3002\\nref. [\u5916\u90e8\u60c5\u5831\u3092\u53d6\u5f97\u3057\u6587\u8108\u3068\u3057\u3066\u4e0e\u3048\u308b\u8003\u3048\u65b9 Grounding](https://speakerdeck.com/hirosatogamo/chatgpt-azure-openai-da-quan?slide=23)\\n\\n\u672c\u30b5\u30f3\u30d7\u30eb\u306f\u3001Azure Cognitive Search \u3068 Azure OpenAI Service \u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u3001RAG \u30d1\u30bf\u30fc\u30f3\u3092\u5b9f\u88c5\u3057\u305f\u3082\u306e\u3067\u3059\u3002\\n\\n### \u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\u306e\u4f5c\u6210\\n\\n\u81ea\u793e\u88fd\u54c1\u306e\u30de\u30cb\u30e5\u30a2\u30eb\u30fb\u7814\u7a76\u8ad6\u6587\u30fb\u793e\u5185\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306a\u3069\u306e\u5b9f\u969b\u306e\u696d\u52d9\u30c7\u30fc\u30bf\u3092\u4f7f\u3046\u306b\u306f\u3001`data/` \u306b\u691c\u7d22\u3057\u305f\u3044\u4efb\u610f\u306e PDF \u30d5\u30a1\u30a4\u30eb\u3092\u683c\u7d0d\u3057\u307e\u3059\u3002\\n\\n\u306a\u304a\u3001\u672c\u30b5\u30f3\u30d7\u30eb\u306f\u30e6\u30fc\u30b6\u8a8d\u8a3c\u3084\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u9589\u57df\u5316\u3055\u308c\u3066\u3044\u306a\u3044\u305f\u3081\u3001\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306b\u516c\u958b\u3055\u308c\u3066\u3082\u554f\u984c\u306e\u306a\u3044\u30c7\u30fc\u30bf\u3092\u5229\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002\\n\\n### Azure \u30ea\u30bd\u30fc\u30b9\u306e\u4f5c\u6210\\n\\n```shell\\n# Azure \u74b0\u5883\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\\nazd auth login\\n\\n# \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u521d\u671f\u5316\u3057\u307e\u3059\\nazd init\\n\\n# \u30af\u30a8\u30ea\u8a00\u8a9e\u30fb\u30a2\u30ca\u30e9\u30a4\u30b6\u3092\u65e5\u672c\u8a9e\u306b\u8a2d\u5b9a\\nazd env set AZURE_SEARCH_QUERY_LANGUAGE ja-jp\\nazd env set AZURE_SEARCH_QUERY_SPELLER none\\nazd env set AZURE_SEARCH_ANALYZER_NAME ja.lucene\\n\\n# Azure \u30ea\u30bd\u30fc\u30b9\u3092\u4e00\u62ec\u30c7\u30d7\u30ed\u30a4\\nazd up\\n```\\n\\n### \u52d5\u4f5c\u78ba\u8a8d\\n\\n**\u30ed\u30fc\u30ab\u30eb\u3067\u306e\u52d5\u4f5c\u78ba\u8a8d**\\n\\n\u6a5f\u80fd\u62e1\u5f35\u3084\u3001\u52d5\u4f5c\u306e\u4e0d\u5177\u5408\u89e3\u6790\u3092\u76ee\u7684\u3068\u3057\u3066\u3001\u30ed\u30fc\u30ab\u30eb\u3067\u306e\u52d5\u4f5c\u78ba\u8a8d\u3092\u884c\u3044\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\\n\\n```shell\\ncd app; ./start.sh\\n```\\n\\nref. [Running locally](https://github.com/Azure-Samples/azure-search-openai-demo#running-locally)\\n\\n**Cognitive Search \u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u78ba\u8a8d**\\n\\nAzure Portal > Cognitive Search > Search management > Indexes \u753b\u9762\u304b\u3089\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u8a2d\u5b9a\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002  \\nref. [Azure Cognitive Search \u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9](https://learn.microsoft.com/ja-jp/azure/search/search-what-is-an-index)\\n\\n**Cognitive Search \u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u4f5c\u6210**\\n\\n\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u518d\u4f5c\u6210\u30fb\u66f4\u65b0\u3059\u308b\u5834\u5408\u306f\u3001`data/` \u306b pdf \u30d5\u30a1\u30a4\u30eb\u3092\u7f6e\u3044\u305f\u5f8c\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002\\n\\n```shell\\n./scripts/prepdocs.sh\\n```\\n\\n\u4e0a\u8a18\u30b9\u30af\u30ea\u30d7\u30c8\u306f\u3001\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u81ea\u4f53\u306b\u5909\u66f4\u304c\u7121\u3051\u308c\u3070 index \u306f\u518d\u4f5c\u6210\u3055\u308c\u306a\u3044\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002  \\nref. [Store an MD5 hash of uploaded/indexed file and check before prepdocs #835](https://github.com/Azure-Samples/azure-search-openai-demo/pull/835)\\n\\n## FAQ\\n\\n\u30ea\u30dd\u30b8\u30c8\u30ea\u306e FAQ \u306f [Azure-Samples/azure-search-openai-demo#faq](https://github.com/Azure-Samples/azure-search-openai-demo#faq) \u306b\u3042\u308a\u307e\u3059\u3002\\n\\n### \u30c1\u30e3\u30c3\u30c8\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u306b `TypeError: network error` \u3068\u3044\u3046\u30a8\u30e9\u30fc\u304c\u51fa\u308b\\n\\nAOAI \u306e token \u6570\u306e\u4e0a\u9650\u306b\u639b\u304b\u3063\u3066\u3044\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\u53c2\u8003\u6587\u732e\u3068\u3057\u3066\u53d6\u5f97\u3059\u308b\u30c1\u30e3\u30f3\u30af\u6570\u3092\u6e1b\u3089\u3059\u3053\u3068\u3067\u56de\u907f\u3067\u304d\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002  \\n\u53d6\u5f97\u3059\u308b\u30c1\u30e3\u30f3\u30af\u6570\u306f\u3001\u753b\u9762\u53f3\u4e0a\u306e `Developer Settings` \u3092\u30af\u30ea\u30c3\u30af\u3057\u3001`Retrieve this many search results:` \u306e\u8a2d\u5b9a\u304b\u3089\u5909\u66f4\u3067\u304d\u307e\u3059\u3002\\n\\n### GPT-4 \u3092\u4f7f\u3044\u305f\u3044\\n\\n`infra/main.bicep` \u306e `chatGptModelName` \u3092 `gpt-4` \u306b\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002\\n\\n## \u53c2\u8003\u8cc7\u6599\\n\\n- [Azure-Samples/azure-search-openai-demo](https://github.com/Azure-Samples/azure-search-openai-demo)\\n- [support non English languages #780](https://github.com/Azure-Samples/azure-search-openai-demo/pull/780)\\n- [\u696d\u52d9\u30c7\u30fc\u30bf\u3092\u6d3b\u7528\u3057\u305f AI \u30c1\u30e3\u30c3\u30c8\u30b7\u30b9\u30c6\u30e0\u30ef\u30fc\u30af\u30b7\u30e7\u30c3\u30d7](https://asashiho.github.io/azure-search-openai-demo/#/)"},{"id":"bookmarks-aoai","metadata":{"permalink":"/blog/bookmarks-aoai","source":"@site/blog/2023-08-31-bookmarks-aoai.md","title":"Azure OpenAI Service \u306e\u53c2\u8003\u30ea\u30f3\u30af\u96c6","description":"Azure OpenAI Service \u6d3b\u7528\u306e\u305f\u3081\u306b\u500b\u4eba\u7684\u306b\u53c2\u8003\u306b\u306a\u3063\u305f\u60c5\u5831\u6e90\u3092\u6de1\u3005\u3068\u307e\u3068\u3081\u307e\u3059\u3002","date":"2023-08-31T00:00:00.000Z","tags":[{"inline":true,"label":"azure","permalink":"/blog/tags/azure"},{"inline":true,"label":"openai","permalink":"/blog/tags/openai"}],"readingTime":1.945,"hasTruncateMarker":true,"authors":[{"name":"ks6088ts","title":"Software Engineer / Solutions Architect","url":"https://github.com/ks6088ts","imageURL":"https://github.com/ks6088ts.png","key":"ks6088ts","page":null}],"frontMatter":{"slug":"bookmarks-aoai","title":"Azure OpenAI Service \u306e\u53c2\u8003\u30ea\u30f3\u30af\u96c6","authors":"ks6088ts","tags":["azure","openai"]},"unlisted":false,"prevItem":{"title":"Azure-Samples/azure-search-openai-demo \u306e\u30cf\u30f3\u30ba\u30aa\u30f3","permalink":"/blog/handson-azure-search-openai-demo"},"nextItem":{"title":"Azure OpenAI Service \u3092\u7528\u3044\u305f Function Calling \u306e\u30cf\u30f3\u30ba\u30aa\u30f3","permalink":"/blog/aoai-function-calling"}},"content":"Azure OpenAI Service \u6d3b\u7528\u306e\u305f\u3081\u306b\u500b\u4eba\u7684\u306b\u53c2\u8003\u306b\u306a\u3063\u305f\u60c5\u5831\u6e90\u3092\u6de1\u3005\u3068\u307e\u3068\u3081\u307e\u3059\u3002  \\n\u30b7\u30b9\u30c6\u30e0\u958b\u767a\u306e\u969b\u306b\u5fc5\u8981\u3068\u306a\u308b\u5468\u8fba\u30b5\u30fc\u30d3\u30b9\u30fbOSS \u306a\u3069\u3082\u542b\u3081\u3066\u3044\u307e\u3059\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n\x3c!-- textlint-disable --\x3e\\n\\n## \u30b9\u30e9\u30a4\u30c9\\n\\n- [ChatGPT - Azure OpenAI \u5927\u5168](https://speakerdeck.com/hirosatogamo/chatgpt-azure-openai-da-quan)\\n- [ChatGPT | Azure OpenAI Service for Developer](https://speakerdeck.com/dahatake/chatgpt-azure-openai-service-for-developer)\\n- [New Era of Computing - ChatGPT \u304c\u3082\u305f\u3089\u3057\u305f\u65b0\u6642\u4ee3](https://speakerdeck.com/dahatake/new-era-of-computing-chatgpt-gamotarasitaxin-shi-dai-3836814a-133a-4879-91e4-1c036b194718)\\n- [ChatGPT \u3067\u81ea\u5206\u306e\u4ed5\u4e8b\u304c\u3069\u3046\u697d\u3057\u304f\u306a\u308b\u306e\u304b\u3092\u8003\u3048\u308b\u30cd\u30bf\u96c6](https://speakerdeck.com/dahatake/chatgpt-dezi-fen-noshi-shi-gadoule-sikunarunokawokao-erunetaji)\\n- [LLM in Production](https://llm-in-production.connpass.com/presentation/)\\n\\n## \u52d5\u753b\\n\\n- [Azure OpenAI Developers \u30bb\u30df\u30ca\u30fc](https://www.youtube.com/watch?v=ek3YWrHD76g) / [\u8cc7\u6599](http://msft.it/6058g09nQ)\\n- [Azure OpenAI Developers \u30bb\u30df\u30ca\u30fc\u7b2c 2 \u56de](https://www.youtube.com/watch?v=cEynsEWpXdA) / [\u8cc7\u6599](http://msft.it/6050g090j)\\n- [Microsoft Build Japan](https://www.youtube.com/playlist?list=PL1RqQ3kddIpYJ0u1GxTlI0r4qMeGdEL6_) / [\u8cc7\u6599](https://livesend.microsoft.com/i/vBIaLmb4EHNPI24aXkJy9c1QvwiZwYdW4ST3mrxXHPI3S3yBkLWk2dNqob03vvWs1SLI9YanHiTE___9PQuCjBZDWwsNuFuybgO4jLivXN7eIb5YyKTxfWP0Bu7PLUSSIGNHri5PLUSSIGNB)\\n\\n## \u8cc7\u6599\\n\\n- [Azure OpenAI Service REST API reference](https://learn.microsoft.com/en-us/azure/ai-services/openai/reference) / [Azure/azure-rest-api-specs, OpenAPI spec](https://github.com/Azure/azure-rest-api-specs/tree/main/specification/cognitiveservices/data-plane/AzureOpenAI)\\n- [Prompt Engineering Guide](https://www.promptingguide.ai/jp)\\n- [OpenAI / Best practices for prompt engineering with OpenAI API](https://help.openai.com/en/articles/6654000-best-practices-for-prompt-engineering-with-openai-api)\\n- [\u72ec\u81ea\u30ca\u30ec\u30c3\u30b8\u3092\u30ce\u30fc\u30b3\u30fc\u30c9\u3067ChatGPT\u306b\u9023\u643a\uff01Azure Open AI\u300cAdd your data\u300d](https://zenn.dev/microsoft/articles/azure-openai-add-your-data)\\n- [\u751f\u6210AI\u7528Cognitive Search\u306e\u8a00\u8a9e\u30a2\u30ca\u30e9\u30a4\u30b6\u30fc\u3092\u65e5\u672c\u8a9e\u306b\u3057\u305f\u3044](https://qiita.com/tmiyata25/items/e8866dfed6dd4b9a02ad)\\n- [Cognitive Search\u306e\u751f\u6210AI\u7528\u30d9\u30af\u30c8\u30ebDB\u306e\u69cb\u7bc9\u624b\u9806\u66f8](https://qiita.com/tmiyata25/items/875f563ba7a91f3da823)\\n\\n## \u30ef\u30fc\u30af\u30b7\u30e7\u30c3\u30d7\\n\\n- [nohanaga/Azure-Cognitive-Search-Workshop, Azure Cognitive Search Workshop](https://github.com/nohanaga/Azure-Cognitive-Search-Workshop)\\n- [\u696d\u52d9\u30c7\u30fc\u30bf\u3092\u6d3b\u7528\u3057\u305fAI\u30c1\u30e3\u30c3\u30c8 \u30ef\u30fc\u30af\u30b7\u30e7\u30c3\u30d7](https://asashiho.github.io/azure-search-openai-demo/#/) / [\u30ea\u30dd\u30b8\u30c8\u30ea](https://github.com/asashiho/azure-search-openai-demo)\\n- [\u696d\u52d9\u30c7\u30fc\u30bf\u3092\u6d3b\u7528\u3057\u305f\u751f\u6210AI\u30c1\u30e3\u30c3\u30c8\u30b7\u30b9\u30c6\u30e0 \u30ef\u30fc\u30af\u30b7\u30e7\u30c3\u30d7(\u30b3\u30f3\u30c6\u30ca\u30a2\u30d7\u30ea\u30d0\u30fc\u30b8\u30e7\u30f3)](https://asashiho.github.io/azure-search-openai-demo-csharp/) / [\u30ea\u30dd\u30b8\u30c8\u30ea](https://github.com/asashiho/azure-search-openai-demo-csharp)\\n\\n## \u30b5\u30f3\u30d7\u30eb\\n\\n- [Azure-Samples/jp-azureopenai-samples, Azure OpenAI Service\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3](https://github.com/Azure-Samples/jp-azureopenai-samples) / [\u8cc7\u6599](https://www.microsoft.com/ja-jp/events/azurebase/contents/) ( `Azure OpenAI Service \u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3` \u3067\u691c\u7d22 )\\n- [Azure-Samples/azure-search-openai-demo, ChatGPT + Enterprise data with Azure OpenAI and Cognitive Search](https://github.com/Azure-Samples/azure-search-openai-demo)\\n- [How to deploy and run an Azure OpenAI ChatGPT application on AKS via Bicep, Azure-Samples/aks-openai](https://github.com/Azure-Samples/aks-openai) / [Terraform \u7248](https://github.com/Azure-Samples/aks-openai-terraform)\\n- [Create an Azure OpenAI, LangChain, ChromaDB, and Chainlit ChatGPT-like application in Azure Container Apps using Terraform, Azure-Samples/container-apps-openai](https://github.com/Azure-Samples/container-apps-openai)\\n- [Unleash the Power of Azure Open AI, matijagrcic/azurechatgpt](https://github.com/matijagrcic/azurechatgpt)\\n- [vscode-openai](https://github.com/arbs-io/vscode-openai)\\n\\n## \u30e9\u30a4\u30d6\u30e9\u30ea\\n\\n- [openai/openai-python](https://github.com/openai/openai-python)\\n- [langchain-ai/langchain](https://github.com/langchain-ai/langchain)\\n- [microsoft/semantic-kernel](https://github.com/microsoft/semantic-kernel)\\n\\n## \u30c4\u30fc\u30eb\\n\\n- [Android / Microsoft Bing \u691c\u7d22](https://play.google.com/store/apps/details?id=com.microsoft.bing&hl=ja&gl=US)\\n- [Android / ChatGPT](https://play.google.com/store/apps/details?id=com.openai.chatgpt)\\n- [Web / ChatGPT](https://chat.openai.com/)\\n- [Bing Chat Enterprise](https://aka.ms/bingchatenterprise)\\n\\n\x3c!-- textlint-enable --\x3e"},{"id":"aoai-function-calling","metadata":{"permalink":"/blog/aoai-function-calling","source":"@site/blog/2023-07-26-aoai-function-calling/index.md","title":"Azure OpenAI Service \u3092\u7528\u3044\u305f Function Calling \u306e\u30cf\u30f3\u30ba\u30aa\u30f3","description":"Azure OpenAI Service \u3092\u7528\u3044\u305f Function Calling \u3092\u7406\u89e3\u3059\u308b\u305f\u3081\u306e\u30cf\u30f3\u30ba\u30aa\u30f3\u3092\u884c\u3044\u307e\u3057\u305f\u3002\u521d\u898b\u3067\u306f\u4f55\u3092\u3057\u3066\u3044\u308b\u306e\u304b\u3088\u304f\u308f\u304b\u3089\u306a\u304b\u3063\u305f\u3053\u3068\u3082\u3042\u3063\u305f\u306e\u3067\u3001\u81ea\u5206\u304c\u7406\u89e3\u3057\u3066\u3044\u3063\u305f\u904e\u7a0b\u3092\u307e\u3068\u3081\u3066\u304a\u3044\u3066\u5f8c\u7d9a\u306e\u8ab0\u304b\u306b\u5f79\u306b\u7acb\u3066\u3070\u3068\u601d\u3044\u8db3\u8de1\u3092\u6b8b\u3057\u3066\u304a\u304d\u307e\u3059\u3002","date":"2023-07-26T00:00:00.000Z","tags":[{"inline":true,"label":"azure","permalink":"/blog/tags/azure"},{"inline":true,"label":"azure-openai-service","permalink":"/blog/tags/azure-openai-service"},{"inline":true,"label":"langchain","permalink":"/blog/tags/langchain"}],"readingTime":15.04,"hasTruncateMarker":true,"authors":[{"name":"ks6088ts","title":"Software Engineer / Solutions Architect","url":"https://github.com/ks6088ts","imageURL":"https://github.com/ks6088ts.png","key":"ks6088ts","page":null}],"frontMatter":{"slug":"aoai-function-calling","title":"Azure OpenAI Service \u3092\u7528\u3044\u305f Function Calling \u306e\u30cf\u30f3\u30ba\u30aa\u30f3","authors":"ks6088ts","tags":["azure","azure-openai-service","langchain"]},"unlisted":false,"prevItem":{"title":"Azure OpenAI Service \u306e\u53c2\u8003\u30ea\u30f3\u30af\u96c6","permalink":"/blog/bookmarks-aoai"},"nextItem":{"title":"Azure OpenAI Service \u3092\u5229\u7528\u3057\u305f ChatGPT \u304a\u8a66\u3057\u74b0\u5883\u306b\u30ed\u30b0\u51fa\u529b\u6a5f\u80fd\u3092\u8ffd\u52a0\u3059\u308b","permalink":"/blog/aoai-apim-easyauth"}},"content":"Azure OpenAI Service \u3092\u7528\u3044\u305f Function Calling \u3092\u7406\u89e3\u3059\u308b\u305f\u3081\u306e\u30cf\u30f3\u30ba\u30aa\u30f3\u3092\u884c\u3044\u307e\u3057\u305f\u3002\u521d\u898b\u3067\u306f\u4f55\u3092\u3057\u3066\u3044\u308b\u306e\u304b\u3088\u304f\u308f\u304b\u3089\u306a\u304b\u3063\u305f\u3053\u3068\u3082\u3042\u3063\u305f\u306e\u3067\u3001\u81ea\u5206\u304c\u7406\u89e3\u3057\u3066\u3044\u3063\u305f\u904e\u7a0b\u3092\u307e\u3068\u3081\u3066\u304a\u3044\u3066\u5f8c\u7d9a\u306e\u8ab0\u304b\u306b\u5f79\u306b\u7acb\u3066\u3070\u3068\u601d\u3044\u8db3\u8de1\u3092\u6b8b\u3057\u3066\u304a\u304d\u307e\u3059\u3002  \\n\\nOpenAI \u56de\u308a\u306e\u30a8\u30b3\u30b7\u30b9\u30c6\u30e0\u306f\u6025\u901f\u306b\u767a\u5c55\u3057\u3066\u3044\u3066\u3001 Function Calling \u306e feature \u81ea\u4f53\u306f OpenAI \u793e\u304c\u6a5f\u80fd\u3092\u516c\u958b\u3057\u3066\u304b\u3089\u3057\u3070\u3089\u304f\u7d4c\u3063\u3066\u3044\u308b\u305f\u3081\u65e2\u306b\u30e9\u30a4\u30d6\u30e9\u30ea\u5074\u3067\u306e\u30b5\u30dd\u30fc\u30c8\u304c\u5165\u3063\u3066\u3044\u307e\u3059\u3002\u5b9f\u969b\u306e\u30a2\u30d7\u30ea\u958b\u767a\u3067\u306f LangChain, Semantic Kernel, OpenAI \u306a\u3069\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u5229\u7528\u3057\u3066\u30a2\u30d7\u30ea\u3092\u958b\u767a\u3059\u308b\u3053\u3068\u304c\u591a\u3044\u3068\u601d\u3046\u306e\u3067\u3001\u305d\u308c\u3089\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u5229\u7528\u3057\u305f\u5834\u5408\u306e\u5b9f\u88c5\u4f8b\u3082\u4f75\u305b\u3066\u7d39\u4ecb\u3057\u307e\u3059\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## \u30cf\u30f3\u30ba\u30aa\u30f3\u306e\u6982\u8981\\n\\n\u4f4e\u5c64\u306e\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u7406\u89e3\u304c\u3042\u308b\u3068\u3001\u4e0a\u4f4d\u306e\u30ec\u30a4\u30e4\u30fc\u306e\u5b9f\u88c5\u3092\u8aad\u3080\u969b\u306b\u3082\u5b9f\u88c5\u306e\u30a4\u30e1\u30fc\u30b8\u304c\u3064\u304b\u307f\u3084\u3059\u304f\u3001\u7406\u89e3\u304c\u6df1\u307e\u308b\u3068\u601d\u3044\u307e\u3059\u306e\u3067\u6de1\u3005\u3068\u4f4e\u5c64\u306e\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u304b\u3089\u5f90\u3005\u306b\u7406\u89e3\u3057\u3066\u3044\u304f\u5f62\u3067\u30cf\u30f3\u30ba\u30aa\u30f3\u3092\u3057\u307e\u3057\u305f\u3002\\n\\n1. REST API \u4ed5\u69d8\u66f8\u306e\u78ba\u8a8d\\n1. curl \u3067\u547c\u3073\u51fa\u3059\\n1. OpenAI \u30e9\u30a4\u30d6\u30e9\u30ea\u304b\u3089\u547c\u3073\u51fa\u3059\\n1. LangChain \u30e9\u30a4\u30d6\u30e9\u30ea\u304b\u3089\u547c\u3073\u51fa\u3059\\n\\n\u7279\u306b\u65b0\u3057\u3044\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3092\u89e6\u308b\u5834\u5408\u3001\u4f9d\u5b58\u95a2\u4fc2\u306e\u5c11\u306a\u3044\u9806\u306b\u898b\u3066\u3044\u304f\u3068\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u56fa\u6709\u306e\u632f\u308b\u821e\u3044\u3084\u4e0d\u5177\u5408\u306b\u632f\u308a\u56de\u3055\u308c\u306a\u304f\u3066\u6e08\u3080\u306e\u3067\u3001\u4f4e\u5c64\u306e\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u304b\u3089\u89e6\u3063\u3066\u3044\u304f\u30b9\u30bf\u30a4\u30eb\u304c\u597d\u304d\u3067\u3059\u3002\\n\\n### 1. REST API \u4ed5\u69d8\u66f8\u306e\u78ba\u8a8d\\n\\nAPI \u4ed5\u69d8\u66f8\u304c\u4e00\u6b21\u60c5\u5831\u3068\u306a\u308a\u307e\u3059\u306e\u3067\u3001[Azure OpenAI Service REST API reference / Chat completions](https://learn.microsoft.com/en-us/azure/ai-services/openai/reference#chat-completions) \u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u5185\u306e\u30ea\u30f3\u30af\u3092\u305f\u3069\u308b\u3068\u3001\u3069\u3046\u3084\u3089 Azure \u306e REST API \u306f GitHub \u30ea\u30dd\u30b8\u30c8\u30ea\u3067\u516c\u958b\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3001[specification/cognitiveservices/data-plane/AzureOpenAI/inference](https://github.com/Azure/azure-rest-api-specs/tree/main/specification/cognitiveservices/data-plane/AzureOpenAI/inference) \u306b\u5404 API \u30d0\u30fc\u30b8\u30e7\u30f3\u306e OpenAPI \u4ed5\u69d8\u66f8\u304c\u3042\u308a\u307e\u3059\u3002  \\n\u6c17\u306b\u306a\u308b\u7b87\u6240\u3092 blame \u3057\u3066\u5dee\u5206\u306e\u610f\u56f3\u3092\u63a8\u6e2c\u3057\u305f\u308a\u3001\u30b3\u30df\u30c3\u30c8\u30ed\u30b0\u3092\u8aad\u3093\u3067\u5909\u66f4\u306e\u7d4c\u7def\u3092\u78ba\u8a8d\u3057\u305f\u308a\u3059\u308b\u3068\u5473\u308f\u3044\u6df1\u3044\u3067\u3059\u3002\\n\\n\u4eca\u56de\u6ce8\u76ee\u3059\u308b\u306e\u306f\u3001[2023-07-01-preview](https://github.com/Azure/azure-rest-api-specs/blob/main/specification/cognitiveservices/data-plane/AzureOpenAI/inference/preview/2023-07-01-preview/generated.json) \u306e\u4ed5\u69d8\u3067\u3059\u3002json \u3060\u3068\u898b\u3065\u3089\u3044\u306e\u3067\u3001\u79c1\u306f [Swagger UI \u306e demo \u30b5\u30a4\u30c8](https://petstore.swagger.io/) \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001\u5165\u529b\u30d5\u30a9\u30fc\u30e0\u306b OpenAPI spec \u306e\u4ed5\u69d8\u66f8\u306e URL `https://raw.githubusercontent.com/Azure/azure-rest-api-specs/main/specification/cognitiveservices/data-plane/AzureOpenAI/inference/preview/2023-07-01-preview/generated.json` \u3092\u8cbc\u308a\u4ed8\u3051\u3066\u30d6\u30e9\u30a6\u30b6\u3067\u78ba\u8a8d\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n\u30b9\u30ad\u30fc\u30de\u3092\u78ba\u8a8d\u3059\u308b\u3068\u3001`POST /deployments/{deploymentId}/chat/completions` \u306e\u30ea\u30af\u30a8\u30b9\u30c8 body \u306b `functions` \u306a\u308b\u30b9\u30ad\u30fc\u30de\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\n\\n![schema](./schema.png)\\n\\n### 2. curl \u3067\u547c\u3073\u51fa\u3059\\n\\n\u4ed5\u69d8\u3092\u78ba\u8a8d\u3067\u304d\u305f\u306e\u3067\u3001\u6b21\u306f\u5b9f\u969b\u306b Azure OpenAI Service \u306e\u30ea\u30bd\u30fc\u30b9\u3092\u30c7\u30d7\u30ed\u30a4\u3057\u3066\u53e9\u3044\u3066\u307f\u307e\u3059\u3002[Function calling is now available in Azure OpenAI Service](https://techcommunity.microsoft.com/t5/azure-ai-services-blog/function-calling-is-now-available-in-azure-openai-service/ba-p/3879241) \u3092\u8aad\u3080\u3068\u3001\\n\\n> Function calling is now available in Azure OpenAI Service and gives the latest 0613 versions of gpt-35-turbo and gpt-4 the ability to produce structured JSON outputs based on functions that you describe in the request.\\n\\n\u3068\u306e\u3053\u3068\u306a\u306e\u3067\u3001\u3053\u3053\u3067\u306f gpt-35-turbo \u306e 0613 \u30e2\u30c7\u30eb\u3092\u4f7f\u3063\u3066\u307f\u307e\u3059\u3002 \u9069\u5f53\u306a\u95a2\u6570\u306e\u4f8b\u3082\u6b32\u3057\u304b\u3063\u305f\u306e\u3067\u3001[Function calling and other API updates](https://openai.com/blog/function-calling-and-other-api-updates) \u306b\u63b2\u8f09\u3055\u308c\u3066\u3044\u308b\u30b5\u30f3\u30d7\u30eb\u3092\u53c2\u8003\u306b\u3057\u3066\u307f\u307e\u3059\u3002\\n\\nAPI \u3092\u53e9\u304f\u65b9\u6cd5\u306f\u8272\u3005\u3042\u308a\u307e\u3059\u3002Postman \u3068\u304b\u3082\u4fbf\u5229\u3067\u826f\u3044\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u4eca\u56de\u306f\u30b7\u30e5\u30c3\u3068\u624b\u65e9\u304f\u78ba\u8a8d\u3057\u305f\u3044\u3060\u3051\u306a\u306e\u3067\u3001curl \u3067\u4ee5\u4e0b\u306e\u901a\u308a\u53e9\u3044\u3066\u307f\u307e\u3059\u3002\\n\\n```shell\\n# Set variables\\nAOAI_NAME=\\"your-aoai-name\\"\\nAOAI_DEPLOYMENT_ID=\\"your-deployment-id\\"\\nAOAI_API_KEY=\\"your-aoai-api-key\\"\\n\\n\u276f curl -s \\"https://${AOAI_NAME}.openai.azure.com/openai/deployments/${AOAI_DEPLOYMENT_ID}/chat/completions?api-version=2023-07-01-preview\\" \\\\\\n    -H \\"api-key: $AOAI_API_KEY\\" \\\\\\n    -H \'Content-Type: application/json\' -d \'{\\n  \\"model\\": \\"gpt-3.5-turbo-0613\\",\\n  \\"messages\\": [\\n    {\\"role\\": \\"user\\", \\"content\\": \\"What is the weather like in Boston?\\"}\\n  ],\\n  \\"functions\\": [\\n    {\\n      \\"name\\": \\"get_current_weather\\",\\n      \\"description\\": \\"Get the current weather in a given location\\",\\n      \\"parameters\\": {\\n        \\"type\\": \\"object\\",\\n        \\"properties\\": {\\n          \\"location\\": {\\n            \\"type\\": \\"string\\",\\n            \\"description\\": \\"The city and state, e.g. San Francisco, CA\\"\\n          },\\n          \\"unit\\": {\\n            \\"type\\": \\"string\\",\\n            \\"enum\\": [\\"celsius\\", \\"fahrenheit\\"]\\n          }\\n        },\\n        \\"required\\": [\\"location\\"]\\n      }\\n    }\\n  ]\\n}\' | jq -r .\\n{\\n  \\"id\\": \\"chatcmpl-7fN4Um1D4qgK4wqBIkm0i0ZQI3W4H\\",\\n  \\"object\\": \\"chat.completion\\",\\n  \\"created\\": 1690094490,\\n  \\"model\\": \\"gpt-35-turbo\\",\\n  \\"prompt_annotations\\": [\\n    {\\n      \\"prompt_index\\": 0,\\n      \\"content_filter_results\\": {\\n        \\"hate\\": {\\n          \\"filtered\\": false,\\n          \\"severity\\": \\"safe\\"\\n        },\\n        \\"self_harm\\": {\\n          \\"filtered\\": false,\\n          \\"severity\\": \\"safe\\"\\n        },\\n        \\"sexual\\": {\\n          \\"filtered\\": false,\\n          \\"severity\\": \\"safe\\"\\n        },\\n        \\"violence\\": {\\n          \\"filtered\\": false,\\n          \\"severity\\": \\"safe\\"\\n        }\\n      }\\n    }\\n  ],\\n  \\"choices\\": [\\n    {\\n      \\"index\\": 0,\\n      \\"finish_reason\\": \\"function_call\\",\\n      \\"message\\": {\\n        \\"role\\": \\"assistant\\",\\n        \\"function_call\\": {\\n          \\"name\\": \\"get_current_weather\\",\\n          \\"arguments\\": \\"{\\\\n\\\\\\"location\\\\\\": \\\\\\"Boston, MA\\\\\\"\\\\n}\\"\\n        }\\n      },\\n      \\"content_filter_results\\": {}\\n    }\\n  ],\\n  \\"usage\\": {\\n    \\"completion_tokens\\": 17,\\n    \\"prompt_tokens\\": 82,\\n    \\"total_tokens\\": 99\\n  }\\n}\\n```\\n\\n\u4f55\u3089\u304b\u306e\u30a8\u30e9\u30fc\u304c\u3067\u305f\u5834\u5408\u306f\u8a73\u7d30\u306a\u52d5\u4f5c\u3092\u898b\u308b\u305f\u3081\u306b\u3001verbose \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u308b\u3068\u6319\u52d5\u306e\u8a73\u7d30\u304c\u8ffd\u3048\u307e\u3059\u306e\u3067\u3001`-vvv` \u3092\u4ed8\u3051\u3066 deep dive \u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\\n\\n\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u898b\u305f\u3068\u3053\u308d\u3001Function Calling \u306f API \u30b5\u30fc\u30d0\u30fc\u5074\u3067 Function \u3092 call \u3057\u3066\u304f\u308c\u308b\u308f\u3051\u3067\u306f\u306a\u304f\u3066\u3001Function \u306e\u30b7\u30b0\u30cd\u30c1\u30e3\u3068\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u5185\u5bb9\u3092 LLM \u306b\u6e21\u3059\u3068\u3001\u305d\u306e\u60c5\u5831\u3092\u5143\u306b\u547c\u3073\u51fa\u3059\u3079\u304d Function (\u3068\u305d\u306e\u5f15\u6570\u306e\u5024)\u3092 suggest \u3057\u3066\u304f\u308c\u308b\u3001\u3068\u3044\u3063\u305f\u611f\u3058\u3067\u3059\u3002\\n\\n\u4f8b\u3067\u306f\u3001\u73fe\u5728\u306e\u5929\u6c17\u3092\u53d6\u5f97\u3059\u308b `get_current_weather` \u306a\u308b\u95a2\u6570\u3092\u5b9a\u7fa9\u3057\u3066\u3001\u30dc\u30b9\u30c8\u30f3\u306e\u5929\u6c17\u3092\u805e\u304f\u8cea\u554f\u6587\u3092\u6dfb\u3048\u3066\u30ea\u30af\u30a8\u30b9\u30c8\u3057\u3066\u3044\u307e\u3059\u3002\\n\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u4e2d\u306b `choices` \u3068\u3044\u3046\u30ad\u30fc\u304c\u3042\u308a\u3001\u305d\u306e\u4e2d\u306b `finish_reason` \u304c `function_call` \u3068\u306a\u3063\u3066\u3044\u308b\u306e\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\u307e\u305f\u3001 `get_current_weather` \u3068\u3044\u3046\u95a2\u6570\u3092\u3069\u3093\u306a\u5f15\u6570\u3092\u6dfb\u3048\u3066\u547c\u3073\u51fa\u3059\u3079\u304d\u304b\u3092\u8fd4\u3057\u3066\u304f\u308c\u3066\u3044\u307e\u3059\u3002\\n\\n\u81ea\u5206\u304c\u6700\u521d\u52d8\u9055\u3044\u3057\u3066\u3044\u305f\u306e\u3067\u7e70\u308a\u8fd4\u3057\u66f8\u304d\u307e\u3059\u304c\u3001Function Calling \u306f\u95a2\u6570\u306e\u547c\u3073\u51fa\u3057\u81ea\u4f53\u306f\u3084\u3063\u3066\u304a\u3089\u305a\u3001\u3042\u304f\u307e\u3067\u547c\u3073\u51fa\u3059\u3079\u304d\u95a2\u6570\u547c\u3073\u51fa\u3057\u306e\u65b9\u6cd5\u3092\u6559\u3048\u3066\u304f\u308c\u3066\u3044\u308b\u5f62\u306b\u306a\u308a\u3001\u305d\u306e\u95a2\u6570\u3092\u547c\u3076\u304b\u5426\u304b\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30a2\u30d7\u30ea\u5074\u306e\u88c1\u91cf\u6b21\u7b2c\u3068\u306a\u308a\u307e\u3059\u3002\\n\\n\u7d50\u5c40\u3053\u308c\u3001\u4f55\u304c\u5b09\u3057\u3044\u306e\uff1f\u3063\u3066\u3068\u3053\u308d\u3067\u3059\u304c\u3001\u30b7\u30b9\u30c6\u30e0\u9593\u9023\u643a\u306e\u5b9f\u88c5\u304c\u5927\u5206\u697d\u306b\u306a\u3063\u3066\u5b89\u5b9a\u6027\u3082\u4e0a\u304c\u308b\u70b9\u304c\u7269\u51c4\u304f\u5b09\u3057\u3044\u30dd\u30a4\u30f3\u30c8\u304b\u3068\u601d\u3044\u307e\u3059\u3002\u4eca\u307e\u3067\u306f\u30b7\u30b9\u30c6\u30e0\u9593\u9023\u643a\u3092 LLM \u3068\u5b9f\u65bd\u3059\u308b\u969b\u306b\u4e00\u751f\u61f8\u547d\u300c\u3053\u3093\u306a json \u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3067\u8fd4\u3057\u3066\u304f\u308c\u300d\u3001\u307f\u305f\u3044\u306a\u30d7\u30ed\u30f3\u30d7\u30c8\u3092\u66f8\u3044\u3066\u3001\u5e30\u3063\u3066\u304d\u305f\u6587\u5b57\u5217\u3092 validation \u3057\u3066 parse \u3057\u3066\u3001\u53d6\u5f97\u3057\u305f json \u3092\u5916\u90e8\u30b7\u30b9\u30c6\u30e0\u306b\u6e21\u3057\u3066\u3001\u3001\u307f\u305f\u3044\u306a\u82e6\u52b4\u304c\u3042\u308a\u307e\u3057\u305f\u3002\\n\u3053\u3046\u3057\u305f\u82e6\u52b4\u304c\u3059\u3079\u3066\u7dba\u9e97\u306b LLM \u5074\u306e Function Calling \u3067\u7f6e\u304d\u63db\u3048\u3089\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u306e\u3067\u3001\u30a2\u30d7\u30ea\u306e\u5b9f\u88c5\u306f\u7c21\u7d20\u306b\u306a\u308a\u3001\u3055\u3089\u306b\u30a2\u30d7\u30ea\u306e\u5b89\u5b9a\u6027\u3082\u5897\u3059\u30e1\u30ea\u30c3\u30c8\u304c\u3067\u3066\u304d\u307e\u3057\u305f\u3002\u30b7\u30b9\u30c6\u30e0\u9593\u9023\u643a\u3092\u3059\u308b\u5834\u5408\u306b\u306f\u305c\u3072\u5229\u7528\u3059\u3079\u304d\u6a5f\u80fd\u3060\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n### 3. OpenAI \u30e9\u30a4\u30d6\u30e9\u30ea\u304b\u3089\u547c\u3073\u51fa\u3059\\n\\n[Working with functions in Azure OpenAI](https://github.com/Azure-Samples/openai/blob/main/Basic_Samples/Functions/working_with_functions.ipynb) \u304c\u3068\u3066\u3082\u53c2\u8003\u306b\u306a\u308a\u307e\u3059\u3002\\n\u4e0a\u8a18\u306e curl \u306e\u4f8b\u3068\u540c\u3058\u51e6\u7406\u3092 OpenAI \u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u5b9f\u88c5\u3059\u308b\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\\n\\n```python\\ndef get_function_call(messages, function_call = \\"auto\\"):\\n    # Define the functions to use\\n    functions = [\\n        {\\n            \\"name\\": \\"get_current_weather\\",\\n            \\"description\\": \\"Get the current weather in a given location\\",\\n            \\"parameters\\": {\\n                \\"type\\": \\"object\\",\\n                \\"properties\\": {\\n                    \\"location\\": {\\n                        \\"type\\": \\"string\\",\\n                        \\"description\\": \\"The city and state, e.g. San Francisco, CA\\",\\n                    },\\n                    \\"unit\\": {\\"type\\": \\"string\\", \\"enum\\": [\\"celsius\\", \\"fahrenheit\\"]},\\n                },\\n                \\"required\\": [\\"location\\"],\\n            },\\n        },\\n    ]\\n\\n    # Call the model with the user query (messages) and the functions defined in the functions parameter\\n    response = openai.ChatCompletion.create(\\n        deployment_id = deployment_id,\\n        messages=messages,\\n        functions=functions,\\n        function_call=function_call, \\n    )\\n\\n    return response\\n```\\n\\n\u306a\u306b\u3084\u3089 `functions` \u306a\u308b\u5de8\u5927\u306a\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u767b\u5834\u3057\u307e\u3057\u305f\u304c\u3001\u3053\u308c\u304c\u95a2\u6570\u306e\u8aac\u660e\u306b\u306a\u308a\u307e\u3059\u3002\u30b9\u30ad\u30fc\u30de\u3082 API \u306e\u4ed5\u69d8\u306b\u5408\u308f\u305b\u308b\u5fc5\u8981\u304c\u3042\u308b\u306e\u3067\u82e5\u5e72\u6ce8\u610f\u3092\u8981\u3057\u307e\u3059\u3002\\n\u3053\u306e\u30b3\u30fc\u30c9\u3067\u306f\u95a2\u6570\u306e suggest \u307e\u3067\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u304c\u3001\u6b21\u306f suggest \u3055\u308c\u305f\u95a2\u6570\u3092\u547c\u3073\u51fa\u3057\u3066\u9069\u5207\u306a\u56de\u7b54\u3092\u5f97\u308b\u30b3\u30fc\u30c9\u30b9\u30cb\u30da\u30c3\u30c8\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\\n\\n```python\\ndef run_multiturn_conversation(messages, functions, available_functions, deployment_id):\\n    # Step 1: send the conversation and available functions to GPT\\n\\n    response = openai.ChatCompletion.create(\\n        deployment_id=deployment_id,\\n        messages=messages,\\n        functions=functions,\\n        function_call=\\"auto\\", \\n        temperature=0\\n    )\\n\\n    # Step 2: check if GPT wanted to call a function\\n    while response[\\"choices\\"][0][\\"finish_reason\\"] == \'function_call\':\\n        response_message = response[\\"choices\\"][0][\\"message\\"]\\n        print(\\"Recommended Function call:\\")\\n        print(response_message.get(\\"function_call\\"))\\n        print()\\n        \\n        # Step 3: call the function\\n        # Note: the JSON response may not always be valid; be sure to handle errors\\n        \\n        function_name = response_message[\\"function_call\\"][\\"name\\"]\\n        \\n        # verify function exists\\n        if function_name not in available_functions:\\n            return \\"Function \\" + function_name + \\" does not exist\\"\\n        function_to_call = available_functions[function_name]  \\n        \\n        # verify function has correct number of arguments\\n        function_args = json.loads(response_message[\\"function_call\\"][\\"arguments\\"])\\n        if check_args(function_to_call, function_args) is False:\\n            return \\"Invalid number of arguments for function: \\" + function_name\\n        function_response = function_to_call(**function_args)\\n        \\n        print(\\"Output of function call:\\")\\n        print(function_response)\\n        print()\\n        \\n        # Step 4: send the info on the function call and function response to GPT\\n        \\n        # adding assistant response to messages\\n        messages.append(\\n            {\\n                \\"role\\": response_message[\\"role\\"],\\n                \\"name\\": response_message[\\"function_call\\"][\\"name\\"],\\n                \\"content\\": response_message[\\"function_call\\"][\\"arguments\\"],\\n            }\\n        )\\n\\n        # adding function response to messages\\n        messages.append(\\n            {\\n                \\"role\\": \\"function\\",\\n                \\"name\\": function_name,\\n                \\"content\\": function_response,\\n            }\\n        )  # extend conversation with function response\\n\\n        print(\\"Messages in next request:\\")\\n        for message in messages:\\n            print(message)\\n        print()\\n\\n        response = openai.ChatCompletion.create(\\n            messages=messages,\\n            deployment_id=deployment_id,\\n            function_call=\\"auto\\",\\n            functions=functions,\\n            temperature=0\\n        )  # get a new response from GPT where it can see the function response\\n\\n    return response\\n```\\n\\nsuggest \u3055\u308c\u305f\u95a2\u6570\u3092\u547c\u3073\u51fa\u3057\u3001\u305d\u306e\u7d50\u679c\u3092 prompt \u306b\u8ffd\u52a0\u3057\u3001OpenAPI \u3092\u547c\u3073\u51fa\u3059\u51e6\u7406\u3092\u3072\u305f\u3059\u3089\u7e70\u308a\u8fd4\u3057\u3066\u3001`finish_reason` \u304c `function_call` \u3067\u306a\u304f\u306a\u3063\u305f\u3089\u3088\u3046\u3084\u304f\u56de\u7b54\u3092\u5f97\u308b\u3001\u3068\u3044\u3046\u6d41\u308c\u306b\u306a\u308a\u307e\u3059\u3002  \\n\u5b9f\u88c5\u306e\u30a4\u30e1\u30fc\u30b8\u306f\u3053\u308c\u3067\u5927\u4f53\u7406\u89e3\u3067\u304d\u307e\u3057\u305f\u3002\\n\\n### 4. LangChain \u30e9\u30a4\u30d6\u30e9\u30ea\u304b\u3089\u547c\u3073\u51fa\u3059\\n\\nOpenAI \u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u95a2\u6570\u3092\u767b\u9332\u3059\u308b\u969b\u306b\u6b63\u76f4\u3057\u3093\u3069\u3044\u3068\u601d\u3046\u30dd\u30a4\u30f3\u30c8\u304c 2 \u3064\u3042\u308a\u307e\u3057\u305f\u3002\\n\\n1. \u95a2\u6570\u306e\u8aac\u660e\u306e\u305f\u3081\u306e json \u304a\u5316\u3051\u307f\u305f\u3044\u306a\u3082\u306e\u4f5c\u308b\\n2. suggest \u3055\u308c\u305f\u95a2\u6570\u3092\u547c\u3073\u51fa\u3057\u3066\u56de\u7b54\u3092\u5f97\u308b\u307e\u3067\u306e\u7e70\u308a\u8fd4\u3057\u51e6\u7406\\n\\n1 \u306f\u578b\u306e\u5236\u7d04\u306a\u3069\u3082\u639b\u3051\u3089\u308c\u306a\u3044\u3067\u3059\u3057\u3001\u6b63\u76f4\u306b\u8a00\u3046\u3068\u3042\u307e\u308a\u66f8\u304d\u305f\u304f\u306a\u3044\u6c17\u6301\u3061\u306b\u306a\u308a\u307e\u3059\u30022 \u306f\u7d50\u679c\u3092\u5f97\u308b\u307e\u3067\u306e\u30eb\u30fc\u30d7\u51e6\u7406\u3092\u30a2\u30d7\u30ea\u5074\u306e\u30b3\u30fc\u30c9\u306b\u4ed5\u8fbc\u3080\u306e\u306f\u9762\u5012\u3067\u3059\u3002\\n\u5c0f\u898f\u6a21\u306a\u30b5\u30f3\u30d7\u30eb\u3060\u3068\u3053\u306e\u3042\u305f\u308a\u3092\u30b3\u30d4\u30da\u3067\u6e08\u307e\u305b\u308b\u3053\u3068\u306f\u591a\u3044\u3068\u601d\u3046\u306e\u3067\u3059\u304c\u3001\u5c06\u6765\u7684\u306b\u30d7\u30ed\u30c0\u30af\u30c8\u306e\u30b3\u30fc\u30c9\u306b\u7d44\u307f\u8fbc\u3080\u5834\u5408\u306f\u3001\u30e9\u30a4\u30d6\u30e9\u30ea\u5074\u3067\u5438\u53ce\u3057\u3066\u304f\u308c\u308b\u3068\u5b09\u3057\u3044\u3067\u3059\u3002\\n\\n\u3053\u3053\u3067\u306f\u4f8b\u3068\u3057\u3066\u3001[LangChain](https://github.com/langchain-ai/langchain) \u3067\u306e\u5b9f\u88c5\u3092\u898b\u3066\u307f\u307e\u3059\u3002Release note \u3092\u307f\u305f\u3068\u3053\u308d\u3001[v0.0.200](https://github.com/langchain-ai/langchain/releases/tag/v0.0.200) \u6642\u70b9\u3067\u65e2\u306b\u5165\u3063\u3066\u3044\u305f\u3088\u3046\u3067\u958b\u767a\u306e\u65e9\u3055\u304c\u4f3a\u3048\u307e\u3059\u3002\\n\\nAzure OpenAI Service \u3092\u5229\u7528\u3057\u3066\u3001LangChain \u3092\u5229\u7528\u3057\u305f\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306f\u4ee5\u4e0b\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n```python title=\\"main.py\\"\\nimport logging\\nimport os\\n\\nimport openai\\nfrom dotenv import load_dotenv\\nfrom langchain import LLMMathChain\\nfrom langchain.agents import AgentType, Tool, initialize_agent\\nfrom langchain.chat_models import ChatOpenAI\\n\\ndotenv_path = os.path.join(\\".\\", \\".env\\")\\nload_dotenv(dotenv_path)\\n\\nOPENAI_DEPLOYMENT_ID = os.getenv(\\"OPENAI_DEPLOYMENT_ID\\")\\nOPENAI_API_KEY = os.getenv(\\"OPENAI_API_KEY\\")\\nOPENAI_API_BASE = os.getenv(\\"OPENAI_API_BASE\\")\\n\\nopenai.api_type = \\"azure\\"\\nopenai.api_key = OPENAI_API_KEY\\nopenai.api_base = OPENAI_API_BASE\\nopenai.api_version = \\"2023-07-01-preview\\"\\n\\n\\nif __name__ == \\"__main__\\":\\n    llm = ChatOpenAI(\\n        model_name=\\"gpt-35-turbo\\",\\n        temperature=0,\\n        model_kwargs={\\"deployment_id\\": OPENAI_DEPLOYMENT_ID},\\n    )\\n\\n    tools = [\\n        Tool(\\n            name=\\"Calculator\\",\\n            func=LLMMathChain.from_llm(llm=llm, verbose=True).run,\\n            description=\\"\u6570\u7406\u8a08\u7b97\u306e\u7d50\u679c\u3092\u8fd4\u3057\u307e\u3059\\",\\n        ),\\n    ]\\n\\n    agent = initialize_agent(\\n        tools=tools, llm=llm, agent=AgentType.OPENAI_FUNCTIONS, verbose=True\\n    )\\n\\n    for request in [\\n        \\"1955\u5e7410\u670828\u65e5\u306f2023\u5e747\u670824\u65e5\u306e\u4f55\u65e5\u524d\u3067\u3059\u304b\uff1f\\",\\n    ]:\\n        logging.debug(agent.run(request))\\n```\\n\\n```ini title=\\".env\\"\\n# OpenAI API\\nOPENAI_DEPLOYMENT_ID=\\"YOUR_AOAI_DEPLOYMENT_ID\\"\\nOPENAI_API_BASE=\\"https://YOUR_AOAI_NAME.openai.azure.com/\\"\\nOPENAI_API_KEY=\\"YOUR_AOAI_API_KEY\\"\\n```\\n\\n```txt title=\\"requirements.txt\\"\\naiohttp==3.8.5\\naiosignal==1.3.1\\nasync-timeout==4.0.2\\nattrs==23.1.0\\ncertifi==2023.7.22\\ncharset-normalizer==3.2.0\\ndataclasses-json==0.5.13\\nfrozenlist==1.4.0\\ngreenlet==2.0.2\\nidna==3.4\\nlangchain==0.0.242\\nlangsmith==0.0.14\\nmarshmallow==3.20.1\\nmultidict==6.0.4\\nmypy-extensions==1.0.0\\nnumexpr==2.8.4\\nnumpy==1.25.1\\nopenai==0.27.8\\nopenapi-schema-pydantic==1.2.4\\npackaging==23.1\\npydantic==1.10.12\\npython-dotenv==1.0.0\\nPyYAML==6.0.1\\nrequests==2.31.0\\nSQLAlchemy==2.0.19\\ntenacity==8.2.2\\ntqdm==4.65.0\\ntyping-inspect==0.9.0\\ntyping_extensions==4.7.1\\nurllib3==2.0.4\\nyarl==1.9.2\\n```\\n\\n```shell\\n$ python main.py\\n\\n\\n> Entering new AgentExecutor chain...\\n\\nInvoking: `Calculator` with `2023\u5e747\u670824\u65e5 - 1955\u5e7410\u670828\u65e5`\\n\\n\\n\\n\\n> Entering new LLMMathChain chain...\\n2023\u5e747\u670824\u65e5 - 1955\u5e7410\u670828\u65e5\\\\```text\\n(2023 * 365 + 7 * 30 + 24) - (1955 * 365 + 10 * 30 + 28)\\n\\\\```\\n...numexpr.evaluate(\\"(2023 * 365 + 7 * 30 + 24) - (1955 * 365 + 10 * 30 + 28)\\")...\\n\\nAnswer: 24726\\n> Finished chain.\\nAnswer: 247261955\u5e7410\u670828\u65e5\u304b\u30892023\u5e747\u670824\u65e5\u307e\u3067\u306e\u65e5\u6570\u306f\u300124726\u65e5\u3067\u3059\u3002\\n\\n> Finished chain.\\n```\\n\\n(\u8a08\u7b97\u306f\u9593\u9055\u3063\u3066\u3044\u307e\u3059\u304c...) \u95a2\u6570\u306e\u547c\u3073\u51fa\u3057\u3068\u56de\u7b54\u306e\u53d6\u5f97\u307e\u3067\u306e\u51e6\u7406\u304c\u30e9\u30a4\u30d6\u30e9\u30ea\u5074\u3067\u5438\u53ce\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\u4eca\u56de\u306f\u65e2\u5b58\u306e\u6570\u5024\u8a08\u7b97\u7528\u306e `LLMMathChain` \u3092\u5229\u7528\u3057\u307e\u3057\u305f\u304c\u3001LangChain \u3067\u306f\u30ab\u30b9\u30bf\u30e0\u306e Tool \u3092\u5b9f\u88c5\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\\n[Defining Custom Tools](https://python.langchain.com/docs/modules/agents/tools/custom_tools)\u3092\u8aad\u3080\u3068\u30ab\u30b9\u30bf\u30e0\u30c4\u30fc\u30eb\u306e\u5b9f\u88c5\u65b9\u6cd5\u304c\u7406\u89e3\u3067\u304d\u307e\u3059\u3002  \\nAgent \u306b Tool \u3092\u4ed8\u3051\u8db3\u3059\u5f62\u3067\u306e\u5b9f\u88c5\u304c\u3067\u304d\u308b\u306e\u3067\u3001\u5916\u90e8\u30b7\u30b9\u30c6\u30e0\u3068\u306e\u9023\u643a\u3082\u7c21\u5358\u306b\u5b9f\u88c5\u3067\u304d\u305d\u3046\u3067\u3059\u3002\\n\\n## \u307e\u3068\u3081\\n\\n\u4eca\u56de\u306f Azure OpenAI Service \u306e Function Calling \u306e\u30cf\u30f3\u30ba\u30aa\u30f3\u3092\u884c\u3044\u307e\u3057\u305f\u3002  \\nFunction Calling \u306f\u95a2\u6570\u306e\u547c\u3073\u51fa\u3057\u81ea\u4f53\u306f\u3084\u3063\u3066\u304a\u3089\u305a\u3001\u3042\u304f\u307e\u3067\u547c\u3073\u51fa\u3059\u3079\u304d\u95a2\u6570\u547c\u3073\u51fa\u3057\u306e\u65b9\u6cd5\u3092\u6559\u3048\u3066\u304f\u308c\u3066\u3044\u308b\u5f62\u306b\u306a\u308a\u3001\u305d\u306e\u95a2\u6570\u3092\u547c\u3076\u304b\u5426\u304b\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30a2\u30d7\u30ea\u5074\u306e\u88c1\u91cf\u6b21\u7b2c\u3068\u306a\u308a\u307e\u3059\u3002  \\n\u30b7\u30b9\u30c6\u30e0\u9593\u9023\u643a\u306e\u5b9f\u88c5\u304c\u5927\u5206\u697d\u306b\u306a\u3063\u3066\u5b89\u5b9a\u6027\u3082\u4e0a\u304c\u308b\u70b9\u304c\u7269\u51c4\u304f\u5b09\u3057\u3044\u30dd\u30a4\u30f3\u30c8\u304b\u3068\u601d\u3044\u307e\u3059\u3002  \\n\u547c\u3073\u51fa\u3057\u56de\u308a\u306e\u5b9f\u88c5\u306f\u8907\u96d1\u5316\u3057\u3084\u3059\u304f\u306a\u308b\u306e\u3067\u3001\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u89b3\u70b9\u3067\u3059\u3068\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u5229\u7528\u3059\u308b\u306a\u3069\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u3002"},{"id":"aoai-apim-easyauth","metadata":{"permalink":"/blog/aoai-apim-easyauth","source":"@site/blog/2023-06-14-aoai-apim-easyauth/index.md","title":"Azure OpenAI Service \u3092\u5229\u7528\u3057\u305f ChatGPT \u304a\u8a66\u3057\u74b0\u5883\u306b\u30ed\u30b0\u51fa\u529b\u6a5f\u80fd\u3092\u8ffd\u52a0\u3059\u308b","description":"Azure OpenAI Service \u3092\u5229\u7528\u3057\u305f ChatGPT \u304a\u8a66\u3057\u74b0\u5883\u306e\u69cb\u7bc9 \u3067\u306f\u3001ChatGPT \u3092\u4f53\u9a13\u3059\u308b\u74b0\u5883\u3092\u7c21\u5358\u306b\u69cb\u7bc9\u3059\u308b\u65b9\u6cd5\u3092\u3054\u7d39\u4ecb\u3057\u307e\u3057\u305f\u3002","date":"2023-06-14T00:00:00.000Z","tags":[{"inline":true,"label":"azure","permalink":"/blog/tags/azure"},{"inline":true,"label":"azure-ad","permalink":"/blog/tags/azure-ad"},{"inline":true,"label":"app-service","permalink":"/blog/tags/app-service"},{"inline":true,"label":"api-management","permalink":"/blog/tags/api-management"},{"inline":true,"label":"azure-openai-service","permalink":"/blog/tags/azure-openai-service"}],"readingTime":14.79,"hasTruncateMarker":true,"authors":[{"name":"ks6088ts","title":"Software Engineer / Solutions Architect","url":"https://github.com/ks6088ts","imageURL":"https://github.com/ks6088ts.png","key":"ks6088ts","page":null}],"frontMatter":{"slug":"aoai-apim-easyauth","title":"Azure OpenAI Service \u3092\u5229\u7528\u3057\u305f ChatGPT \u304a\u8a66\u3057\u74b0\u5883\u306b\u30ed\u30b0\u51fa\u529b\u6a5f\u80fd\u3092\u8ffd\u52a0\u3059\u308b","authors":"ks6088ts","tags":["azure","azure-ad","app-service","api-management","azure-openai-service"]},"unlisted":false,"prevItem":{"title":"Azure OpenAI Service \u3092\u7528\u3044\u305f Function Calling \u306e\u30cf\u30f3\u30ba\u30aa\u30f3","permalink":"/blog/aoai-function-calling"},"nextItem":{"title":"Azure OpenAI Service \u3092\u5229\u7528\u3057\u305f ChatGPT \u304a\u8a66\u3057\u74b0\u5883\u306e\u69cb\u7bc9","permalink":"/blog/fork-azure-openai-playground"}},"content":"[Azure OpenAI Service \u3092\u5229\u7528\u3057\u305f ChatGPT \u304a\u8a66\u3057\u74b0\u5883\u306e\u69cb\u7bc9](/blog/fork-azure-openai-playground) \u3067\u306f\u3001ChatGPT \u3092\u4f53\u9a13\u3059\u308b\u74b0\u5883\u3092\u7c21\u5358\u306b\u69cb\u7bc9\u3059\u308b\u65b9\u6cd5\u3092\u3054\u7d39\u4ecb\u3057\u307e\u3057\u305f\u3002\\n\\n\u65e2\u306b\u3054\u5229\u7528\u3044\u305f\u3060\u3051\u305f\u30e6\u30fc\u30b6\u30fc\u304b\u3089\u306e\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af\u3068\u3057\u3066\u3001\u300c\u5b9f\u969b\u306e\u5229\u7528\u30ed\u30b0\u306a\u3069\u3092\u78ba\u8a8d\u3057\u305f\u3044\u300d\u3068\u3044\u3046\u3054\u8981\u671b\u3092\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u3002\\n\\n\u672c\u8a18\u4e8b\u3067\u306f Azure \u30de\u30cd\u30fc\u30b8\u30c9\u30b5\u30fc\u30d3\u30b9\u3092\u5229\u7528\u3057\u3066\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u305b\u305a\u306b\u5229\u7528\u30ed\u30b0\u3092\u53ce\u96c6\u3059\u308b\u65b9\u6cd5\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## \u6982\u8981\\n\\nAzure \u3092\u5229\u7528\u3059\u308b\u5834\u5408\u3001\u5019\u88dc\u306b\u6319\u304c\u308b\u306e\u306f Azure API Management (\u4ee5\u4e0b\u3001APIM)\u306e\u5229\u7528\u3067\u3059\u3002\\n\\nAPIM \u306f\u3001Azure \u304c\u63d0\u4f9b\u3059\u308b\u30de\u30cd\u30fc\u30b8\u30c9\u306a API \u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u306e\u30b5\u30fc\u30d3\u30b9\u3067\u3001\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u306b\u3042\u308b\u30b5\u30fc\u30d3\u30b9\u3092\u63d0\u4f9b\u3059\u308b API \u3092\u4e00\u62ec\u3067\u7ba1\u7406\u3057\u3066\u69d8\u3005\u306a\u51e6\u7406 (\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3001\u30ec\u30fc\u30c8\u5236\u9650\u3001\u30c7\u30fc\u30bf\u5909\u63db\u3001\u76e3\u8996\u3001\u306a\u3069) \u3092\u4ef2\u4ecb\u3059\u308b\u3082\u306e\u3067\u3059\u3002\\n\\n\u4eca\u56de\u306e\u30b9\u30b3\u30fc\u30d7\u3067\u3042\u308b\u5229\u7528\u30ed\u30b0\u306e\u53ce\u96c6\u306f\u3001App Service \u306b\u30c7\u30d7\u30ed\u30a4\u3057\u305f\u30a2\u30d7\u30ea\u304b\u3089\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3092 APIM \u3092\u7d4c\u7531\u3055\u305b\u3066\u30ed\u30ae\u30f3\u30b0\u3059\u308b\u3088\u3046\u306a\u69cb\u6210\u3067\u5b9f\u73fe\u3067\u304d\u307e\u3059\u3002\\n\\n![architecture](./architecture.png)\\n\\n\u672c\u8a18\u4e8b\u306e\u30b9\u30b3\u30fc\u30d7\u5916\u3067\u306f\u3042\u308a\u307e\u3059\u304c\u3001APIM \u81ea\u4f53\u306f\u975e\u5e38\u306b\u591a\u6a5f\u80fd\u306a\u30b5\u30fc\u30d3\u30b9\u306a\u306e\u3067\u3001API \u306e\u547c\u3073\u51fa\u3057\u56de\u6570\u3092\u5236\u9650\u3059\u308b\u30ec\u30fc\u30c8\u5236\u9650\u306e\u8a2d\u5b9a\u306a\u3069\u3082 AOAI \u306e\u5229\u7528\u306b\u304a\u3044\u3066\u306f\u5229\u7528\u304c\u898b\u8fbc\u307e\u308c\u308b\u6a5f\u80fd\u304b\u3068\u601d\u3044\u307e\u3059\u3002\u5177\u4f53\u7684\u306a AOAI \u306e\u5236\u9650\u306b\u3064\u3044\u3066\u306f\u3001[Azure OpenAI Service \u306e\u30af\u30a9\u30fc\u30bf\u3068\u5236\u9650](https://learn.microsoft.com/ja-jp/azure/cognitive-services/openai/quotas-limits)\u306b\u8a18\u8f09\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n\u307e\u305f\u3001\u7279\u306b\u5927\u898f\u6a21\u306a\u30b7\u30b9\u30c6\u30e0\u958b\u767a\u306e\u6587\u8108\u3067\u3059\u3068\u3001APIM \u3092\u5883\u754c\u3068\u3057\u3066\u3001\u30b5\u30fc\u30d0\u30fb\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u958b\u767a\u8005\u304c\u5206\u696d\u3067\u304d\u308b\u958b\u767a\u4f53\u5236\u9762\u3067\u306e\u30e1\u30ea\u30c3\u30c8\u3082\u3042\u308a\u307e\u3059\u3002\\n\\n(\u8981\u671b\u304c\u6709\u308a\u6b21\u7b2c\u307e\u305f\u767a\u4fe1\u3057\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002)\\n\\n## \u30cf\u30f3\u30ba\u30aa\u30f3\\n\\n---\\n1. Azure OpenAI Service \u3092\u4f5c\u6210\u3059\u308b\\n1. API Management \u3092\u4f5c\u6210\u3059\u308b\\n1. API Management \u306e\u30d0\u30c3\u30af\u30a8\u30f3\u30c9 API \u3092\u767b\u9332\u3059\u308b\\n1. App Service \u306b\u30a2\u30d7\u30ea\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\\n1. \u8a8d\u8a3c\u51e6\u7406\u3092\u8ffd\u52a0\u3059\u308b\\n1. \u30ed\u30b0\u51fa\u529b\u3092\u6709\u52b9\u5316\u3059\u308b\\n1. \u52d5\u4f5c\u78ba\u8a8d\\n\\n---\\n\\n### Azure OpenAI Service \u3092\u4f5c\u6210\u3059\u308b\\n\\n[Azure OpenAI \u3092\u4f7f\u7528\u3057\u3066\u30ea\u30bd\u30fc\u30b9\u3092\u4f5c\u6210\u3057\u3001\u30e2\u30c7\u30eb\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b](https://learn.microsoft.com/ja-jp/azure/cognitive-services/openai/how-to/create-resource?pivots=web-portal) \u3092\u53c2\u8003\u306b Azure Portal \u304b\u3089 AOAI \u306e\u30ea\u30bd\u30fc\u30b9\u3068\u30e2\u30c7\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\\n\\n### API Management \u3092\u4f5c\u6210\u3059\u308b\\n\\n[Azure portal \u3092\u4f7f\u7528\u3057\u3066\u65b0\u3057\u3044 Azure API Management \u30b5\u30fc\u30d3\u30b9 \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\u3059\u308b](https://learn.microsoft.com/ja-jp/azure/api-management/get-started-create-service-instance) \u3092\u53c2\u8003\u306b APIM \u306e\u30b5\u30fc\u30d3\u30b9\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\\n\\n### API Management \u306e\u30d0\u30c3\u30af\u30a8\u30f3\u30c9 API \u3092\u767b\u9332\u3059\u308b\\n\\nAPIM \u306e\u30d0\u30c3\u30af\u30a8\u30f3\u30c9 API \u3068\u3057\u3066 AOAI \u3092\u767b\u9332\u3057\u307e\u3059\u3002  \\nAOAI \u306f [Azure OpenAI Service \u306e REST API \u30ea\u30d5\u30a1\u30ec\u30f3\u30b9](https://learn.microsoft.com/ja-jp/azure/cognitive-services/openai/reference)\u306b REST API \u306e OpenAPI \u4ed5\u69d8\u304c\u516c\u958b\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\n\\nOpenAPI \u4ed5\u69d8\u304c\u516c\u958b\u3055\u308c\u3066\u3044\u308b\u30d0\u30c3\u30af\u30a8\u30f3\u30c9 API \u3067\u3042\u308c\u3070\u3001[\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb:\u6700\u521d\u306e API \u306e\u30a4\u30f3\u30dd\u30fc\u30c8\u3068\u767a\u884c](https://learn.microsoft.com/ja-jp/azure/api-management/import-and-publish)\u306e\u624b\u9806\u306b\u6cbf\u3063\u3066\u3001APIM \u306b\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\\n\\n\u8a73\u7d30\u306a\u624b\u9806\u306f\u3001[\u30a8\u30f3\u30bf\u30fc\u30d7\u30e9\u30a4\u30ba\u5411\u3051Azure OpenAI\u30a2\u30d7\u30ea\u57fa\u76e4 / \u6a5f\u80fd / API Management](https://github.com/Azure-Samples/openai-python-enterprise-logging/blob/main/README.ja.md#api-management) \u306b\u8a18\u8f09\u304c\u3042\u308a\u307e\u3059\u3002\\n\\n\u203b \u57f7\u7b46\u6642\u70b9(2023/06)\u3067\u306f\u3001\u76f4\u63a5 APIM \u306b AOAI \u306e OpenAPI \u4ed5\u69d8\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u3001AOAI \u306e OpenAPI \u4ed5\u69d8\u306b\u306f import \u3067\u304d\u306a\u3044\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u305f\u3081\u3001HTTP API \u3092\u4e00\u65e6\u4f5c\u6210\u3057\u305f\u5f8c\u306b OpenAPI \u4ed5\u69d8\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\u3092\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3057\u305f\u3002\\n\\nAOAI \u306e REST API \u306e\u4ed5\u69d8\u306f GitHub \u306e [specification/cognitiveservices/data-plane/AzureOpenAI/inference/stable](https://github.com/Azure/azure-rest-api-specs/tree/main/specification/cognitiveservices/data-plane/AzureOpenAI/inference/stable) \u306e\u3042\u305f\u308a\u306b\u516c\u958b\u3055\u308c\u3066\u304a\u308a\u307e\u3059\u3002\\n\\nAOAI \u306b\u9650\u3089\u305a\u3067\u3059\u304c\u3001[Swagger Petstore](https://petstore.swagger.io/) \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001\u898b\u305f\u3044 OpenAPI spec \u306e json \u3092 URL \u306b\u6307\u5b9a\u3059\u308b\u3068\u30a6\u30a7\u30d6\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u898b\u3084\u3059\u3044\u5f62\u3067 API \u4ed5\u69d8\u304c\u78ba\u8a8d\u3067\u304d\u308b\u306e\u3067\u4fbf\u5229\u3067\u3059\u3002\\n\\n\u30a4\u30f3\u30dd\u30fc\u30c8\u3067\u304d\u305f\u3089 APIM \u306e Policy \u8a2d\u5b9a\u3092\u8ffd\u52a0\u3059\u308b\u4f5c\u696d\u306b\u5165\u308a\u307e\u3059\u3002  \\n\u3053\u3053\u3067\u306f\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089 APIM \u3078 HTTP \u30ea\u30af\u30a8\u30b9\u30c8\u3059\u308b\u3068 AOAI \u304c\u547c\u3073\u51fa\u3055\u308c\u308b\u3088\u3046\u306b\u4ee5\u4e0b\u306e\u4e8c\u70b9\u306e\u8a2d\u5b9a\u3057\u307e\u3059\u3002\\n\\n1. Backend API \u306e URL \u8a2d\u5b9a\\n1. AOAI \u306e API Key \u3092\u30d8\u30c3\u30c0\u30fc\u306b\u8ffd\u52a0\u3059\u308b\u8a2d\u5b9a\\n\\n\u306a\u304a\u3001Portal \u304b\u3089 APIM \u306e\u8a2d\u5b9a\u5909\u66f4\u3092\u3057\u3066\u3044\u308b\u64cd\u4f5c\u306f\u3001Policy \u306e XML \u30d5\u30a1\u30a4\u30eb\u3092\u66f8\u304d\u63db\u3048\u3066\u3044\u308b\u3053\u3068\u3068\u307b\u307c\u540c\u7fa9\u3067\u3059\u3002  \\nAzure Portal \u304b\u3089 GUI \u30d9\u30fc\u30b9\u3067\u8a2d\u5b9a\u3059\u308b\u65b9\u6cd5\u306f\u59cb\u3081\u306f\u5224\u308a\u3084\u3059\u3044\u306e\u3067\u3059\u304c\u3001\u8a2d\u5b9a\u9805\u76ee\u304c\u5897\u3048\u308b\u3068\u9762\u5012\u3067\u3059\u3002\u3042\u308b\u7a0b\u5ea6\u6163\u308c\u305f\u308a\u3001\u6c7a\u307e\u3063\u305f\u8a2d\u5b9a\u304c\u3042\u308b\u306e\u3067\u3042\u308c\u3070 XML \u3092\u30b3\u30d4\u30da\u3057\u3066\u76f4\u63a5\u66f8\u304d\u63db\u3048\u308b\u307b\u3046\u304c\u64cd\u4f5c\u304c\u697d\u306b\u306a\u308a\u307e\u3059\u3002  \\n\\n\u6700\u7d42\u7684\u306b Policy \u306e\u8a2d\u5b9a\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u9069\u5b9c backend url \u3084 API key \u3092\u66f8\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002\\n\\n```xml\\n<policies>\\n    <inbound>\\n        <base />\\n        \x3c!-- 1. Backend API \u306e URL \u8a2d\u5b9a, https://{Azure OpenAI Service \u306e Endpoint}/openai --\x3e\\n        <set-backend-service base-url=\\"https://your-aoai.openai.azure.com/openai\\" />\\n        \x3c!-- 2. AOAI \u306e API Key \u3092\u30d8\u30c3\u30c0\u30fc\u306b\u8ffd\u52a0\u3059\u308b\u8a2d\u5b9a --\x3e\\n        <set-header name=\\"api-key\\" exists-action=\\"override\\">\\n            <value>your-aoai-key</value>\\n        </set-header>\\n    </inbound>\\n    <backend>\\n        <base />\\n    </backend>\\n    <outbound>\\n        <base />\\n    </outbound>\\n    <on-error>\\n        <base />\\n    </on-error>\\n</policies>\\n```\\n\\n\u307e\u305f\u3001\u3053\u3053\u3067\u306f\u7c21\u7d20\u5316\u306e\u305f\u3081 Subscription \u30ad\u30fc\u306e\u8981\u6c42\u306f\u7121\u52b9\u5316\u3057\u307e\u3059\u3002API \u306e\u8a2d\u5b9a\u304b\u3089 `Subscription required` \u306e\u30c1\u30a7\u30c3\u30af\u30dc\u30c3\u30af\u30b9\u3092\u5916\u3057\u3066\u7121\u52b9\u5316\u3057\u3066\u304f\u3060\u3055\u3044\u3002\\n\\n\u3053\u3053\u307e\u3067\u8a2d\u5b9a\u3057\u305f\u3089\u3001Azure Portal \u306e `APIM > APIs > {AOAI} > Test` \u30bf\u30d6\u304b\u3089\u9069\u5f53\u306a API \u3092\u9078\u3093\u3067\u3001`deployment-id`Azure Portal \u306e Test \u304b\u3089\u3001APIM \u7d4c\u7531\u3067 AOAI \u306e API \u3092\u547c\u3073\u51fa\u3059\u52d5\u4f5c\u78ba\u8a8d\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\\n\\n\u3053\u3053\u3067\u306f\u3001\\n\\n- APIM \u306b\u30ea\u30af\u30a8\u30b9\u30c8\u767a\u884c\u3059\u308b\u3068 AOAI API \u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u53d6\u5f97\u3067\u304d\u308b\\n- (APIM \u304c\u5185\u90e8\u7684\u306b\u30d8\u30c3\u30c0\u3092\u8a2d\u5b9a\u3059\u308b\u306e\u3067)\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306f AOAI \u306e API Key \u3092\u30d8\u30c3\u30c0\u306b\u542b\u3081\u306a\u304f\u3066\u3088\u3044\\n\\n\u3068\u3044\u3046\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\\n\\n### App Service \u306b\u30a2\u30d7\u30ea\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\\n\\n\u304a\u3082\u3080\u308d\u306b App Service \u306b\u30a2\u30d7\u30ea\u3092\u30c7\u30d7\u30ed\u30a4\u3057\u307e\u3059\u3002\\nApp Service \u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u969b\u3001\u30ed\u30fc\u30ab\u30eb\u30de\u30b7\u30f3\u306e\u30e9\u30f3\u30bf\u30a4\u30e0\u3084\u74b0\u5883\u4f9d\u5b58\u3067\u56f0\u308a\u305f\u304f\u306a\u3044\u306e\u3067\u3001\u79c1\u306f\u57fa\u672c\u7684\u306b\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3092 Docker Hub \u306b\u7f6e\u3044\u3066\u30c7\u30d7\u30ed\u30a4\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n```shell\\nRESOURCE_GROUP_NAME=rg-easyauth-apim\\nAPP_SERVICE_PLAN_NAME=plan-easyauth-apim\\nAPP_SERVICE_NAME=app-easyauth-apim\\nCONTAINER_IMAGE_NAME=ks6088ts/azure-openai-playground\\n\\n# \u30ea\u30bd\u30fc\u30b9\u30b0\u30eb\u30fc\u30d7\u3092\u4f5c\u6210\u3059\u308b\\naz group create \\\\\\n    --name $RESOURCE_GROUP_NAME \\\\\\n    --location japaneast\\n\\n# App Service Plan \u3092\u4f5c\u6210\u3059\u308b\\naz appservice plan create \\\\\\n    --name $APP_SERVICE_PLAN_NAME \\\\\\n    --resource-group $RESOURCE_GROUP_NAME \\\\\\n    --location japaneast \\\\\\n    --sku B1 \\\\\\n    --is-linux\\n\\n# App Service \u3092\u4f5c\u6210\u3059\u308b\\naz webapp create \\\\\\n    --name $APP_SERVICE_NAME \\\\\\n    --plan $APP_SERVICE_PLAN_NAME \\\\\\n    --resource-group $RESOURCE_GROUP_NAME \\\\\\n    --deployment-container-image-name $CONTAINER_IMAGE_NAME\\n\\n# App Service \u306e\u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3059\u308b\\nAZURE_OPENAI_API_URL=\\"https://your-apim.azure-api.net/deployments/your-deployment-id/chat/completions?api-version=2023-05-15\\"\\n\\naz webapp config appsettings set \\\\\\n    --name $APP_SERVICE_NAME \\\\\\n    --resource-group $RESOURCE_GROUP_NAME \\\\\\n    --settings \\\\\\n        WEBSITES_PORT=3000 \\\\\\n        AZURE_OPENAI_API_URL=$AZURE_OPENAI_API_URL\\n\\n# \u8a2d\u5b9a\u3092\u53cd\u6620\u3055\u305b\u308b\u305f\u3081\u306b App Service \u3092\u518d\u8d77\u52d5\u3059\u308b\\naz webapp restart \\\\\\n    --name $APP_SERVICE_NAME \\\\\\n    --resource-group $RESOURCE_GROUP_NAME\\n```\\n\\n\u3053\u3053\u307e\u3067\u3067\u3001App Service \u306b\u30a2\u30d7\u30ea\u304c\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u307e\u3059\u3002\\nApp Service \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u30c1\u30e3\u30c3\u30c8\u753b\u9762\u304b\u3089\u52d5\u4f5c\u78ba\u8a8d\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\\n\\n\u3053\u306e\u6642\u70b9\u3067\u306f\u8a8d\u8a3c\u306f\u304b\u304b\u3063\u3066\u304a\u3089\u305a\u3001\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u304b\u3089\u8ab0\u3067\u3082\u30a2\u30af\u30bb\u30b9\u3067\u304d\u3066\u3057\u307e\u3046\u70b9\u306b\u3054\u6ce8\u610f\u304f\u3060\u3055\u3044\u3002\\n\\nAPIM \u3068\u8a8d\u8a3c\u60c5\u5831\u3092\u3084\u308a\u53d6\u308a\u3059\u308b\u305f\u3081\u3001\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30a2\u30d7\u30ea\u304b\u3089\u306f JWT \u3092 HTTP \u306e\u30ea\u30af\u30a8\u30b9\u30c8\u30d8\u30c3\u30c0\u306b\u6dfb\u3048\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u5177\u4f53\u7684\u306b\u306f\u3001\\n\\n- `/.auth/me` \u306e json \u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u4e2d\u306e `access_token` (=JWT) \u3092\u53d6\u5f97\\n- `Authorization: Bearer {access_token}` \u3092\u30d8\u30c3\u30c0\u306b\u4ed8\u4e0e\u3057\u3066 APIM \u306b HTTP \u30ea\u30af\u30a8\u30b9\u30c8\u3059\u308b\\n\\n\u3068\u306a\u308a\u307e\u3059\u3002\\n\\n### \u8a8d\u8a3c\u51e6\u7406\u3092\u8ffd\u52a0\u3059\u308b\\n\\nApp Service \u3068 API Management \u306e\u8a8d\u8a3c\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\\n\\n#### App Service \u306e\u7d44\u307f\u8fbc\u307f\u8a8d\u8a3c(EasyAuth) \u3092\u6709\u52b9\u306b\u3059\u308b\\n\\n\u7d44\u307f\u8fbc\u307f\u8a8d\u8a3c\u304c\u4f55\u305f\u308b\u304b\u306f [Azure App Service \u304a\u3088\u3073 Azure Functions \u3067\u306e\u8a8d\u8a3c\u3068\u627f\u8a8d](https://learn.microsoft.com/ja-jp/azure/app-service/overview-authentication-authorization) \u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u958b\u767a\u8005\u89b3\u70b9\u3067\u3059\u3068\u3001\u8a8d\u8a3c\u51e6\u7406\u306e\u4e00\u5207\u3092 App Service \u306b\u4efb\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u4ed5\u7d44\u307f\u3067\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u304c Web \u30a2\u30d7\u30ea\u306b\u5230\u9054\u3059\u308b\u524d\u6bb5\u3067\u8a8d\u8a3c\u51e6\u7406\u3092\u884c\u3063\u3066\u304f\u308c\u308b\u3082\u306e\u3068\u6349\u3048\u3066\u304a\u3051\u3070\u3088\u3044\u3067\u3059\u3002\\n\\n\u5b9f\u969b\u306e\u8a2d\u5b9a\u65b9\u6cd5\u306f[\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb: Azure App Service \u3067\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b Web \u30a2\u30d7\u30ea\u306b\u30a2\u30d7\u30ea\u306e\u8a8d\u8a3c\u3092\u8ffd\u52a0\u3059\u308b](https://learn.microsoft.com/ja-jp/azure/app-service/scenario-secure-app-authentication-app-service)\u304c\u8a73\u3057\u3044\u3067\u3059\u3002Azure Portal \u4e0a\u306e\u64cd\u4f5c\u3067\u8a8d\u8a3c\u8a2d\u5b9a\u3092\u5165\u308c\u308b\u306e\u306b\u3001`Azure Active Directory` \u3067\u306f\u306a\u304f\u3001`App Service` \u306e\u30ea\u30bd\u30fc\u30b9\u304b\u3089\u8fbf\u3063\u3066\u3044\u304f\u64cd\u4f5c\u306b\u306a\u308b\u65e8\u3001\u3054\u6ce8\u610f\u304f\u3060\u3055\u3044\u3002\\n\\n\u8a8d\u8a3c\u8a2d\u5b9a\u304c\u8ffd\u52a0\u3055\u308c\u308b\u3068\u3001\u8a8d\u8a3c\u524d\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306f Azure AD \u8a8d\u8a3c\u753b\u9762\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002  \\n\u8a8d\u8a3c\u304c\u5b8c\u4e86\u3059\u308b\u3068\u30a2\u30d7\u30ea\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002\u8a8d\u8a3c\u304c\u5b8c\u4e86\u3057\u305f\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u3001`https://{appservice \u306e url}/.auth/me` \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068 `access_token` \u3068\u3057\u3066 JWT \u304c\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002  \\nref. [Azure App Service \u8a8d\u8a3c\u3067\u30e6\u30fc\u30b6\u30fc ID \u3092\u64cd\u4f5c\u3059\u308b / API \u3092\u4f7f\u7528\u3057\u3066\u30e6\u30fc\u30b6\u30fc \u30af\u30ec\u30fc\u30e0\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b](https://learn.microsoft.com/ja-jp/azure/app-service/configure-authentication-user-identities#access-user-claims-using-the-api)\\n\\n#### API Management \u306e API \u306b\u8a8d\u8a3c\u60c5\u5831\u306e\u691c\u8a3c\u3092\u8ffd\u52a0\u3059\u308b\\n\\nApp Service \u3067\u8a8d\u8a3c\u304c\u5b8c\u4e86\u3057\u305f\u5f8c\u3001API Management \u3067\u8a8d\u8a3c\u60c5\u5831\u306e\u691c\u8a3c\u3092\u884c\u3044\u307e\u3059\u3002\\n[Azure Active Directory \u306e\u30c8\u30fc\u30af\u30f3\u306e\u691c\u8a3c](https://learn.microsoft.com/ja-jp/azure/api-management/validate-azure-ad-token-policy)\u306b\u3042\u308a\u307e\u3059\u3088\u3046\u306b\u3001API Management \u306b\u306f `validate-azure-ad-token` \u3068\u3044\u3046\u30dd\u30ea\u30b7\u30fc\u304c\u3042\u308a\u307e\u3059\u3002\\n\\nInbound Processing \u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b `validate-azure-ad-token` \u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\\n`tenant-id`, `application-id` \u306f EasyAuth \u3067\u8a2d\u5b9a\u3057\u305f\u3082\u306e\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\\n\\n```xml\\n<inbound>\\n    <validate-azure-ad-token tenant-id=\\"your-tenant-id\\">\\n        <client-application-ids>\\n            <application-id>your-application-id</application-id>\\n        </client-application-ids>\\n    </validate-azure-ad-token>\\n</inbound>\\n```\\n\\n\u6700\u7d42\u7684\u306b\u3067\u304d\u3042\u304c\u3063\u305f API Management \u306e\u30dd\u30ea\u30b7\u30fc\u306e\u5168\u4f53\u50cf\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n```xml\\n<policies>\\n    <inbound>\\n        <base />\\n        <set-backend-service base-url=\\"https://your-aoai.openai.azure.com/openai\\" />\\n        <set-header name=\\"api-key\\" exists-action=\\"override\\">\\n            <value>your-aoai-key</value>\\n        </set-header>\\n        <validate-azure-ad-token tenant-id=\\"your-tenant-id\\">\\n            <client-application-ids>\\n                <application-id>your-application-id</application-id>\\n            </client-application-ids>\\n        </validate-azure-ad-token>\\n    </inbound>\\n    <backend>\\n        <base />\\n    </backend>\\n    <outbound>\\n        <base />\\n    </outbound>\\n    <on-error>\\n        <base />\\n    </on-error>\\n</policies>\\n```\\n\\n### \u30ed\u30b0\u51fa\u529b\u3092\u6709\u52b9\u5316\u3059\u308b\\n\\n[Log Analytics \u30ef\u30fc\u30af\u30b9\u30da\u30fc\u30b9\u3092\u4f5c\u6210\u3059\u308b](https://learn.microsoft.com/ja-jp/azure/azure-monitor/logs/quick-create-workspace?tabs=azure-portal)\u3092\u53c2\u8003\u306b Azure Portal \u304b\u3089 Log Analytics Workspace \u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\\n\\n`APIM > Diagnostic settings` \u306b\u3066\u3001`Add diagnostic setting` \u3092\u9078\u629e\u3057\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\\n  - `Logs > audit/allLogs \u3092\u6709\u52b9\u5316`\\n  - `Log Analytics Workspace \u3092\u6709\u52b9\u5316`\\n  - `Archive to a storage account` \u3092\u9078\u629e\\n\\n### \u52d5\u4f5c\u78ba\u8a8d\\n\\n\u4ee5\u4e0b\u306e\u64cd\u4f5c\u3092\u884c\u3044\u3001\u610f\u56f3\u3057\u305f\u52d5\u4f5c\u306b\u306a\u3063\u3066\u3044\u308b\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\\n\\n- App Service \u306e URL \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\\n  - \u8a8d\u8a3c\u753b\u9762\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\\n- APIM \u306e Log \u3092\u78ba\u8a8d(\u4efb\u610f)\\n  - JWT \u306e\u30d8\u30c3\u30c0\u304c\u6e21\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\\n- JWT \u306e\u30d8\u30c3\u30c0\u306a\u3057\u3067 APIM \u306b\u30ea\u30af\u30a8\u30b9\u30c8\u3057\u3066 API \u304c\u547c\u3073\u51fa\u305b\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\\n  - `401 Unauthorized` \u304c\u8fd4\u3063\u3066\u304f\u308b\u3053\u3068\u3092\u78ba\u8a8d\\n- `APIM > Logs` \u3092\u958b\u304d\u3001\u30af\u30a8\u30ea\u3068\u3057\u3066 `ApiManagementGatewayLogs` \u3092\u5b9f\u884c\u3057\u3001\u30ed\u30b0\u304c\u51fa\u529b\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\\n\\n## Tips\\n\\n### \u30c7\u30d0\u30c3\u30b0\u65b9\u6cd5\\n\\n\u958b\u767a\u904e\u7a0b\u3067\u79c1\u304c\u8e0f\u3093\u3060\u30c8\u30e9\u30d6\u30eb\u3084\u305d\u306e\u30c7\u30d0\u30c3\u30b0\u65b9\u6cd5\u306b\u3064\u3044\u3066\u8a18\u8f09\u3057\u307e\u3059\u3002\\n\\n#### \u30ed\u30b0\u51fa\u529b\u3092\u6709\u52b9\u5316\u306f\u958b\u767a\u89b3\u70b9\u3067\u3082\u6709\u52b9\\n\\nAPIM \u9023\u643a\u3092\u3057\u305f\u969b\u3001\u30dd\u30ea\u30b7\u30fc\u8a2d\u5b9a\u304c\u9069\u5207\u306b\u52d5\u4f5c\u3057\u3066\u3044\u308b\u304b\u306e\u78ba\u8a8d\u3084\u3001\u4f55\u304b\u5931\u6557\u3057\u305f\u3068\u304d\u306e\u539f\u56e0\u3092\u8abf\u67fb\u3059\u308b\u89b3\u70b9\u3067\u3082\u30ed\u30ae\u30f3\u30b0\u306f\u6709\u52b9\u3067\u3057\u305f\u3002\u30de\u30cd\u30fc\u30b8\u30c9\u30b5\u30fc\u30d3\u30b9\u3068\u3044\u3046\u3053\u3068\u3067\u51e6\u7406\u306e\u8a73\u7d30\u304c\u96a0\u853d\u3055\u308c\u3066\u3057\u307e\u3046\u3068\u3001\u3048\u3066\u3057\u3066\u958b\u767a\u304c\u56f0\u96e3\u306b\u306a\u308a\u304c\u3061\u306a\u306e\u3067\u3059\u304c\u3001`LastErrorReason` \u3084 `LastErrorMessage` \u306a\u3069\u306e\u60c5\u5831\u306f\u3001\u4f55\u304c\u539f\u56e0\u3067\u5931\u6557\u3057\u305f\u304b\u3092\u8abf\u67fb\u3059\u308b\u969b\u306b\u975e\u5e38\u306b\u5f79\u7acb\u3061\u307e\u3057\u305f\u3002  \\n\u305f\u3068\u3048\u3070\u3001`validate-azure-ad-token` \u3067\u5931\u6557\u3057\u305f\u5834\u5408\u3001`LastErrorReason` \u306b `Invalid JWT token. Token is expired.` \u3068\u3044\u3046\u3088\u3046\u306b\u3001\u5931\u6557\u3057\u305f\u7406\u7531\u304c\u308f\u304b\u3063\u305f\u308a\u3001\\n`LastErrorReason: SubscriptionKeyNotFound`, `LastErrorMessage: Access denied due to missing subscription key. Make sure to include subscription key when making requests to an API.` \u304c\u51fa\u3066\u3044\u308b\u6642\u306f Subscription key \u304c\u629c\u3051\u3066\u3044\u305f\u306e\u3060\u306a\u3001\u306a\u3069\u3002\\n\\n#### \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3068\u30b5\u30fc\u30d0\u3092\u5207\u308a\u5206\u3051\u3066\u52d5\u304b\u3059\\n\\n\u30a2\u30d7\u30ea\u3068 APIM \u306e\u9023\u643a\u306b\u95a2\u3057\u3066\u306f\u3001\u4f55\u304b\u4e0d\u5177\u5408\u304c\u8d77\u304d\u305f\u3068\u304d\u306b App Service \u306a\u306e\u304b APIM \u306e\u8a2d\u5b9a\u306a\u306e\u304b\u306e\u539f\u56e0\u5207\u308a\u5206\u3051\u3092\u884c\u3046\u3053\u3068\u304c\u91cd\u8981\u3067\u3059\u3002\\n\u4e0d\u5177\u5408\u539f\u56e0\u306e\u7279\u5b9a\u306e\u305f\u3081\u306b\u3001\u4e8b\u5b9f\u306e\u7a4d\u307f\u4e0a\u3052\u3068\u4eee\u8aac\u306e\u691c\u8a3c\u3092\u30eb\u30fc\u30d7\u3059\u308b\u308f\u3051\u3067\u3059\u304c\u3001\u3053\u306e\u3068\u304d\u306b\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3068\u30b5\u30fc\u30d0\u3092\u5207\u308a\u5206\u3051\u3066\u52d5\u304b\u3059\u3053\u3068\u3067\u3001\u539f\u56e0\u306e\u7279\u5b9a\u304c\u3057\u3084\u3059\u304f\u306a\u308a\u307e\u3059\u3002\\n\\n\u53cc\u65b9\u304c\u95a2\u4fc2\u3057\u3042\u3046\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u305f\u308b\u90e8\u5206\u306f\u3001\u4e3b\u306b JWT \u306b\u306a\u308a\u307e\u3059\u3002\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30a2\u30d7\u30ea\u3067\u8a8d\u8a3c\u3092\u884c\u3063\u305f\u72b6\u614b\u3067\u3001\u30d6\u30e9\u30a6\u30b6\u304b\u3089 `https://{appservice \u306e URL}/.auth/me` \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3001`access_token` (JWT) \u3092\u53d6\u5f97\u3057\u3001curl \u306a\u3069\u3067 APIM \u306b\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u9001\u308b\u3068\u3044\u3046\u624b\u9806\u3067\u3001APIM \u306b\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u9001\u3063\u3066\u5207\u308a\u5206\u3051\u305f\u308a\u3057\u3066\u3044\u307e\u3057\u305f\u3002\\n\\nAPIM \u306e\u30dd\u30ea\u30b7\u30fc\u8a2d\u5b9a\u306f\u89e6\u3063\u305f\u611f\u3058\u5373\u6642\u53cd\u6620\u306e\u3088\u3046\u306b\u898b\u3048\u308b\u306e\u3067\u3059\u304c\u3001\u6642\u3005\u5fc3\u914d\u306b\u306a\u3063\u305f\u3068\u304d\u306f\u30e6\u30fc\u30b6\u30fc\u5b9a\u7fa9\u3067\u304d\u308b\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u6587\u5b57\u5217\u3092\u5909\u3048\u308b\u306a\u3069\u306e tips \u3082\u540c\u50da\u304b\u3089\u6559\u308f\u308a\u307e\u3057\u305f(\u611f\u8b1d\uff01)\u3002"},{"id":"fork-azure-openai-playground","metadata":{"permalink":"/blog/fork-azure-openai-playground","source":"@site/blog/2023-05-01-fork-azure-openai-playground/index.md","title":"Azure OpenAI Service \u3092\u5229\u7528\u3057\u305f ChatGPT \u304a\u8a66\u3057\u74b0\u5883\u306e\u69cb\u7bc9","description":"Azure OpenAI Service \u3092\u5229\u7528\u3057\u305f ChatGPT \u306e\u8a66\u7528\u74b0\u5883\u3092\u4f5c\u6210\u3057\u3066\u307f\u307e\u3057\u305f\u3002","date":"2023-05-01T00:00:00.000Z","tags":[{"inline":true,"label":"azure","permalink":"/blog/tags/azure"},{"inline":true,"label":"azure-ad","permalink":"/blog/tags/azure-ad"},{"inline":true,"label":"azure-openai-service","permalink":"/blog/tags/azure-openai-service"},{"inline":true,"label":"app-service","permalink":"/blog/tags/app-service"}],"readingTime":11.785,"hasTruncateMarker":true,"authors":[{"name":"ks6088ts","title":"Software Engineer / Solutions Architect","url":"https://github.com/ks6088ts","imageURL":"https://github.com/ks6088ts.png","key":"ks6088ts","page":null}],"frontMatter":{"slug":"fork-azure-openai-playground","title":"Azure OpenAI Service \u3092\u5229\u7528\u3057\u305f ChatGPT \u304a\u8a66\u3057\u74b0\u5883\u306e\u69cb\u7bc9","authors":"ks6088ts","tags":["azure","azure-ad","azure-openai-service","app-service"]},"unlisted":false,"prevItem":{"title":"Azure OpenAI Service \u3092\u5229\u7528\u3057\u305f ChatGPT \u304a\u8a66\u3057\u74b0\u5883\u306b\u30ed\u30b0\u51fa\u529b\u6a5f\u80fd\u3092\u8ffd\u52a0\u3059\u308b","permalink":"/blog/aoai-apim-easyauth"},"nextItem":{"title":"Building a ChatGPT trial environment using Azure OpenAI Service","permalink":"/blog/fork-azure-openai-playground-en"}},"content":"Azure OpenAI Service \u3092\u5229\u7528\u3057\u305f ChatGPT \u306e\u8a66\u7528\u74b0\u5883\u3092\u4f5c\u6210\u3057\u3066\u307f\u307e\u3057\u305f\u3002  \\nChatGPT \u3092\u4f53\u9a13\u3059\u308b\u74b0\u5883\u3068\u3057\u3066\u306f\u3001\u65e2\u306b OpenAI \u3067\u3082 Azure OpenAI Service \u3067\u3082\u4f7f\u3044\u52dd\u624b\u306e\u3044\u3044\u30a6\u30a7\u30d6\u30a2\u30d7\u30ea\u304c\u3042\u308a\u3001\u30d6\u30e9\u30a6\u30b6\u3068\u30a2\u30ab\u30a6\u30f3\u30c8\u3055\u3048\u3042\u308c\u3070\u3059\u3050\u306b\u8a66\u305b\u307e\u3059\u3002\\n\\n- OpenAI: [ChatGPT \u306e\u30a6\u30a7\u30d6\u30a2\u30d7\u30ea](https://chat.openai.com/), [Playground](https://platform.openai.com/playground)\\n- Azure: [Azure OpenAI Studio](https://oai.azure.com/portal)\\n\\n\u500b\u4eba\u7684\u306a\u304a\u8a66\u3057\u3068\u3044\u3046\u89b3\u70b9\u3067\u3059\u3068\u3053\u308c\u3089\u306e\u30a6\u30a7\u30d6\u30a2\u30d7\u30ea\u3092\u5229\u7528\u3059\u308b\u3060\u3051\u3067\u5341\u5206\u3067\u3059\u304c\u3001  \\n\u696d\u52d9\u3078\u306e\u9069\u7528\u3092\u8996\u91ce\u306b\u5165\u308c\u3066\u3001\u5e83\u304f\u7d44\u7e54\u5185\u3067\u8a66\u7528\u3059\u308b\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u3092\u8003\u3048\u308b\u3068\u69d8\u3005\u306a\u8ab2\u984c\u304c\u51fa\u3066\u304d\u307e\u3059\u3002  \\n\\n\u4f8b\u3048\u3070\u3001\u30b7\u30f3\u30d7\u30eb\u306b API Token \u3092\u6255\u3044\u51fa\u3057\u3066\u305d\u306e\u307e\u307e\u4f7f\u3046\u65b9\u6cd5\u3067\u3059\u3068\u3001\u4e07\u304c\u4e00 API Token \u304c\u6f0f\u6d29\u3057\u305f\u5834\u5408\u306b\u4e0d\u6b63\u5229\u7528\u3092\u9632\u3050\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u3002\u307e\u305f\u3001\u30e6\u30fc\u30b6\u30fc\u3092\u7d44\u7e54\u5185\u306e\u30e1\u30f3\u30d0\u30fc\u306b\u9650\u5b9a\u3057\u305f\u3044\u5834\u5408\u3001\u4f55\u3089\u304b\u306e\u65b9\u6cd5\u3067\u8a8d\u8a3c\u3059\u308b\u5fc5\u8981\u304c\u3067\u3066\u304d\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u8ab2\u984c\u306b\u5bfe\u3057\u3066\u30bc\u30ed\u304b\u3089\u53d6\u308a\u7d44\u3080\u3068\u3001\u672c\u6765\u306e\u76ee\u7684\u3067\u3042\u308b ChatGPT \u306e\u8a66\u7528\u306b\u5272\u304f\u6642\u9593\u304c\u6e1b\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002  \\n\\n\u305d\u3053\u3067\u3001\u672c\u8a18\u4e8b\u3067\u306f\u696d\u52d9\u4e0a\u306e PoC \u5229\u7528\u3092\u898b\u636e\u3048\u3001Azure OpenAI Service \u3092\u4f7f\u3063\u305f OpenAI API \u306e\u8a66\u7528\u74b0\u5883\u306e\u69cb\u7bc9\u65b9\u6cd5\u3092\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u4ed8\u304d\u3067\u7d39\u4ecb\u3057\u307e\u3059\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## \u6982\u8981\\n\\n\\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3067\u69cb\u7bc9\u3057\u307e\u3059\u3002\\n\\n![architecture](./architecture.png)\\n\\n## \u30cf\u30f3\u30ba\u30aa\u30f3\\n\\n\u4f5c\u696d\u624b\u9806\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\\n\\n---\\n1. Azure OpenAI Service \u306e\u30ea\u30bd\u30fc\u30b9\u3092\u4f5c\u6210\u3059\u308b\\n2. \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u958b\u767a\u3059\u308b\\n3. App Service \u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\\n4. App Service \u3067\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b Web \u30a2\u30d7\u30ea\u306b\u8a8d\u8a3c\u3092\u8ffd\u52a0\u3059\u308b\\n5. \u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3059\u308b\\n6. App Service \u306e VNET \u7d71\u5408\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3059\u308b\\n---\\n\\n\u4ee5\u4e0b\u3067\u306f\u3001\u3053\u308c\u3089\u624b\u9806\u306b\u3064\u3044\u3066\u9806\u306b\u898b\u3066\u3044\u304d\u307e\u3059\u3002\\n\u4f5c\u696d\u304c\u5b8c\u4e86\u3057\u305f\u3089 App Service \u306e URL \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001ChatGPT \u3092\u8a66\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\\n\\n### 1. Azure OpenAI Service \u306e\u30ea\u30bd\u30fc\u30b9\u3092\u4f5c\u6210\u3059\u308b\\n\\n[Azure OpenAI \u3092\u4f7f\u7528\u3057\u3066\u30ea\u30bd\u30fc\u30b9\u3092\u4f5c\u6210\u3057\u3001\u30e2\u30c7\u30eb\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b](https://learn.microsoft.com/ja-jp/azure/cognitive-services/openai/how-to/create-resource?pivots=cli)\u3092\u53c2\u8003\u306b\u3001Azure Portal \u304b\u3089 Azure OpenAI Service \u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\\n\u3053\u3053\u3067\u6255\u3044\u51fa\u3057\u305f Azure Open AI \u306e\u30ea\u30bd\u30fc\u30b9\u540d\u3001\u30c7\u30d7\u30ed\u30a4\u3057\u305f\u30e2\u30c7\u30eb\u306e\u540d\u524d\u3001API \u30ad\u30fc\u306f\u5f8c\u3067\u5229\u7528\u3057\u307e\u3059\u3002\\n\\nAzure Portal \u306b\u3042\u308b Azure OpenAI Studio \u3067\u306f\u3001\u7c21\u5358\u306b\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u30c7\u30d7\u30ed\u30a4\u3057\u305f\u30e2\u30c7\u30eb\u3092\u4f7f\u3063\u305f\u52d5\u4f5c\u78ba\u8a8d\u304c\u3067\u304d\u307e\u3059\u3002\\n\\n### 2. \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u958b\u767a\u3059\u308b\\n\\nOpenAI \u306e\u30c1\u30e3\u30c3\u30c8\u306e\u30d5\u30a9\u30fc\u30e0\u3084 Playground \u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u8a2d\u5b9a UI \u306a\u3069\u3001\u5fc5\u8981\u306a UI \u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306f\u305d\u308c\u306a\u308a\u306b\u591a\u304f\u3001\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30a2\u30d7\u30ea\u3092\u30bc\u30ed\u304b\u3089\u66f8\u304f\u3068\u7d50\u69cb\u306a\u5de5\u6570\u306b\u306a\u308a\u307e\u3059\u3002  \\n\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30a2\u30d7\u30ea\u306e\u5b9f\u88c5\u306f\u76ee\u7684\u3067\u306f\u306a\u3044\u306e\u3067\u3001\u3072\u3068\u307e\u305a\u6700\u77ed\u3067\u76ee\u7684\u304c\u9054\u6210\u3055\u308c\u308b\u3053\u3068\u3092\u512a\u5148\u3059\u308b\u305f\u3081\u826f\u3055\u305d\u3046\u306a OSS \u3092\u63a2\u3057\u307e\u3059\u3002  \\nGitHub \u3067 Star \u6570\u3067\u30bd\u30fc\u30c8\u3057\u3066\u3001\u3044\u304f\u3064\u304b OSS \u3092\u6f01\u3063\u3066\u307f\u305f\u3068\u3053\u308d\u3001Azure OpenAI Service \u3092\u5229\u7528\u3057\u305f\u305d\u306e\u3082\u306e\u30ba\u30d0\u30ea\u306a\u30a2\u30d7\u30ea\u306f\u898b\u3064\u304b\u3089\u306a\u304b\u3063\u305f\u306e\u3067\u3059\u304c\u3001[Nashex/gpt4-playground](https://github.com/Nashex/gpt4-playground) \u3068\u3044\u3046 OpenAI \u306e Playground \u3092\u30af\u30ed\u30fc\u30f3\u3057\u305f OSS \u304c\u898b\u3064\u304b\u308a\u307e\u3057\u305f\u3002  \\ndemo \u30b5\u30a4\u30c8 ([GPT-4 Playground](https://www.gpt4-playground.com/)) \u3082\u3042\u3063\u3066\u3001OpenAI \u306e API \u3092\u5229\u7528\u3057\u3066\u3044\u308b\u70b9\u3092\u9664\u304d\u3001\u4eca\u56de\u306e\u76ee\u7684\u306b\u307b\u307c\u5408\u81f4\u3057\u3066\u305d\u3046\u3067\u3059\u3002  \\n\\n\u3053\u306e OSS \u3092 fork \u3057\u3066\u3001OpenAI API \u3092\u30b3\u30fc\u30eb\u3057\u3066\u3044\u308b\u7b87\u6240\u3092 Azure OpenAI Service \u3092\u5229\u7528\u3059\u308b\u3088\u3046\u306b\u5909\u66f4\u3059\u308c\u3070\u30b5\u30af\u30c3\u3068\u52d5\u304d\u305d\u3046\u3067\u3059\u3002  \\n\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u304c\u305d\u308c\u306b\u8a72\u5f53\u3057\u307e\u3059\u3002\\n\\n```typescript title=\\"gpt4-playground/src/utils/OpenAI/OpenAI.ts\\"\\n  const response = await fetch(\\"https://api.openai.com/v1/chat/completions\\", {\\n    headers: {\\n      Authorization: `Bearer ${token}`,\\n      \\"Content-Type\\": \\"application/json\\",\\n    },\\n    method: \\"POST\\",\\n    body: JSON.stringify(payload),\\n  });\\n```\\n\\nfetch \u5148 url \u3068\u30ea\u30af\u30a8\u30b9\u30c8\u30d8\u30c3\u30c0\u306e `Authorization` \u3092 `api-key` \u306b\u66f8\u304d\u63db\u3048\u308b\u3068 Azure OpenAI Service \u3067\u540c\u69d8\u306e\u6a5f\u80fd\u304c\u52d5\u304d\u307e\u3057\u305f\u3002  \\n\u6700\u7d42\u7684\u306b Docker \u30a4\u30e1\u30fc\u30b8\u306b\u3057\u3066\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u4e88\u5b9a\u3060\u3063\u305f\u306e\u3067\u3001API KEY \u306e\u3088\u3046\u306a\u79d8\u533f\u60c5\u5831\u3084\u30ea\u30bd\u30fc\u30b9\u540d\u306a\u3069\u306f\u74b0\u5883\u5909\u6570\u3067\u5916\u90e8\u304b\u3089\u8a2d\u5b9a\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002Next.js \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\u63a1\u7528\u3057\u3066\u3044\u308b\u305f\u3081\u3001\u74b0\u5883\u5909\u6570\u306e\u8a2d\u5b9a\u65b9\u6cd5\u306f\u3001[Next.js \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](https://nextjs.org/docs/basic-features/environment-variables)\u3092\u53c2\u7167\u3057\u307e\u3057\u305f\u3002\\n\\n\u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u3067\u52d5\u4f5c\u304c\u78ba\u8a8d\u3067\u304d\u305f\u3089\u3001Dockerfile \u3092\u66f8\u3044\u3066\u30b3\u30f3\u30c6\u30ca\u5316\u3057\u3066 Docker Hub \u306b push \u3057\u3066\u304a\u304d\u307e\u3059\u3002\\n\u30a4\u30e1\u30fc\u30b8\u3092\u4f5c\u6210\u3059\u308b\u969b\u306f\u3001Next.js \u306e production build \u3092\u5b9f\u884c\u3057\u3066\u3001\u305d\u306e\u6210\u679c\u7269\u3092\u30a4\u30e1\u30fc\u30b8\u306b\u914d\u7f6e\u3057\u307e\u3059\u3002\\n\\nfork \u3057\u3066\u6539\u5909\u3057\u305f\u30a2\u30d7\u30ea\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f [ks6088ts-labs/azure-openai-playground](https://github.com/ks6088ts-labs/azure-openai-playground) \u306b\u516c\u958b\u3057\u3066\u3044\u307e\u3059\u3002  \\n\u30d1\u30c3\u3068\u52d5\u304b\u3059\u76ee\u7684\u3067\u5834\u5f53\u305f\u308a\u7684\u306b\u6539\u5909\u3057\u3066\u3044\u308b\u7b87\u6240\u3082\u591a\u3005\u3042\u308b\u306e\u3067\u3001\u53c2\u8003\u7a0b\u5ea6\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002  \\nDocker \u30a4\u30e1\u30fc\u30b8\u306f[ks6088ts/azure-openai-playground](https://hub.docker.com/r/ks6088ts/azure-openai-playground)\u3067\u516c\u958b\u3057\u3066\u3044\u307e\u3059\u3002  \\n\u624b\u5143\u3067\u52d5\u304b\u3057\u305f\u3044\u3060\u3051\u3067\u3042\u308c\u3070\u3001Azure OpenAI Service \u306e\u30ea\u30bd\u30fc\u30b9\u3092\u6255\u3044\u51fa\u3057\u305f\u3042\u3068\u3001\u4ee5\u4e0b\u30b3\u30de\u30f3\u30c9\u3067\u30b5\u30fc\u30d3\u30b9\u306e\u52d5\u4f5c\u78ba\u8a8d\u304c\u3067\u304d\u307e\u3059\u3002\\n\\n```shell\\n# run the following command and access to localhost:3000 with your browser\\ndocker run --platform=linux/amd64 --rm \\\\\\n    -p \\"3000:3000\\" \\\\\\n    --env \\"AZURE_OPENAI_API_KEY=<YOUR API KEY>\\" \\\\\\n    --env \\"AZURE_OPENAI_NAME=<YOUR AOAI NAME>\\" \\\\\\n    --env \\"AZURE_OPENAI_DEPLOYMENT_NAME=<YOUR DEPLOYMENT NAME>\\" \\\\\\n    --env \\"AZURE_OPENAI_API_VERSION=$(AZURE_OPENAI_API_VERSION)\\" \\\\\\n    ks6088ts/azure-openai-playground:0.0.5\\n```\\n\\n### 3. App Service \u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\\n\\n2 \u3067\u5b9f\u88c5\u3057\u305f\u30a2\u30d7\u30ea\u3092\u3001Azure App Service \u3067\u516c\u958b\u3057\u307e\u3059\u3002\\n\u3053\u3053\u3067\u306f Docker Hub \u306b\u3042\u308b Docker \u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3092 App Service \u306b pull \u3057\u3066\u516c\u958b\u3059\u308b\u30b7\u30ca\u30ea\u30aa\u3068\u306a\u308a\u307e\u3059\u3002\\n\\nAzure CLI \u3067\u30b3\u30de\u30f3\u30c9\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5b9f\u884c\u3057\u3066\u3044\u304d\u307e\u3059\u3002\\n\\n```shell\\n# \u30ea\u30bd\u30fc\u30b9\u30b0\u30eb\u30fc\u30d7\u3092\u4f5c\u6210\u3059\u308b\\naz group create \\\\\\n    --name $RESOURCE_GROUP_NAME \\\\\\n    --location japaneast\\n\\n# App Service Plan \u3092\u4f5c\u6210\u3059\u308b\\naz appservice plan create \\\\\\n    --name $APP_SERVICE_PLAN_NAME \\\\\\n    --resource-group $RESOURCE_GROUP_NAME \\\\\\n    --location japaneast \\\\\\n    --sku B1 \\\\\\n    --is-linux\\n\\n# App Service \u3092\u4f5c\u6210\u3059\u308b\\naz webapp create \\\\\\n    --name $APP_SERVICE_NAME \\\\\\n    --plan $APP_SERVICE_PLAN_NAME \\\\\\n    --resource-group $RESOURCE_GROUP_NAME \\\\\\n    --deployment-container-image-name $CONTAINER_IMAGE_NAME\\n\\n# App Service \u306e\u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3059\u308b\\naz webapp config appsettings set \\\\\\n    --name $APP_SERVICE_NAME \\\\\\n    --resource-group $RESOURCE_GROUP_NAME \\\\\\n    --settings \\\\\\n        WEBSITES_PORT=3000 \\\\\\n        AZURE_OPENAI_API_KEY=$AZURE_OPENAI_API_KEY \\\\\\n        AZURE_OPENAI_NAME=$AZURE_OPENAI_NAME \\\\\\n        AZURE_OPENAI_DEPLOYMENT_NAME=$AZURE_OPENAI_DEPLOYMENT_NAME \\\\\\n        AZURE_OPENAI_API_VERSION=$AZURE_OPENAI_API_VERSION\\n\\n# \u8a2d\u5b9a\u3092\u53cd\u6620\u3055\u305b\u308b\u305f\u3081\u306b App Service \u3092\u518d\u8d77\u52d5\u3059\u308b\\naz webapp restart \\\\\\n    --name $APP_SERVICE_NAME \\\\\\n    --resource-group $RESOURCE_GROUP_NAME\\n```\\n\\n\u3053\u308c\u3067\u3001App Service \u306e URL \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001\u5148\u307b\u3069\u30ed\u30fc\u30ab\u30eb\u3067\u52d5\u304b\u3057\u305f\u3068\u304d\u3068\u540c\u3058\u3088\u3046\u306b\u52d5\u4f5c\u3059\u308b\u306f\u305a\u3067\u3059\u3002\\n\\n### 4. App Service \u3067\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b Web \u30a2\u30d7\u30ea\u306b\u8a8d\u8a3c\u3092\u8ffd\u52a0\u3059\u308b\\n\\nWeb \u30a2\u30d7\u30ea\u306b\u8a8d\u8a3c\u6a5f\u80fd\u3092\u7d44\u307f\u8fbc\u3080\u306e\u306f\u7d50\u69cb\u624b\u9593\u3067\u3059\u3002App Service \u3067\u306f\u7d44\u307f\u8fbc\u307f\u306e\u8a8d\u8a3c(=EasyAuth)\u3068\u627f\u8a8d\u304c\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3001Web \u30a2\u30d7\u30ea\u3067\u30b3\u30fc\u30c9\u3092\u307e\u3063\u305f\u304f\u8a18\u8ff0\u305b\u305a\u306b\u30e6\u30fc\u30b6\u30fc\u3092\u30b5\u30a4\u30f3\u30a4\u30f3\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002  \\n\u624b\u9806\u306f[\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb: Azure App Service \u3067\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b Web \u30a2\u30d7\u30ea\u306b\u30a2\u30d7\u30ea\u306e\u8a8d\u8a3c\u3092\u8ffd\u52a0\u3059\u308b](https://learn.microsoft.com/ja-jp/azure/app-service/scenario-secure-app-authentication-app-service)\u3092\u53c2\u7167\u304f\u3060\u3055\u3044\u3002  \\nAzure Portal \u304b\u3089 `AppService > Authentication > Add identity provider` \u3068\u8fbf\u3063\u3066\u6240\u671b\u306e\u8a8d\u8a3c\u30d7\u30ed\u30d0\u30a4\u30c0\u3092\u8ffd\u52a0\u3059\u308b\u3060\u3051\u3067\u3059\u3002\u8a8d\u8a3c\u30d7\u30ed\u30d0\u30a4\u30c0\u3082\u4e3b\u8981\u306a\u3082\u306e\u306f\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u304a\u308a\u7c21\u5358\u306b\u8a8d\u8a3c\u6a5f\u80fd\u3092\u8ffd\u52a0\u3067\u304d\u307e\u3059\u3002\\n\\n### 5. \u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3059\u308b\\n\\nAzure Virtual Network (VNet)\u7d4c\u7531\u306e\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u63a5\u7d9a\u306b\u9650\u5b9a\u3057\u3066 Azure OpenAI Service \u3092\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\\n\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u7d4c\u7531\u3067\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u306b\u9650\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001\u4e07\u304c\u4e00 API Key \u304c\u6f0f\u308c\u305f\u3068\u3057\u3066\u3082\u5916\u90e8\u304b\u3089\u306e\u30ea\u30bd\u30fc\u30b9\u306e\u4e0d\u6b63\u5229\u7528\u3092\u9632\u3050\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002  \\n\u624b\u9806\u306f[Azure OpenAI\u306b\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\uff08Private Endpoint\uff09\u3092\u8a2d\u5b9a\u3057\u3066\u6771\u65e5\u672c\u30ea\u30fc\u30b8\u30e7\u30f3\u306e\u4eee\u60f3\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u307f\u304b\u3089\u4f7f\u3046](https://blog.jbs.co.jp/entry/2023/04/07/173940)\u3092\u53c2\u7167\u304f\u3060\u3055\u3044\u3002\u8a18\u4e8b\u306b\u5f93\u3063\u3066\u3001Azure Portal \u304b\u3089\u4ee5\u4e0b\u306e\u64cd\u4f5c\u3092\u5b9f\u65bd\u3059\u308b\u3068\u3001\u78ba\u304b\u306b\u671f\u5f85\u901a\u308a Azure OpenAI Playground \u304b\u3089 API \u304c\u547c\u3073\u51fa\u305b\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\u3002\\n\\n- `Azure OpenAI > Networking > Firewalls and virtual networks > Disabled` \u306b\u8a2d\u5b9a\u3057\u3001Private Endpoint \u3092\u6709\u52b9\u5316\u3059\u308b\\n- `Azure OpenAI > Networking > Private endpoint connections > + Private endpoint` \u304b\u3089 Private Endpoint \u3092\u4f5c\u6210\u3059\u308b\\n\\n\u306a\u304a\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5468\u308a\u306e\u8a2d\u5b9a\u306f\u5373\u6642\u53cd\u6620\u3067\u306f\u7121\u3044\u306e\u3067\u5c11\u3057\u5f85\u3063\u3066\u304b\u3089\u78ba\u8a8d\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u6025\u3044\u3067\u78ba\u8a8d\u3057\u305f\u3089\u53cd\u6620\u3055\u308c\u3066\u3044\u306a\u304f\u3066\u30cf\u30de\u308a\u307e\u3057\u305f\u3002  \\n\u6c17\u306b\u306a\u3063\u3066 API \u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u4e2d\u8eab\u3082\u78ba\u8a8d\u3057\u305f\u304b\u3063\u305f\u306e\u3067 curl \u3067\u76f4\u63a5 REST API \u3092\u53e9\u3044\u3066\u307f\u307e\u3057\u305f\u3002\\n\\n```shell\\ncurl \\"https://${AOAI_NAME}.openai.azure.com/openai/deployments/${MODEL_NAME}/completions?api-version=2022-12-01\\" \\\\\\n  -H \'api-key: your-api-key\' \\\\\\n  -H \'content-type: application/json\' \\\\\\n  --data-raw \'{\\"prompt\\":\\"Write a product launch email for new AI-powered headphones that are priced at $79.99 and available at Best Buy, Target and Amazon.com. The target audience is tech-savvy music lovers and the tone is friendly and exciting.\\\\n\\\\n1. What should be the subject line of the email?  \\\\n2. What should be the body of the email?\\",\\"temperature\\":1,\\"top_p\\":1,\\"frequency_penalty\\":0,\\"presence_penalty\\":0,\\"max_tokens\\":350,\\"stop\\":null,\\"stream\\":true}\' \\\\\\n  --compressed -vvvv\\n```\\n\\n\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u4e2d\u306b\u306f\u4ee5\u4e0b\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3082\u3042\u308a\u307e\u3057\u305f\u306e\u3067\u3001Private Endpoint \u304c\u78ba\u304b\u306b\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u305d\u3046\u3067\u3059\u3002\\n\\n- `policy-id: ThrowExceptionDueToTrafficDenied`\\n- `{\\"error\\":{\\"code\\":\\"AccessDenied\\",\\"message\\": \\"Public access is disabled. Please configure private endpoint.\\"}}`\\n\\n### 6. App Service \u306e VNET \u7d71\u5408\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3059\u308b\\n\\nApp Service \u306e Outbound \u901a\u4fe1\u8a2d\u5b9a\u3067 VNet \u7d71\u5408\u3092\u6709\u52b9\u5316\u3057\u3001App Service \u304b\u3089\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3092 VNet \u7d4c\u7531\u3067 Azure OpenAI Service \u306b\u9001\u4fe1\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\\n[\u3010Azure\u3011App Service\u306eVNet\u7d71\u5408\u3068\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30ea\u30f3\u30af\u3092\u5229\u7528\u3057\u305f\u901a\u4fe1\u9589\u57df\u5316](https://techblog.ap-com.co.jp/entry/2021/03/12/150117)\u3092\u53c2\u8003\u306b\u3001`AppService > Networking > Outbound Traffic > VNet integration > + Add VNet` \u304b\u3089 VNet \u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\\n\\n\\n## \u307e\u3068\u3081\\n\\n\u3053\u3053\u307e\u3067\u306e\u624b\u9806\u3092\u5b9f\u884c\u3057\u3066\u3001\u4ee5\u4e0b\u306e\u52d5\u4f5c\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\u3002\\n\\n- \u672a\u8a8d\u8a3c\u30e6\u30fc\u30b6\u30fc\u306f\u6240\u5b9a\u306e\u8a8d\u8a3c\u30d7\u30ed\u30d0\u30a4\u30c0\u306e\u8a8d\u8a3c\u753b\u9762\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3055\u308c\u308b\\n- \u8a8d\u8a3c\u306b\u6210\u529f\u3059\u308b\u3068\u3001Web \u30a2\u30d7\u30ea\u306e\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u308b\\n- \u30c1\u30e3\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u304b\u3089\u9001\u4fe1\u3057\u305f\u6587\u7ae0\u306b\u5bfe\u3057\u3066 Azure OpenAI Service \u304c\u5fdc\u7b54\u3059\u308b\\n- Azure OpenAI Playground \u304b\u3089 API \u3092\u53e9\u304f\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308b\\n\\n\u672c\u8a18\u4e8b\u3067\u306f\u3001Azure OpenAI Service \u3092 App Service \u304b\u3089\u5229\u7528\u3059\u308b\u305f\u3081\u306e\u624b\u9806\u3092\u307e\u3068\u3081\u307e\u3057\u305f\u3002\\nApp Service \u306e\u7d44\u307f\u8fbc\u307f\u8a8d\u8a3c\u3084\u3001Vnet \u7d71\u5408\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u624b\u9593\u3092\u639b\u3051\u308b\u3053\u3068\u306a\u304f Azure OpenAI Service \u3092\u5b89\u5168\u306b\u5229\u7528\u3059\u308b\u74b0\u5883\u3092\u69cb\u7bc9\u3067\u304d\u307e\u3057\u305f\u3002"},{"id":"fork-azure-openai-playground-en","metadata":{"permalink":"/blog/fork-azure-openai-playground-en","source":"@site/blog/2023-05-01-fork-azure-openai-playground.en/index.md","title":"Building a ChatGPT trial environment using Azure OpenAI Service","description":"* This article is translated from Azure OpenAI Service \u3092\u5229\u7528\u3057\u305f ChatGPT \u304a\u8a66\u3057\u74b0\u5883\u306e\u69cb\u7bc9","date":"2023-05-01T00:00:00.000Z","tags":[{"inline":true,"label":"azure","permalink":"/blog/tags/azure"},{"inline":true,"label":"azure-ad","permalink":"/blog/tags/azure-ad"},{"inline":true,"label":"azure-openai-service","permalink":"/blog/tags/azure-openai-service"},{"inline":true,"label":"app-service","permalink":"/blog/tags/app-service"}],"readingTime":7.42,"hasTruncateMarker":true,"authors":[{"name":"ks6088ts","title":"Software Engineer / Solutions Architect","url":"https://github.com/ks6088ts","imageURL":"https://github.com/ks6088ts.png","key":"ks6088ts","page":null}],"frontMatter":{"slug":"fork-azure-openai-playground-en","title":"Building a ChatGPT trial environment using Azure OpenAI Service","authors":"ks6088ts","tags":["azure","azure-ad","azure-openai-service","app-service"]},"unlisted":false,"prevItem":{"title":"Azure OpenAI Service \u3092\u5229\u7528\u3057\u305f ChatGPT \u304a\u8a66\u3057\u74b0\u5883\u306e\u69cb\u7bc9","permalink":"/blog/fork-azure-openai-playground"},"nextItem":{"title":"PowerShell \u958b\u767a\u5165\u9580","permalink":"/blog/powershell-get-started"}},"content":"* This article is translated from [Azure OpenAI Service \u3092\u5229\u7528\u3057\u305f ChatGPT \u304a\u8a66\u3057\u74b0\u5883\u306e\u69cb\u7bc9](/blog/fork-azure-openai-playground)\\n\\n---\\n\\nWe have created a trial environment for ChatGPT using Azure OpenAI Service.  \\nBoth OpenAI and Azure OpenAI Service already have easy-to-use web apps for experiencing ChatGPT, and all you need is a browser and an account to try it out.\\n\\n- OpenAI: [ChatGPT Web App](https://chat.openai.com/), [Playground](https://platform.openai.com/playground)\\n- Azure: [Azure OpenAI Studio](https://oai.azure.com/portal)\\n\\nFrom the perspective of a personal trial, just using these web applications is sufficient.  \\nHowever, when considering the use case of trial use within a wide range of organizations with a view to business application, various issues arise.\\n\\nFor example, if you simply obtain an API Token and use it in a direct way, you cannot prevent unauthorized use when the API Token is leaked. Also, if you want to limit users to members of your organization, you will need to authenticate them in some way. If you tackle these issues from scratch, you will have less time to spend on the trial of ChatGPT, which is the original purpose of this project.\\n\\nTherefore, this article introduces how to build a trial environment for OpenAI API using Azure OpenAI Service with sample code, with a view to using OpenAI API for business PoC.\\n\\n\x3c!--truncate--\x3e\\n\\n## Overview\\n\\nThe following diagram shows the architecture of the trial environment we will build.\\n\\n![architecture](../2023-05-01-fork-azure-openai-playground/architecture.png)\\n\\n## Hands on\\n\\nThe following steps are required to build the trial environment.\\n\\n---\\n1. Create Azure OpenAI Service resource\\n2. Develop a Chat app\\n3. Deploy to App Service\\n4. Add authentication to the web app running on App Service\\n5. Add private endpoint settings\\n6. Add VNET integration settings for App Service\\n---\\n\\nThe following sections will walk you through these steps.\\nWhen you are done, go to the App Service URL and try ChatGPT.\\n\\n### 1. Create Azure OpenAI Service resource\\n\\nSee [Create a resource and deploy a model using Azure OpenAI\\n](https://learn.microsoft.com/en-us/azure/cognitive-services/openai/how-to/create-resource?pivots=cli) to create Azure OpenAI Service resource.\\n\\nThe `Azure OpenAI resource name`, `deployed model name`, and `API key` will be used later.\\n\\n### 2. Develop a Chat app\\n\\nThere are many necessary UI components such as chat forms for OpenAI and parameter setting UI for Playground, and writing a front-end app from scratch will take a lot of time.  \\nSince the implementation of a front-end app is not our goal, we will look for a good OSS to achieve our goal in the shortest time possible.\\n\\nI sorted by Star count on GitHub and scoured some OSS, and could not find the exact app that uses the Azure OpenAI Service, but I did find [Nashex/gpt4-playground](https://github.com/Nashex/gpt4-playground), an OSS clone of OpenAI\'s Playground.\\n\\nThere is a demo site ([GPT-4 Playground](https://www.gpt4-playground.com/)), and it seems to be almost in line with the purpose of this project, except that it uses OpenAI\'s API.  \\n\\nIf we fork this OSS and modify the code that calls OpenAI API to use Azure OpenAI Service, it should work easily.  \\nThe following code is applicable.\\n\\n```typescript title=\\"gpt4-playground/src/utils/OpenAI/OpenAI.ts\\"\\n  const response = await fetch(\\"https://api.openai.com/v1/chat/completions\\", {\\n    headers: {\\n      Authorization: `Bearer ${token}`,\\n      \\"Content-Type\\": \\"application/json\\",\\n    },\\n    method: \\"POST\\",\\n    body: JSON.stringify(payload),\\n  });\\n```\\n\\nBy rewriting the `Authorization` in the fetch destination url and request header to `api-key`, the same functionality worked with Azure OpenAI Service.  \\n\\nSince I planned to deploy a Docker image in the final stage, I used environment variables to set confidential information such as `API KEY` and resource names from the outside. [Next.js / Environment Variables\\n](https://nextjs.org/docs/basic-features/environment-variables).\\n\\nAfter confirming that it works in the local environment, write a Dockerfile to containerize it and push it to Docker Hub.\\n\\nWhen creating the image, production build for the Next.js app should be applied and place the artifact into the image.\\n\\nThe source code of the forked and modified application is available at [ks6088ts-labs/azure-openai-playground](https://github.com/ks6088ts-labs/azure-openai-playground).  \\n\\nPlease note that many parts of the source code have been modified in an ad-hoc manner for the purpose of quick implementation, so please use it only as a reference.  \\n\\nDocker images are available at [ks6088ts/azure-openai-playground](https://hub.docker.com/r/ks6088ts/azure-openai-playground).  \\n\\nIf you just want to run the service in local environment, you can check the service operation with the following command\\n\\n```shell\\n# run the following command and access to localhost:3000 with your browser\\ndocker run --platform=linux/amd64 --rm \\\\\\n    -p \\"3000:3000\\" \\\\\\n    --env \\"AZURE_OPENAI_API_KEY=<YOUR API KEY>\\" \\\\\\n    --env \\"AZURE_OPENAI_NAME=<YOUR AOAI NAME>\\" \\\\\\n    --env \\"AZURE_OPENAI_DEPLOYMENT_NAME=<YOUR DEPLOYMENT NAME>\\" \\\\\\n    --env \\"AZURE_OPENAI_API_VERSION=$(AZURE_OPENAI_API_VERSION)\\" \\\\\\n    ks6088ts/azure-openai-playground:0.0.5\\n```\\n\\n### 3. Deploy to App Service\\n\\nThe app implemented in step 2 will be published on the Azure App Service.\\nIn this scenario, the Docker container image in the Docker Hub will be pulled and published to the App Service.\\n\\nExecute the following commands in the Azure CLI.\\n\\n```shell\\n# create resource group\\naz group create \\\\\\n    --name $RESOURCE_GROUP_NAME \\\\\\n    --location japaneast\\n\\n# create App Service Plan\\naz appservice plan create \\\\\\n    --name $APP_SERVICE_PLAN_NAME \\\\\\n    --resource-group $RESOURCE_GROUP_NAME \\\\\\n    --location japaneast \\\\\\n    --sku B1 \\\\\\n    --is-linux\\n\\n# create App Service\\naz webapp create \\\\\\n    --name $APP_SERVICE_NAME \\\\\\n    --plan $APP_SERVICE_PLAN_NAME \\\\\\n    --resource-group $RESOURCE_GROUP_NAME \\\\\\n    --deployment-container-image-name $CONTAINER_IMAGE_NAME\\n\\n# set environment variables for App Service\\naz webapp config appsettings set \\\\\\n    --name $APP_SERVICE_NAME \\\\\\n    --resource-group $RESOURCE_GROUP_NAME \\\\\\n    --settings \\\\\\n        WEBSITES_PORT=3000 \\\\\\n        AZURE_OPENAI_API_KEY=$AZURE_OPENAI_API_KEY \\\\\\n        AZURE_OPENAI_NAME=$AZURE_OPENAI_NAME \\\\\\n        AZURE_OPENAI_DEPLOYMENT_NAME=$AZURE_OPENAI_DEPLOYMENT_NAME \\\\\\n        AZURE_OPENAI_API_VERSION=$AZURE_OPENAI_API_VERSION\\n\\n# restart App Service to reflect the environment variables\\naz webapp restart \\\\\\n    --name $APP_SERVICE_NAME \\\\\\n    --resource-group $RESOURCE_GROUP_NAME\\n```\\n\\nNow, when you access the App Service URL, it should work the same way it did when you ran it locally earlier.\\n\\n### 4. Add authentication to the web app running on App Service\\n\\nSince the App Service supports built-in authentication (=EasyAuth) and authorization, you can have users sign in without writing any code in your web app.  \\nFor instructions, see [Tutorial: Add app authentication to your web app running on Azure App Service](https://learn.microsoft.com/en-us/azure/app-service/scenario-secure-app-authentication-app-service).  \\nSimply follow `AppService > Authentication > Add identity provider` from the Azure Portal to add the desired authentication provider. The major authentication providers are supported, so it is easy to add authentication functionality.\\n\\n### 5. Add private endpoint settings\\n\\nConfigure Azure OpenAI Service to be available only for private network connections via Azure Virtual Network (VNet).\\nBy limiting requests to those made via the private network, you can prevent unauthorized use of resources from outside, even in the unlikely event that the API Key is leaked.  \\nFor instructions, please refer to [Azure OpenAI\u306b\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\uff08Private Endpoint\uff09\u3092\u8a2d\u5b9a\u3057\u3066\u6771\u65e5\u672c\u30ea\u30fc\u30b8\u30e7\u30f3\u306e\u4eee\u60f3\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u307f\u304b\u3089\u4f7f\u3046](https://blog.jbs.co.jp/entry/2023/04/07/173940) (*This article is in Japanese, unfortunately).\\nFollowing the article, I performed the following operation from Azure Portal and confirmed that the API cannot be called from Azure OpenAI Playground, as expected.\\n\\n- Check `Azure OpenAI > Networking > Firewalls and virtual networks > Disabled` and then activate Private Endpoint\\n- Create Private Endpoint from `Azure OpenAI > Networking > Private endpoint connections > + Private endpoint`\\n\\nNote that the network settings are not immediately reflected, so you need to wait a bit before checking. When I hurriedly checked, it was not reflected and I got stuck...  \\nTo confirm content of the API response, you can simply use `curl` to call the REST API.\\n\\n```shell\\ncurl \\"https://${AOAI_NAME}.openai.azure.com/openai/deployments/${MODEL_NAME}/completions?api-version=2022-12-01\\" \\\\\\n  -H \'api-key: your-api-key\' \\\\\\n  -H \'content-type: application/json\' \\\\\\n  --data-raw \'{\\"prompt\\":\\"Write a product launch email for new AI-powered headphones that are priced at $79.99 and available at Best Buy, Target and Amazon.com. The target audience is tech-savvy music lovers and the tone is friendly and exciting.\\\\n\\\\n1. What should be the subject line of the email?  \\\\n2. What should be the body of the email?\\",\\"temperature\\":1,\\"top_p\\":1,\\"frequency_penalty\\":0,\\"presence_penalty\\":0,\\"max_tokens\\":350,\\"stop\\":null,\\"stream\\":true}\' \\\\\\n  --compressed -vvvv\\n```\\n\\nIt seems that Private Endpoint is indeed enabled, since the following parameters were also found in the response.\\n\\n- `policy-id: ThrowExceptionDueToTrafficDenied`\\n- `{\\"error\\":{\\"code\\":\\"AccessDenied\\",\\"message\\": \\"Public access is disabled. Please configure private endpoint.\\"}}`\\n\\n### 6. Add VNet integration settings for App Service\\n\\nEnable VNet integration in the Outbound communication settings of the App Service and configure it to send requests from the App Service to the Azure OpenAI Service via VNet.\\nRefer to [\u3010Azure\u3011App Service\u306eVNet\u7d71\u5408\u3068\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30ea\u30f3\u30af\u3092\u5229\u7528\u3057\u305f\u901a\u4fe1\u9589\u57df\u5316](https://techblog.ap-com.co.jp/entry/2021/03/12/150117)(*This article is in Japanese, unfortunately) and set `AppService > Networking > Outbound Traffic > VNet integration > + Add VNet` to add VNet.\\n\\n## Summary\\n\\nAfter following the steps described in the article, the following behavior has been confirmed\\n\\n- Unauthenticated users are redirected to the authentication screen of the given authentication provider\\n- Upon successful authentication, users can access to the web app\\n- Azure OpenAI Service responds to the text sent from the chat form\\n- API requests failed from Azure OpenAI Playground, which is outside the VNet\\n\\nThis article summarizes the steps to use Azure OpenAI Service from the App Service.\\nBy using the App Service\'s built-in authentication and Vnet integration, we were able to build a secure environment to use Azure OpenAI Service without any hassle."},{"id":"powershell-get-started","metadata":{"permalink":"/blog/powershell-get-started","source":"@site/blog/2023-03-24-powershell-get-started.md","title":"PowerShell \u958b\u767a\u5165\u9580","description":"PowerShell \u30b9\u30af\u30ea\u30d7\u30c8\u306e\u958b\u767a\u5165\u9580\u306b\u4fbf\u5229\u3060\u3068\u601d\u3063\u305f\u30c4\u30fc\u30eb\u3084\u60c5\u5831\u3092\u307e\u3068\u3081\u307e\u3059\u3002","date":"2023-03-24T00:00:00.000Z","tags":[{"inline":true,"label":"powershell","permalink":"/blog/tags/powershell"}],"readingTime":2.115,"hasTruncateMarker":true,"authors":[{"name":"ks6088ts","title":"Software Engineer / Solutions Architect","url":"https://github.com/ks6088ts","imageURL":"https://github.com/ks6088ts.png","key":"ks6088ts","page":null}],"frontMatter":{"slug":"powershell-get-started","title":"PowerShell \u958b\u767a\u5165\u9580","authors":"ks6088ts","tags":["powershell"]},"unlisted":false,"prevItem":{"title":"Building a ChatGPT trial environment using Azure OpenAI Service","permalink":"/blog/fork-azure-openai-playground-en"},"nextItem":{"title":"Azure IoT Edge \u3092\u7528\u3044\u305f\u30cf\u30f3\u30ba\u30aa\u30f3","permalink":"/blog/handson-iot-edge"}},"content":"PowerShell \u30b9\u30af\u30ea\u30d7\u30c8\u306e\u958b\u767a\u5165\u9580\u306b\u4fbf\u5229\u3060\u3068\u601d\u3063\u305f\u30c4\u30fc\u30eb\u3084\u60c5\u5831\u3092\u307e\u3068\u3081\u307e\u3059\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## \u30a8\u30c7\u30a3\u30bf\\n\\n- [VS Code extension / PowerShell](https://marketplace.visualstudio.com/items?itemName=ms-vscode.PowerShell): Syntax highlighting, intellisense, LSP \u30b5\u30dd\u30fc\u30c8\u306a\u3069\u304c\u3042\u308a\u4fbf\u5229\\n\\n## \u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8\\n\\n- [Pester / Quick Start](https://pester.dev/docs/quick-start/): \u30c6\u30b9\u30c8\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\\n\\n## Docker\\n\\n- [mcr.microsoft.com/powershell](https://mcr.microsoft.com/en-us/product/powershell/about): PowerShell \u306e Docker \u30a4\u30e1\u30fc\u30b8\u3002\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u5ec3\u6b62\u306b\u4f34\u3046\u79fb\u884c\u4f5c\u696d\u3084\u30c6\u30b9\u30c8\u306a\u3069\u3001\u9694\u96e2\u3055\u308c\u305f\u74b0\u5883\u3067\u306e\u5b9f\u884c\u304c\u5fc5\u8981\u306a\u5834\u5408\u306b\u4fbf\u5229\\n\\n## \u30e9\u30a4\u30d6\u30e9\u30ea\\n\\n- [microsoftgraph/msgraph-sdk-powershell](https://github.com/microsoftgraph/msgraph-sdk-powershell)\\n  - Microsoft Graph API \u3092 PowerShell \u304b\u3089\u53e9\u304f\u3068\u304d\u306b\u4f7f\u3046\\n  - \u53c2\u8003\u30ea\u30f3\u30af\\n    - [Authentication module cmdlets in Microsoft Graph PowerShell](https://learn.microsoft.com/ja-jp/powershell/microsoftgraph/authentication-commands?view=graph-powershell-1.0)\\n    - [Microsoft Graph REST API v1.0 \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8 \u30ea\u30d5\u30a1\u30ec\u30f3\u30b9](https://learn.microsoft.com/ja-jp/graph/api/overview?view=graph-rest-1.0)\\n\\n## \u30b9\u30cb\u30da\u30c3\u30c8\\n\\n\u3057\u3087\u3063\u3061\u3085\u3046\u6587\u6cd5\u3092\u5fd8\u308c\u3066\u540c\u3058\u3053\u3068\u3092\u7e70\u308a\u8fd4\u3059\u306e\u3067\u3001\u30b9\u30cb\u30da\u30c3\u30c8\u3092\u4f5c\u6210\u3057\u3066\u304a\u304f\u3002\\n\\n### \u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u4e00\u62ec\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\\n\\n```powershell title=\\"install-modules.ps1\\"\\n#!/usr/bin/env pwsh\\n\\nWrite-Host \\"Running \\"$MyInvocation.MyCommand.Name\\" ...\\"\\n\\nSet-PSRepository -Name \'PSGallery\' -InstallationPolicy Trusted\\n\\n$modules = @(\\n    \\"Microsoft.Graph\\"\\n    \\"MicrosoftTeams\\"\\n    \\"Pester\\"\\n)\\n\\nforeach ($module in $modules) {\\n    Write-Host \\"Installing $module\\"\\n    Install-Module -Name $module -Scope CurrentUser\\n}\\n```\\n\\n### PowerShell module \u306e\u4f5c\u6210\u3068\u5229\u7528\\n\\n#### PowerShell \u30e2\u30b8\u30e5\u30fc\u30eb\\n\\n```powershell title=\\"mymodule.psm1\\"\\n$global:MyModuleVersion = \\"v0.0.1\\"\\n\\nfunction Get-MyName {\\n    return \\"Hello-World\\"\\n}\\n\\n# Export variables\\nExport-ModuleMember -Variable MyModuleVersion\\n\\n# Export functions\\nExport-ModuleMember -Function Get-MyName\\n```\\n\\n#### PowerShell \u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u5229\u7528\\n\\n```powershell title=\\"client.ps1\\"\\nusing module \\"./mymodule.psm1\\"\\n\\nparam (\\n    [parameter(mandatory=$true)][string]$Hello,\\n    [parameter(mandatory=$true)][string]$World)\\n\\n$name = Get-MyName\\n\\nWrite-Host $name, $MyModuleVersion\\nWrite-Host Args: $Hello, $World\\n```\\n\\n#### \u5b9f\u884c\\n\\n```powershell\\n./client.ps1 -Hello Hello -World World\\n>>>\\nHello-World v0.0.1\\nArgs: Hello World\\n```\\n\\n### \u30c6\u30b9\u30c8\\n\\n#### \u30c6\u30b9\u30c8\u30b9\u30af\u30ea\u30d7\u30c8\\n```powershell title=\\"mymodule.test.ps1\\"\\nusing module \\"./mymodule.psm1\\"\\n\\nDescribe \\"Smoke test\\" {\\n    Context \\"Nominal case\\" {\\n        It \\"Check global variables\\" {\\n            # version variable settings\\n            $MyModuleVersion | Should Be \\"v0.0.1\\"\\n        }\\n        It \\"Connect-Helper\\" {\\n            Get-MyName | Should Be \\"Hello-World\\"\\n        }\\n    }\\n}\\n```\\n\\n#### \u30c6\u30b9\u30c8\u306e\u5b9f\u884c\\n\\n```powershell\\nInvoke-Pester ./mymodule.test.ps1\\n>>>\\nDescribing Smoke test\\n   Context Nominal case\\n    [+] Check global variables 495ms\\n    [+] Connect-Helper 72ms\\nTests completed in 568ms\\nPassed: 2 Failed: 0 Skipped: 0 Pending: 0 Inconclusive: 0\\n```\\n\\n### HTTP \u30ea\u30af\u30a8\u30b9\u30c8\u306e\u767a\u884c\\n\\n#### Microsoft Graph API \u306e\u547c\u3073\u51fa\u3057\u4f8b\\n\\n```powershell title=\\"httpRequest.ps1\\"\\nparam (\\n    [parameter(mandatory=$true)][string]$TenantId,\\n    [parameter(mandatory=$true)][string]$ClientId,\\n    [parameter(mandatory=$true)][string]$ClientSecret,\\n    [parameter(mandatory=$true)][string]$Csv)\\n\\n# -- Token \u3092\u53d6\u5f97\u3059\u308b --\\n$token = Invoke-RestMethod -Method Post -Uri \\"https://login.microsoftonline.com/$tenantId/oauth2/v2.0/token\\" -Body @{client_id=\\"$clientId\\";scope=\\"https://graph.microsoft.com/.default\\";client_secret=\\"$clientSecret\\";grant_type=\\"client_credentials\\"} -ContentType \'application/x-www-form-urlencoded\'\\n$accessToken = $token.access_token\\n```\\n\\n#### \u5b9f\u884c\u4f8b\\n\\n```powershell\\n./httpRequest.ps1 -TenantId 789 -ClientId 566 -ClientSecret 444 \\n```"},{"id":"handson-iot-edge","metadata":{"permalink":"/blog/handson-iot-edge","source":"@site/blog/2023-03-22-handson-iot-edge.md","title":"Azure IoT Edge \u3092\u7528\u3044\u305f\u30cf\u30f3\u30ba\u30aa\u30f3","description":"Azure IoT Edge \u3092\u4f7f\u3063\u305f\u30cf\u30f3\u30ba\u30aa\u30f3\u3092\u3057\u307e\u3057\u305f\u3002","date":"2023-03-22T00:00:00.000Z","tags":[{"inline":true,"label":"azure","permalink":"/blog/tags/azure"},{"inline":true,"label":"iot-edge","permalink":"/blog/tags/iot-edge"}],"readingTime":4.21,"hasTruncateMarker":true,"authors":[{"name":"ks6088ts","title":"Software Engineer / Solutions Architect","url":"https://github.com/ks6088ts","imageURL":"https://github.com/ks6088ts.png","key":"ks6088ts","page":null}],"frontMatter":{"slug":"handson-iot-edge","title":"Azure IoT Edge \u3092\u7528\u3044\u305f\u30cf\u30f3\u30ba\u30aa\u30f3","authors":"ks6088ts","tags":["azure","iot-edge"]},"unlisted":false,"prevItem":{"title":"PowerShell \u958b\u767a\u5165\u9580","permalink":"/blog/powershell-get-started"},"nextItem":{"title":"textlint \u3092\u6709\u52b9\u5316\u3059\u308b","permalink":"/blog/how-to-apply-textlint"}},"content":"Azure IoT Edge \u3092\u4f7f\u3063\u305f\u30cf\u30f3\u30ba\u30aa\u30f3\u3092\u3057\u307e\u3057\u305f\u3002\\n\u57fa\u790e\u7684\u306a\u691c\u8a3c\u306b\u5fc5\u8981\u306a\u60c5\u5831\u306e\u30ea\u30f3\u30af\u3092\u307e\u3068\u3081\u307e\u3059\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n# \u958b\u767a\u74b0\u5883\u306e\u69cb\u7bc9\\n\\n## Prerequisites\\n\\n- Docker\\n- Visual Studio Code\\n- Azure\\n- Azure CLI\\n\\n## Azure \u30ea\u30bd\u30fc\u30b9\u69cb\u7bc9\\n\\n### Azure CLI\\n\\n\u30b5\u30fc\u30d3\u30b9\u5074\u306e\u30ea\u30bd\u30fc\u30b9\u3068\u3057\u3066\u3001Azure IoT Hub, Azure Container Registry \u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\\n\\n```shell\\n# Parameters\\nLOCATION=\\"japaneast\\"\\nRESOURCE_GROUP_NAME=\\"handson_iotedge\\"\\nIOTHUB_NAME=\\"iothub0322\\"\\nCONTAINER_REGISTRY_NAME=\\"acr0322\\"\\nDEVICE_ID=\\"myEdgeDevice\\"\\n\\n# create resource group\\naz group create \\\\\\n    --name $RESOURCE_GROUP_NAME \\\\\\n    --location $LOCATION\\n\\n# create Azure IoT Hub\\naz iot hub create \\\\\\n    --resource-group $RESOURCE_GROUP_NAME \\\\\\n    --name $IOTHUB_NAME \\\\\\n    --sku F1 \\\\\\n    --partition-count 2\\n\\n# create device identity in IoT Hub\\naz iot hub device-identity create \\\\\\n    --device-id $DEVICE_ID \\\\\\n    --edge-enabled \\\\\\n    --hub-name $IOTHUB_NAME\\n\\n# create Azure Container Registry\\n# ref. https://learn.microsoft.com/ja-jp/azure/container-registry/container-registry-get-started-azure-cli#create-a-container-registry\\naz acr create \\\\\\n    --resource-group $RESOURCE_GROUP_NAME \\\\\\n    --name $CONTAINER_REGISTRY_NAME \\\\\\n    --sku Basic \\\\\\n    --admin-enabled true\\n\\n# copy connection string for creating VM later.\\nCONNECTION_STRING=$(az iot hub device-identity connection-string show --device-id $DEVICE_ID --hub-name $IOTHUB_NAME -o tsv)\\n```\\n\\n\u30a8\u30c3\u30b8\u5074\u306e\u30ea\u30bd\u30fc\u30b9\u3068\u3057\u3066\u3001\u4eee\u60f3\u30de\u30b7\u30f3\u4e0a\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30c7\u30d7\u30ed\u30a4\u3057\u307e\u3059\u3002  \\nAzure IoT Edge \u306b\u3088\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30c7\u30d7\u30ed\u30a4\u3067\u306f\u3001\u30a8\u30c3\u30b8\u5074\u306b\u30b3\u30f3\u30c6\u30ca\u30e9\u30f3\u30bf\u30a4\u30e0\u3084\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002  \\n[\u30af\u30a4\u30c3\u30af \u30b9\u30bf\u30fc\u30c8:\u521d\u3081\u3066\u306e IoT Edge \u30e2\u30b8\u30e5\u30fc\u30eb\u3092 Linux \u4eee\u60f3\u30c7\u30d0\u30a4\u30b9\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b](https://learn.microsoft.com/ja-jp/azure/iot-edge/quickstart-linux?view=iotedge-1.4#deploy-the-iot-edge-device)\u3092\u53c2\u8003\u306b ARM \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u5229\u7528\u3057\u3066\u3001\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u30c7\u30d7\u30ed\u30a4\u3057\u307e\u3059\u3002\\n\\n```shell\\n# Parameters\\nLOCATION=\\"japaneast\\"\\nRESOURCE_GROUP_NAME=\\"handson_iotedge_device\\"\\n\\n# create resource group\\naz group create \\\\\\n    --name $RESOURCE_GROUP_NAME \\\\\\n    --location $LOCATION\\n\\n# create VM instance via Azure Portal\\n#   1. Go to `Deploy a custom template` at Azure Portal\\n#   2. Go to `Build your own template in the editor` to paste template at `https://raw.githubusercontent.com/Azure/iotedge-vm-deploy/1.4/edgeDeploy.json`\\n#   3. Fill in the parameters and create VM\\n```\\n\\n\u4eee\u60f3\u30de\u30b7\u30f3\u4e0a\u3067\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b `iotedge` \u30b3\u30de\u30f3\u30c9\u3092\u7528\u3044\u3066\u72b6\u614b\u306e\u78ba\u8a8d\u304c\u3067\u304d\u307e\u3059\u3002\\n\\n```shell\\n# login to VM via SSH with the password specified above\\nssh adminUser@\\"$VM_NAME.$LOCATION\\".cloudapp.azure.com\\n\\nsudo iotedge -h\\nsudo iotedge system status\\nsudo iotedge system logs\\nsudo iotedge list\\nsudo iotedge logs <module> -f\\n```\\n\\n### Terraform\\n\\nWIP\\n\\n# \u958b\u767a\\n\\n## IoT Edge Module \u958b\u767a\\n\\nIoT Edge Module \u3068\u3057\u3066\u30a8\u30c3\u30b8\u306b\u914d\u4fe1\u3059\u308b\u305f\u3081\u306e Docker \u30a4\u30e1\u30fc\u30b8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002Visual Studio Code \u62e1\u5f35\u6a5f\u80fd\u3092\u5165\u308c\u3066 GUI \u64cd\u4f5c\u3067\u7c21\u5358\u306b\u30c7\u30d7\u30ed\u30a4\u3067\u304d\u307e\u3059\u3002  \\n\u64cd\u4f5c\u624b\u9806\u306f [\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb: Linux \u30b3\u30f3\u30c6\u30ca\u30fc\u3092\u4f7f\u7528\u3057\u3066 IoT Edge \u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u958b\u767a\u3059\u308b](https://learn.microsoft.com/ja-jp/azure/iot-edge/tutorial-develop-for-linux?view=iotedge-1.4) \u3092\u53c2\u7167\u304f\u3060\u3055\u3044\u3002\\n\u5404\u8a00\u8a9e\u3054\u3068\u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u306f\u3001\u4f8b\u3048\u3070 Python \u306e\u5834\u5408 [\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb: Linux \u30b3\u30f3\u30c6\u30ca\u30fc\u3092\u4f7f\u7528\u3057\u3066 Python IoT Edge \u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u958b\u767a\u3057\u3066\u30c7\u30d7\u30ed\u30a4\u3059\u308b](https://learn.microsoft.com/ja-jp/azure/iot-edge/tutorial-python-module?view=iotedge-1.4) \u304c\u53c2\u8003\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n### Azure Container Registry \u306e\u63a5\u7d9a\u8a2d\u5b9a\\n\\nAzure Container Registry \u306b Docker image \u3092 push \u3059\u308b\u305f\u3081\u3001\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\\n\\n```shell\\n# create .env corresponding to your Azure Container Registry\\ncat .env\\nCONTAINER_REGISTRY_ADDRESS=\\"YOUR_CONTAINER_REGISTRY.azurecr.io\\"\\nCONTAINER_REGISTRY_USERNAME=\\"YOUR_USERNAME\\"\\nCONTAINER_REGISTRY_PASSWORD=\\"YOUR_PASSWORD\\"\\n```\\n\\n\u8a2d\u5b9a\u60c5\u5831\u306f\u3001Azure Portal \u306e `Azure Container Registry > Settings > Access Keys` \u304b\u3089\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002  \\nACR \u306b\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u305f\u3081\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\\n\\n```shell\\naz acr login --name $CONTAINER_REGISTRY_NAME\\n```\\n\\n### IoT Edge Module \u306e Build & Push\\n\\n1. [Azure IoT Hub \u306e VSCode \u62e1\u5f35](https://marketplace.visualstudio.com/items?itemName=vsciot-vscode.azure-iot-toolkit)\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\\n1. \u30b3\u30de\u30f3\u30c9\u30d1\u30ec\u30c3\u30c8\u3092\u958b\u304d\u3001`Azure IoT Hub : Select IoT Hub` \u304b\u3089\u5bfe\u8c61\u3068\u306a\u308b IoT Hub \u3092\u9078\u629e\\n1. VSCode \u306e Explorer \u306b\u3066 `deployment.template.json` \u3092\u53f3\u30af\u30ea\u30c3\u30af\u3057\u3001`Build and Push IoT Edge Solution` \u3092\u9078\u629e\\n1. Docker Image \u306e Build \u3068 ACR \u3078\u306e Push \u304c\u5b9f\u884c\u3055\u308c\u3001ACR \u306e Repository \u306b\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u304c\u8ffd\u52a0\u3055\u308c\u308b\\n\\n### IoT Module \u306e\u30c7\u30d7\u30ed\u30a4\\n\\n1. VSCode \u306e Explorer \u306e `AZURE IOT HUB` \u30bf\u30d6\u306e\u5bfe\u8c61\u30c7\u30d0\u30a4\u30b9\u3092\u53f3\u30af\u30ea\u30c3\u30af\u3057 `Create Deployment for Single Device` \u3092\u9078\u629e\\n1. `config/deployment.json` \u3092\u9078\u629e\u3057\u3066 IoT Edge Module \u3092\u8ee2\u9001\\n\\nAzure Portal \u306e `Azure IoT Hub > IoT Edge` \u304b\u3089\u9069\u5207\u306b IoT Edge Module \u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002  \\n\u307e\u305f\u306f\u3001\u8ee2\u9001\u5148\u306e Edge \u304b\u3089\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067 IoT Edge Module \u306e\u8d77\u52d5\u72b6\u614b\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\\n\\n```shell\\nsudo iotedge list\\n```\\n\\n# References\\n\\n- [Hands on workshop / Azure IoT Edge #1 - Azure IoT Edge \u306b\u3064\u3044\u3066](https://www.youtube.com/watch?v=UsxycuFpC8c&list=PLSmINpYYRBsO4Es9FxVfKg6n4e3QdFbcs)"},{"id":"how-to-apply-textlint","metadata":{"permalink":"/blog/how-to-apply-textlint","source":"@site/blog/2023-03-22-how-to-apply-textlint.md","title":"textlint \u3092\u6709\u52b9\u5316\u3059\u308b","description":"textlint \u3092\u6709\u52b9\u5316\u3057\u3066 blog \u57f7\u7b46\u6642\u306b\u6821\u6b63\u51e6\u7406\u3092\u81ea\u52d5\u3067\u304b\u3051\u3089\u308c\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002","date":"2023-03-22T00:00:00.000Z","tags":[{"inline":true,"label":"textlint","permalink":"/blog/tags/textlint"}],"readingTime":1.745,"hasTruncateMarker":true,"authors":[{"name":"ks6088ts","title":"Software Engineer / Solutions Architect","url":"https://github.com/ks6088ts","imageURL":"https://github.com/ks6088ts.png","key":"ks6088ts","page":null}],"frontMatter":{"slug":"how-to-apply-textlint","title":"textlint \u3092\u6709\u52b9\u5316\u3059\u308b","authors":"ks6088ts","tags":["textlint"]},"unlisted":false,"prevItem":{"title":"Azure IoT Edge \u3092\u7528\u3044\u305f\u30cf\u30f3\u30ba\u30aa\u30f3","permalink":"/blog/handson-iot-edge"},"nextItem":{"title":"Azure AD \u8a8d\u53ef\u60c5\u5831\u3092\u7528\u3044\u3066\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30a2\u30d7\u30ea\u304b\u3089 Azure Functions \u3092\u547c\u3073\u51fa\u3059","permalink":"/blog/azure-ad-function-api"}},"content":"textlint \u3092\u6709\u52b9\u5316\u3057\u3066 blog \u57f7\u7b46\u6642\u306b\u6821\u6b63\u51e6\u7406\u3092\u81ea\u52d5\u3067\u304b\u3051\u3089\u308c\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n# textlint \u306b\u3088\u308b\u6821\u6b63\u74b0\u5883\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3059\u308b\\n\\n[textlint](https://textlint.github.io/) \u3092\u4f7f\u3063\u305f\u6821\u6b63\u74b0\u5883\u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002\\nNode.js \u3068 yarn \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u524d\u63d0\u3068\u3057\u307e\u3059\u3002\\n\\n## textlint \u3068\u30eb\u30fc\u30eb\u8a2d\u5b9a\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\\n\\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f9d\u5b58\u95a2\u4fc2\u306b textlint \u672c\u4f53\u3068\u30eb\u30fc\u30eb\u8a2d\u5b9a\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002  \\n\u30c6\u30b9\u30c8\u30b8\u30e7\u30d6\u3067\u306e\u307f\u5fc5\u8981\u306a\u30e2\u30b8\u30e5\u30fc\u30eb\u3067\u3042\u308b\u305f\u3081\u3001`devDependencies` \u3068\u3057\u3066\u4f9d\u5b58\u95a2\u4fc2\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\\n\\n```shell title=\\"install dependencies\\"\\nyarn add --dev \\\\\\n    textlint \\\\\\n    textlint-rule-preset-ja-spacing \\\\\\n    textlint-rule-preset-ja-technical-writing \\\\\\n    textlint-rule-prh \\\\\\n    textlint-rule-spellcheck-tech-word\\n```\\n\\n## textlint \u306e\u30eb\u30fc\u30eb\u8a2d\u5b9a\\n\\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306f `.textlintrc` \u30d5\u30a1\u30a4\u30eb\u3067\u8a18\u8ff0\u3057\u307e\u3059\u3002\\n\u300c\u3067\u3042\u308b\u30fb\u3067\u3059\u307e\u3059\u8abf\u306e\u4e0d\u4e00\u81f4\u300d\u300c\u5358\u8a9e\u306e\u8868\u8a18\u63fa\u308c\u300d\u300c\u53e5\u8aad\u70b9\u306e\u4f7f\u3044\u3059\u304e\u300d\u306a\u3069\u3001\u69d8\u3005\u306a\u30eb\u30fc\u30eb\u3092\u5b9a\u7fa9\u3057\u3066\u6587\u7ae0\u3092\u30c1\u30a7\u30c3\u30af\u3067\u304d\u307e\u3059\u3002  \\n\u4e00\u5ea6\u8a2d\u5b9a\u3092\u69cb\u7bc9\u3057\u3001CI \u30d7\u30ed\u30bb\u30b9\u306a\u3069\u306b\u7d44\u307f\u8fbc\u3093\u3067\u304a\u3051\u3070\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u54c1\u8cea\u3092\u4fdd\u3064\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\\n\\n```json title=\\"textlint settings: .textlintrc\\"\\n{\\n  \\"filters\\": {},\\n  \\"rules\\": {\\n    \\"preset-ja-spacing\\": {\\n      \\"ja-space-between-half-and-full-width\\": {\\n        \\"space\\": \\"always\\"\\n      }\\n    },\\n    \\"preset-ja-technical-writing\\": true,\\n    \\"spellcheck-tech-word\\": true,\\n    \\"textlint-rule-no-dropping-the-ra\\": true,\\n    \\"textlint-rule-ja-no-space-between-full-width\\": true,\\n    \\"prh\\": {\\n      \\"rulePaths\\": [\\n        \\"./prh.yaml\\"\\n      ]\\n    }\\n  }\\n}\\n```\\n\\nprh (=**P**roof**R**eading **H**elper)\u306f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u8868\u8a18\u3086\u308c\u3092\u691c\u51fa\u3059\u308b\u305f\u3081\u306e\u30c4\u30fc\u30eb\u3067\u3059\u3002\u4f8b\u3048\u3070\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u66f8\u304f\u3053\u3068\u3067\u8868\u8a18\u3092 GitHub \u306b\u7d71\u4e00\u3067\u304d\u307e\u3059\u3002\\n\\n```yaml title=\\"prh settings: prh.yaml\\"\\nrules:\\n  - expected: GitHub\\n    patterns:\\n      - github\\n      - Github\\n```"},{"id":"azure-ad-function-api","metadata":{"permalink":"/blog/azure-ad-function-api","source":"@site/blog/2023-03-17-azure-ad-function-api.md","title":"Azure AD \u8a8d\u53ef\u60c5\u5831\u3092\u7528\u3044\u3066\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30a2\u30d7\u30ea\u304b\u3089 Azure Functions \u3092\u547c\u3073\u51fa\u3059","description":"Azure AD \u8a8d\u53ef\u60c5\u5831\u3092\u7528\u3044\u3066\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30a2\u30d7\u30ea\u304b\u3089 Azure Functions \u3092\u547c\u3073\u51fa\u3059\u30cf\u30f3\u30ba\u30aa\u30f3\u3092\u3057\u307e\u3057\u305f\u3002","date":"2023-03-17T00:00:00.000Z","tags":[{"inline":true,"label":"azure","permalink":"/blog/tags/azure"},{"inline":true,"label":"azure-ad","permalink":"/blog/tags/azure-ad"},{"inline":true,"label":"msal","permalink":"/blog/tags/msal"}],"readingTime":5.605,"hasTruncateMarker":true,"authors":[{"name":"ks6088ts","title":"Software Engineer / Solutions Architect","url":"https://github.com/ks6088ts","imageURL":"https://github.com/ks6088ts.png","key":"ks6088ts","page":null}],"frontMatter":{"slug":"azure-ad-function-api","title":"Azure AD \u8a8d\u53ef\u60c5\u5831\u3092\u7528\u3044\u3066\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30a2\u30d7\u30ea\u304b\u3089 Azure Functions \u3092\u547c\u3073\u51fa\u3059","authors":"ks6088ts","tags":["azure","azure-ad","msal"]},"unlisted":false,"prevItem":{"title":"textlint \u3092\u6709\u52b9\u5316\u3059\u308b","permalink":"/blog/how-to-apply-textlint"},"nextItem":{"title":"Azure Container Apps \u30cf\u30f3\u30ba\u30aa\u30f3","permalink":"/blog/container-apps-handson"}},"content":"Azure AD \u8a8d\u53ef\u60c5\u5831\u3092\u7528\u3044\u3066\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30a2\u30d7\u30ea\u304b\u3089 Azure Functions \u3092\u547c\u3073\u51fa\u3059\u30cf\u30f3\u30ba\u30aa\u30f3\u3092\u3057\u307e\u3057\u305f\u3002\\n\u53c2\u8003\u306b\u306a\u3063\u305f\u60c5\u5831\u306e\u30ea\u30f3\u30af\u3092\u307e\u3068\u3081\u307e\u3059\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n# Azure AD \u8a8d\u53ef\u60c5\u5831\u3092\u7528\u3044\u3066\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30a2\u30d7\u30ea\u304b\u3089 Azure Functions \u3092\u547c\u3073\u51fa\u3059\\n\\nAzure App Service \u4e0a\u306b\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u305f React \u88fd\u306e\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30a2\u30d7\u30ea\u304b\u3089\u3001Azure Functions \u3092\u547c\u3073\u51fa\u3059\u30b5\u30f3\u30d7\u30eb\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002\\n\\n\u672c\u30a2\u30d7\u30ea\u306f\u4ee5\u4e0b\u306e\u8981\u6c42\u4e8b\u9805\u3092\u6e80\u305f\u3057\u307e\u3059\u3002\\n\\n- \u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30a2\u30d7\u30ea\u306f Azure AD \u8a8d\u8a3c\u3092\u901a\u3059\u3053\u3068\u3092\u5fc5\u9808\u3068\u3059\u308b\\n- Azure Functions \u306f Azure AD \u8a8d\u8a3c\u3092\u5fc5\u9808\u3068\u3059\u308b\\n- \u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30a2\u30d7\u30ea\u306e Azure AD \u8a8d\u8a3c\u3092\u901a\u3057\u305f\u30e6\u30fc\u30b6\u306f\u3001**\u8ffd\u52a0\u306e\u8a8d\u8a3c\u3092\u901a\u3059\u3053\u3068\u306a\u304f**\u3001\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30a2\u30d7\u30ea\u306e\u8a8d\u8a3c\u60c5\u5831\u3092\u7528\u3044\u3066 Azure Functions \u3092\u547c\u3073\u51fa\u3059\u3053\u3068\u304c\u3067\u304d\u308b\\n- \u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30a2\u30d7\u30ea\u3001Azure Functions \u53cc\u65b9\u306f Azure App Service \u306e\u7d44\u307f\u8fbc\u307f\u8a8d\u8a3c\u3092\u5229\u7528\u3057\u3001\u8a8d\u8a3c\u51e6\u7406\u306e\u4e00\u5207\u3092\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b3\u30fc\u30c9\u306b\u7d44\u307f\u8fbc\u3080\u5fc5\u8981\u304c\u306a\u3044\\n\\n## \u30cf\u30f3\u30ba\u30aa\u30f3\\n\\n### React \u30a2\u30d7\u30ea\u306e\u4f5c\u6210\\n\\n\u4ee5\u4e0b\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u3001`create-react-app` \u3092\u7528\u3044\u3066\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30a2\u30d7\u30ea\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\\n\\n- [TypeScript \u3092\u5bfe\u8c61\u3068\u3059\u308b npm \u3092\u4f7f\u7528\u3057\u305f React \u30a2\u30d7\u30ea\u3092\u4f5c\u6210\u3059\u308b](https://learn.microsoft.com/ja-jp/azure/developer/javascript/how-to/with-web-app/static-web-app-with-swa-cli/create-react-app#create-react-app-with-npm-targeting-typescript)\\n\\n- [Create React App / Adding TypeScript](https://create-react-app.dev/docs/adding-typescript/#installation)\\n\\n```shell\\n# create SPA app in spa directory\\nnpx create-react-app react-ts --template typescript\\n\\n# install dependencies\\ncd react-ts && npm install\\n\\n# build an app\\nnpm run build\\n\\n# run an app\\nnpm start\\n```\\n\\n### React \u30a2\u30d7\u30ea\u306e\u30c7\u30d7\u30ed\u30a4\\n\\n\u4ee5\u4e0b\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u3001App Service \u306b React \u306e\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30a2\u30d7\u30ea\u3092\u30c7\u30d7\u30ed\u30a4\u3057\u307e\u3059\u3002\\n\\n- [Azure \u3067\u9759\u7684 HTML Web \u30a2\u30d7\u30ea\u3092\u4f5c\u6210\u3059\u308b](https://learn.microsoft.com/ja-jp/azure/app-service/quickstart-html#create-a-web-app)\\n\\n```shell\\n# \u30a2\u30d7\u30ea\u306e\u30d3\u30eb\u30c9\\nnpm run build\\n\\n# build \u5b9f\u884c\u3067\u751f\u6210\u3055\u308c\u305f\u9759\u7684\u30b5\u30a4\u30c8\u304c\u683c\u7d0d\u3055\u308c\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\\ncd build\\n\\n# Azure CLI \u3067 Azure App Service \u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\\nrandomIdentifier=\\"1128\\"\\n\\nname=\\"react$randomIdentifier\\"\\nresourceGroup=\\"$name-rg\\"\\nlocation=\\"eastus\\"\\n\\n# create resource group\\naz group create --name $resourceGroup --location $location\\n\\n# deploy web app\\naz webapp up \\\\\\n    --resource-group $resourceGroup \\\\\\n    --plan \\"$name-plan\\" \\\\\\n    --name $name \\\\\\n    --location $location \\\\\\n    --sku FREE \\\\\\n    --html\\n```\\n\\n### \u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30a2\u30d7\u30ea\u304b\u3089 Azure AD \u8a8d\u8a3c\u3092\u5fc5\u8981\u3068\u3059\u308b API \u3092\u547c\u3073\u51fa\u3059\\n\\n[\u30a2\u30d7\u30ea \u30b3\u30fc\u30c9\u3067\u306e\u30c8\u30fc\u30af\u30f3\u306e\u53d6\u5f97](https://learn.microsoft.com/ja-jp/azure/app-service/configure-authentication-oauth-tokens#retrieve-tokens-in-app-code) \u306b\u8a18\u8f09\u304c\u3042\u308b\u3088\u3046\u306b\u3001AAD \u8a8d\u8a3c\u6e08\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306f\u3001`/.auth/me` \u306b\u30ea\u30af\u30a8\u30b9\u30c8\u3059\u308b\u3053\u3068\u3067\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\\n\\nAPI \u30b3\u30fc\u30eb\u306e\u305f\u3081\u306b\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30a2\u30d7\u30ea\u30b3\u30fc\u30c9\u3067\u5fc5\u8981\u306a\u5b9f\u88c5\u306f\u3001\u4ee5\u4e0b\u306e 2 \u70b9\u3067\u3059\u3002\\n\\n- `/.auth/me` \u306b\u30ea\u30af\u30a8\u30b9\u30c8\u3057\u3066 `access_token` \u3092\u53d6\u5f97\\n- \u53d6\u5f97\u3057\u305f `access_token` \u3092\u30d8\u30c3\u30c0\u306b\u8ffd\u52a0\u3057\u3066 Azure Functions \u3092\u547c\u3073\u51fa\u3059\\n\\n\u5b9f\u8a3c\u5b9f\u9a13\u306e\u305f\u3081\u306e\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\u7c21\u7565\u5316\u306e\u305f\u3081\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u7b49\u306f\u7701\u7565\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n```javascript\\nasync function getToken(url: string) {\\n    const res = await fetch(url);\\n    const json = await res.json();\\n    if (!json) {\\n        throw ReferenceError(\'Empty response\');\\n    }\\n\\n    console.log(`json: ${JSON.stringify(json)}`);\\n    return json[0][\'access_token\'];\\n}\\n\\nasync function callApi(url: string, token: string) {\\n    await fetch(url, {\\n        headers: {\\n            Authorization: `Bearer ${token}`,\\n        },\\n    })\\n        .then((resp) => {\\n            resp.text().then(function (respStr) {\\n                console.log(`success: ${respStr}`);\\n            });\\n        })\\n        .catch((error) => {\\n            console.log(error);\\n        });\\n}\\n\\nexport async function main() {\\n    const authUrl = \'https://YOURAPP.azurewebsites.net/.auth/me\';\\n    const token = await getToken(authUrl);\\n    console.log(`token: ${token}`);\\n\\n    const apiUrl =\\n        \'https://YOURFUNC.azurewebsites.net/api/YOURFUNC?code=YOURCODE\';\\n    callApi(apiUrl, token);\\n}\\n```\\n\\n\u4e0a\u8a18\u5b9f\u88c5\u3092\u8ffd\u52a0\u3057\u305f Pull Request \u306f\u3053\u3061\u3089\u3067\u3059\u3002\\n\\n[support api call #4](https://github.com/ks6088ts-labs/react-ts/pull/4/files#diff-26ad4b834941d9b19ebf9db8082bd202aaf72ea0ddea85f5a8a0cb3c729cc6f2R7)\\n\\n\u52d5\u4f5c\u78ba\u8a8d\u3057\u305f\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306f\u3053\u3061\u3089\u3067\u516c\u958b\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n[github.com/ks6088ts-labs/react-ts](https://github.com/ks6088ts-labs/react-ts)\\n\\n## AAD \u8a8d\u8a3c\u306e\u8a2d\u5b9a\\n\\n- App Service (=\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30a2\u30d7\u30ea)\\n    - `App Service > \u8a8d\u8a3c` \u306b Microsoft \u306e ID \u30d7\u30ed\u30d0\u30a4\u30c0\u30fc\u3092\u767b\u9332\\n        - \u767a\u884c\u8005\u306e URL \u3092\u7a7a\u6b04\u306b\u3059\u308b\\n    - `Azure AD > \u7ba1\u7406 > API \u306e\u30a2\u30af\u30bb\u30b9\u8a31\u53ef` \u306b API (=Azure Functions) \u306e\u30a2\u30af\u30bb\u30b9\u8a31\u53ef\u3092\u8ffd\u52a0\\n    - `loginParameters` \u8a2d\u5b9a\u3092 Azure Resource Explorer \u3067\u66f8\u304d\u63db\u3048\u308b\u3002(Azure Functions \u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3 ID \u3092\u8ffd\u8a18)\\n    - \u53c2\u8003: [Accessing Microsoft Graph with App Service Auth V2](https://azureossd.github.io/2021/06/07/authsettingsv2-graph/)\\n- Azure Functions (=API)\\n    - `\u95a2\u6570\u30a2\u30d7\u30ea > \u8a2d\u5b9a > \u8a8d\u8a3c` \u306e ID \u30d7\u30ed\u30d0\u30a4\u30c0\u30fc\u306b Microsoft \u3092\u8ffd\u52a0\\n        - \u767a\u884c\u8005\u306e URL \u3092\u7a7a\u6b04\u306b\u3059\u308b\\n    - `Azure AD > \u7ba1\u7406 > API \u306e\u30a2\u30af\u30bb\u30b9\u8a31\u53ef` \u306b API (=Azure Functions) \u306e\u30a2\u30af\u30bb\u30b9\u8a31\u53ef\u3092\u8ffd\u52a0\\n\\n## CORS \u8a2d\u5b9a\\n\\n\u6700\u65b0\u306e\u30d6\u30e9\u30a6\u30b6\u30fc\u3067\u306f\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3067\u60aa\u610f\u306e\u3042\u308b\u30b3\u30fc\u30c9\u304c\u5b9f\u884c\u3055\u308c\u308b\u306e\u3092\u9632\u3050\u305f\u3081\u306b\u3001Web \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304b\u3089\u5225\u306e\u30c9\u30e1\u30a4\u30f3\u3067\u5b9f\u884c\u3055\u308c\u308b\u30ea\u30bd\u30fc\u30b9\u3078\u306e\u8981\u6c42\u3092\u30d6\u30ed\u30c3\u30af\u3057\u307e\u3059\u3002\\n\\n\u4eca\u56de\u306f\u3001App Service \u306b\u30c7\u30d7\u30ed\u30a4\u3057\u305f\u9759\u7684\u30b5\u30a4\u30c8\u306e\u30c9\u30e1\u30a4\u30f3\u304b\u3089\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u8a31\u53ef\u3059\u308b\u305f\u3081\u3001Azure Functions \u306e CORS \u8a2d\u5b9a\u3092\u5909\u66f4\u3057\u307e\u3059\u3002\\n\\n\u5177\u4f53\u7684\u306b\u306f\u3001Azure \u30dd\u30fc\u30bf\u30eb\u306b\u3066\u3001`\u95a2\u6570\u30a2\u30d7\u30ea > API > CORS` \u3092\u958b\u3044\u3066\u3001\u8a31\u53ef\u3055\u308c\u308b\u5143\u306e\u30c9\u30e1\u30a4\u30f3\u306b `https://YOURAPP.azurewebsites.net` \u3092\u8ffd\u52a0\u3059\u308b\u3060\u3051\u3067\u3059\u3002\\n\\n- [\u304a\u4f7f\u3044\u306e Function App \u306e\u7ba1\u7406 / \u30af\u30ed\u30b9 \u30aa\u30ea\u30b8\u30f3 \u30ea\u30bd\u30fc\u30b9\u5171\u6709](https://learn.microsoft.com/ja-jp/azure/azure-functions/functions-how-to-use-azure-function-app-settings?tabs=portal#cors)\\n\\n## MSAL \u3092\u4f7f\u3046\u5834\u5408\\n\\n- [\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb: \u8a8d\u8a3c\u30b3\u30fc\u30c9 \u30d5\u30ed\u30fc\u3092\u4f7f\u7528\u3057\u3066\u3001\u30e6\u30fc\u30b6\u30fc\u3092\u30b5\u30a4\u30f3\u30a4\u30f3\u3055\u305b\u3066 React \u30b7\u30f3\u30b0\u30eb\u30da\u30fc\u30b8 \u30a2\u30d7\u30ea (SPA) \u304b\u3089 Microsoft Graph API \u3092\u547c\u3073\u51fa\u3059](https://learn.microsoft.com/ja-jp/azure/active-directory/develop/tutorial-v2-react)\\n- [Azure-Samples/ms-identity-javascript-react-spa](https://github.com/Azure-Samples/ms-identity-javascript-react-spa)\\n- [How to call an AAD protected Azure Function from React](https://www.smcculloch.com/how-to-call-aad-protected-azure-function-from-react#:~:text=How%20to%20call%20an%20AAD%20protected%20Azure%20Function,...%205%20Step%205%3A%20Obtain%20Access%20Token%20)\\n\\n\u5b9f\u88c5\u306b\u969b\u3057\u3066\u306f\u4e0a\u8a18\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u3054\u53c2\u7167\u304f\u3060\u3055\u3044\u3002\\nMSAL \u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5074\u306b\u7d44\u307f\u8fbc\u3080\u305f\u3081\u4ee5\u4e0b\u306e\u5bfe\u5fdc\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n- \u30ea\u30bd\u30fc\u30b9\u5909\u66f4\u306e\u5ea6\u306b ID \u8a2d\u5b9a\u5909\u66f4\u3092\u5165\u308c\u3066\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30a2\u30d7\u30ea\u3092\u30ea\u30d3\u30eb\u30c9\u3059\u308b\\n- \u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u66f4\u65b0\u304c\u3042\u3063\u305f\u3089\u90fd\u5ea6\u66f4\u65b0\u3059\u308b"},{"id":"container-apps-handson","metadata":{"permalink":"/blog/container-apps-handson","source":"@site/blog/2023-03-13-container-apps-handson.md","title":"Azure Container Apps \u30cf\u30f3\u30ba\u30aa\u30f3","description":"Azure Container Apps \u3092\u4f7f\u3063\u3066\u30de\u30eb\u30c1\u30b3\u30f3\u30c6\u30ca\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30cf\u30f3\u30ba\u30aa\u30f3\u3092\u3057\u307e\u3057\u305f\u3002","date":"2023-03-13T00:00:00.000Z","tags":[{"inline":true,"label":"azure","permalink":"/blog/tags/azure"},{"inline":true,"label":"container","permalink":"/blog/tags/container"}],"readingTime":2.41,"hasTruncateMarker":true,"authors":[{"name":"ks6088ts","title":"Software Engineer / Solutions Architect","url":"https://github.com/ks6088ts","imageURL":"https://github.com/ks6088ts.png","key":"ks6088ts","page":null}],"frontMatter":{"slug":"container-apps-handson","title":"Azure Container Apps \u30cf\u30f3\u30ba\u30aa\u30f3","authors":"ks6088ts","tags":["azure","container"]},"unlisted":false,"prevItem":{"title":"Azure AD \u8a8d\u53ef\u60c5\u5831\u3092\u7528\u3044\u3066\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30a2\u30d7\u30ea\u304b\u3089 Azure Functions \u3092\u547c\u3073\u51fa\u3059","permalink":"/blog/azure-ad-function-api"},"nextItem":{"title":"\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304b\u3089\u5b66\u3076 Azure ~ Web API \u7de8 ~","permalink":"/blog/learn-from-template-webapi"}},"content":"Azure Container Apps \u3092\u4f7f\u3063\u3066\u30de\u30eb\u30c1\u30b3\u30f3\u30c6\u30ca\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30cf\u30f3\u30ba\u30aa\u30f3\u3092\u3057\u307e\u3057\u305f\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n# Azure Container Apps \u3092\u4f7f\u3063\u3066\u307f\u308b\\n\\nAzure Container Apps \u306f Kubernetes \u306e\u5b9f\u88c5\u8a73\u7d30\u3092\u96a0\u853d\u3057\u3001\u7c21\u5358\u306b\u30de\u30eb\u30c1\u30b3\u30f3\u30c6\u30ca\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30c7\u30d7\u30ed\u30a4\u3067\u304d\u308b\u30b5\u30fc\u30d3\u30b9\u3067\u3059\u3002  \\n\u7d20\u306e Kubernetes \u3092\u4f7f\u3046\u3068\u30b1\u30a2\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u304b\u3063\u305f\u3053\u3068\u304c\u3001Azure Container Apps \u306b\u3088\u3063\u3066\u96a0\u853d\u3055\u308c\u3066\u3044\u3066\u3001\u3084\u308a\u305f\u3044\u3053\u3068\u3092\u5b9f\u73fe\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981\u306a\u77e5\u8b58\u304c\u5c11\u306a\u304f\u306a\u3063\u3066\u3044\u307e\u3059\u3002  \\n\u30b5\u30fc\u30d3\u30b9\u306e\u8a73\u7d30\u306f [Azure Container Apps \u306e\u6982\u8981](https://learn.microsoft.com/ja-jp/azure/container-apps/overview) \u306b\u3042\u308a\u307e\u3059\u3002  \\n\\n## \u30cf\u30f3\u30ba\u30aa\u30f3\\n\\n\u500b\u4eba\u7684\u306b\u306f\u5ea7\u5b66\u3088\u308a\u306f\u624b\u3092\u52d5\u304b\u3059\u65b9\u304c\u65e9\u304f\u7406\u89e3\u3067\u304d\u308b\u306e\u3067\u3001[Azure\u30b3\u30f3\u30c6\u30ca\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u958b\u767a](https://amzn.to/3lgDTca) \u3092\u8cb7\u3063\u3066\u30cf\u30f3\u30ba\u30aa\u30f3\u3092\u3057\u3066\u307f\u307e\u3057\u305f\u3002\\n\\n\u300eAzure \u30b3\u30f3\u30c6\u30ca\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u958b\u767a\u300f\uff08\u6280\u8853\u8a55\u8ad6\u793e\uff0c2023 \u5e74\uff09\u306e\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306f [github.com/gihyo-book/azure-container-dev-book](https://github.com/gihyo-book/azure-container-dev-book) \u306b\u3042\u308a\u307e\u3059\u3002  \\ndev container \u3082\u3042\u308b\u306e\u3067\u3001VS Code \u3067\u958b\u304f\u3068\u74b0\u5883\u304c\u4e00\u6c17\u306b\u6574\u3044\u307e\u3059\u3002  \\n\u30cf\u30f3\u30ba\u30aa\u30f3\u3067\u5b9f\u884c\u3059\u308b Azure CLI \u30b3\u30de\u30f3\u30c9\u306f [azure-container-dev-book/apps/part3/README.azcli](https://github.com/gihyo-book/azure-container-dev-book/blob/main/apps/part3/README.azcli) \u306b\u3042\u308a\u307e\u3059\u3002dev container \u304b\u3089\u9010\u6b21\u5b9f\u884c\u3057\u3066\u52d5\u4f5c\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002\\n\\n\u30b3\u30f3\u30c6\u30ca\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u3084\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u6226\u7565\u306a\u3069\u306e\u89e3\u8aac\u3082\u3042\u308a\u3001Azure Container Apps \u306e\u6982\u8981\u3092\u77e5\u308b\u306e\u306b\u306f\u5341\u5206\u306a\u5185\u5bb9\u3060\u3068\u601d\u3044\u307e\u3057\u305f\u3002\\nKubernetes \u306e\u5834\u5408\u306f\u30b5\u30fc\u30d3\u30b9\u30e1\u30c3\u30b7\u30e5\u3092\u5c0e\u5165\u3057\u3066\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u304c Azure Container Apps \u3067\u306f\u7c21\u5358\u306b\u3067\u304d\u307e\u3059\u3002\\n\u307e\u305f\u3001\u30ab\u30ca\u30ea\u30a2\u30ea\u30ea\u30fc\u30b9\u3084\u30ea\u30d3\u30b8\u30e7\u30f3\u7ba1\u7406\u306a\u3069\u3001\u30de\u30eb\u30c1\u30b3\u30f3\u30c6\u30ca\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u958b\u767a\u306b\u5fc5\u8981\u306a\u6a5f\u80fd\u304c\u63c3\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u7406\u89e3\u3067\u304d\u307e\u3057\u305f\u3002\\n\\n## \u53c2\u8003\u30ea\u30f3\u30af\\n\\n- [Azure Container Apps\u3092\u8a66\u3057\u3066\u307f\u305f](https://techblog.ap-com.co.jp/entry/2021/11/03/093821)\\n  - Azure Portal \u304b\u3089\u8a66\u3057\u305f\u4f8b\\n- [Terraform\u3067Azure Container Apps\u304c\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u305f\u306e\u3067\u7206\u901f\u3067\u30c7\u30d7\u30ed\u30a4\u3059\u308b](https://techblog.ap-com.co.jp/entry/2023/02/10/155135)\\n  - Terraform \u3067\u30c7\u30d7\u30ed\u30a4\u3057\u305f\u4f8b\u3002AzureRM Provider \u306e v.3.43.0 \u304b\u3089\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3059\u3050\u306b\u8a18\u4e8b\u304c\u51fa\u3066\u3044\u3066\u975e\u5e38\u306b\u52a9\u304b\u308a\u307e\u3057\u305f\u3002\\n- [Azure Container Apps\u3067CI/CD(GitHub Actions\u7de8)](https://techblog.ap-com.co.jp/entry/2022/09/01/120000)\\n  - GitHub Actions \u3067\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3092\u30d3\u30eb\u30c9\u3057\u3066 ACR \u3078\u683c\u7d0d\u3057\u3001\u305d\u306e\u30a4\u30e1\u30fc\u30b8\u3092 Container Apps \u3078\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u4f8b\\n- [Azure-Samples/todo-nodejs-mongo-aca](https://github.com/Azure-Samples/todo-nodejs-mongo-aca)\\n  - Azure Developer CLI \u3067\u30c7\u30d7\u30ed\u30a4\u3067\u304d\u308b ACA \u3092\u4f7f\u3063\u305f\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3"},{"id":"learn-from-template-webapi","metadata":{"permalink":"/blog/learn-from-template-webapi","source":"@site/blog/2023-03-10-learn-from-template-webapi.md","title":"\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304b\u3089\u5b66\u3076 Azure ~ Web API \u7de8 ~","description":"\u7c21\u5358\u306a TODO \u30a2\u30d7\u30ea\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304b\u3089 Azure \u3092\u5b66\u3076\u30b7\u30ea\u30fc\u30ba\u3002","date":"2023-03-10T00:00:00.000Z","tags":[{"inline":true,"label":"terraform","permalink":"/blog/tags/terraform"},{"inline":true,"label":"azure","permalink":"/blog/tags/azure"},{"inline":true,"label":"apim","permalink":"/blog/tags/apim"}],"readingTime":4.085,"hasTruncateMarker":true,"authors":[{"name":"ks6088ts","title":"Software Engineer / Solutions Architect","url":"https://github.com/ks6088ts","imageURL":"https://github.com/ks6088ts.png","key":"ks6088ts","page":null}],"frontMatter":{"slug":"learn-from-template-webapi","title":"\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304b\u3089\u5b66\u3076 Azure ~ Web API \u7de8 ~","authors":"ks6088ts","tags":["terraform","azure","apim"]},"unlisted":false,"prevItem":{"title":"Azure Container Apps \u30cf\u30f3\u30ba\u30aa\u30f3","permalink":"/blog/container-apps-handson"},"nextItem":{"title":"PowerShell \u30b9\u30af\u30ea\u30d7\u30c8\u958b\u767a\u74b0\u5883\u306e\u69cb\u7bc9","permalink":"/blog/powershell-development-environment"}},"content":"\u7c21\u5358\u306a TODO \u30a2\u30d7\u30ea\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304b\u3089 Azure \u3092\u5b66\u3076\u30b7\u30ea\u30fc\u30ba\u3002\\n\u4eca\u56de\u306f [Azure-Samples/todo-nodejs-mongo-terraform](https://github.com/Azure-Samples/todo-nodejs-mongo-terraform)\u3092\u89e6\u3063\u3066\u52c9\u5f37\u3057\u307e\u3059\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n# [Azure-Samples/todo-nodejs-mongo-terraform](https://github.com/Azure-Samples/todo-nodejs-mongo-terraform)\\n\\n## \u76ee\u7684\\n\\n\u7c21\u5358\u306a TODO \u30a2\u30d7\u30ea\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u30c7\u30d7\u30ed\u30a4\u3057\u3066\u3001\u5b9f\u52d5\u4f5c\u3068\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u78ba\u304b\u3081\u3064\u3064\u3001Azure \u306e\u57fa\u672c\u7684\u306a\u6a5f\u80fd\u3092\u5b66\u3073\u307e\u3059\u3002\\n\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u56f3\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\\n\\n![architecture](https://github.com/Azure-Samples/todo-nodejs-mongo-terraform/raw/main/assets/resources.png)\\n\\n## \u30c7\u30d7\u30ed\u30a4\\n\\n\u307e\u305a\u306f [README.md](https://github.com/Azure-Samples/todo-nodejs-mongo-terraform/blob/main/README.md) \u3092\u8aad\u307f\u3001\u30c7\u30d7\u30ed\u30a4\u624b\u9806\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\\n\\n\u3053\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306f `azd` \u5bfe\u5fdc\u306a\u306e\u3067\u3001\u30b3\u30de\u30f3\u30c9\u4e00\u767a\u3067\u30c7\u30d7\u30ed\u30a4\u3067\u304d\u307e\u3059\u3002\\nazd \u306b\u3064\u3044\u3066\u306f\u3001[Azure Developer CLI \u306b\u3088\u308b\u958b\u767a\u30d7\u30ed\u30bb\u30b9\u306e\u9ad8\u901f\u5316](./2023-03-07-azure-developer-cli-get-started.md)\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\\n\\n```shell\\n# \u30ea\u30dd\u30b8\u30c8\u30ea\u3092 clone\\ngit clone git@github.com:Azure-Samples/todo-nodejs-mongo-terraform.git\\ncd todo-nodejs-mongo-terraform\\n\\n# APIM \u3092\u4f7f\u3044\u305f\u3044\u306e\u3067\u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\\nazd env set USE_APIM true\\n\\n# \u30c7\u30d7\u30ed\u30a4\\nazd up\\n```\\n\\n\u4ee5\u4e0a\u3067 Azure \u4e0a\u306b\u30ea\u30bd\u30fc\u30b9\u304c\u4f5c\u6210\u3055\u308c\u3001\u30c7\u30d7\u30ed\u30a4\u304c\u5b8c\u4e86\u3057\u307e\u3059\u3002\\n\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u305f API \u30b5\u30fc\u30d0\u30fc\u3084 Web \u30a2\u30d7\u30ea\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u52d5\u4f5c\u78ba\u8a8d\u3057\u307e\u3059\u3002\\n\\n- API \u30b5\u30fc\u30d0\u30fc\u306b\u30a2\u30af\u30bb\u30b9(Swagger UI \u304c\u958b\u304f): `https://app-api-{RESOURCE_TOKEN}.azurewebsites.net/`\\n- Web \u30b5\u30fc\u30d0\u30fc\u306b\u30a2\u30af\u30bb\u30b9(Web \u30a2\u30d7\u30ea\u304c\u958b\u304f): `https://app-web-{RESOURCE_TOKEN}.azurewebsites.net/`\\n\\n\u307e\u305f\u3001\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089\u52d5\u4f5c\u30e1\u30c8\u30ea\u30af\u30b9\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\\n\\n```shell\\n# Azure Dashboard \u3092\u958b\u304f\\nazd monitor --overview\\n\\n# Application Insights \u306e Live metrics stream \u3092\u958b\u304f\\nazd monitor --live\\n\\n# Application Insights \u306e Logs \u3092\u958b\u304f\\nazd monitor --logs\\n```\\n\\n## \u30b3\u30fc\u30c9\u3092\u8aad\u3080\\n\\n`azd` \u5bfe\u5fdc\u306a\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306f\u3001\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u9020\u306b\u898f\u5247\u6027\u304c\u3042\u308b\u306e\u3067\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304c\u8aad\u307f\u3084\u3059\u3044\u3067\u3059\u3002\\n\u4e00\u4f8b\u3068\u3057\u3066\u81ea\u5206\u306e\u30b3\u30fc\u30c9\u306e\u8aad\u307f\u65b9\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\\n\\n### IaC \u30b3\u30fc\u30c9\u306e\u6982\u8981\u3092\u3064\u304b\u3080\\n\\n\u30a4\u30f3\u30d5\u30e9\u5074\u306e\u30ea\u30bd\u30fc\u30b9\u5b9a\u7fa9\u306f\u3001`infra/` \u4ee5\u4e0b\u306b\u3042\u308a\u307e\u3059\u3002\\n[infra/main.tf](https://github.com/Azure-Samples/todo-nodejs-mongo-terraform/blob/main/infra/main.tf) \u304c\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u30a8\u30f3\u30c8\u30ea\u30dd\u30a4\u30f3\u30c8\u306b\u306a\u3063\u3066\u3044\u3066\u3001\u3053\u3053\u3067\u5b9a\u7fa9\u3055\u308c\u308b\u5404\u7a2e module \u306e\u5b9f\u88c5\u8a73\u7d30\u306f `modules/` \u4ee5\u4e0b\u306b\u914d\u7f6e\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\n\\n\u7d30\u90e8\u3092\u8aad\u307f\u8fbc\u3080\u524d\u306b\u3001\u307e\u305a\u306f\u3053\u306e main.tf \u3092\u8aad\u3093\u3067\u5168\u4f53\u50cf\u3092\u628a\u63e1\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\\n\u3053\u3053\u3067\u306f\u4e00\u4f8b\u3068\u3057\u3066 `applicationinsights` \u3092\u898b\u3066\u307f\u307e\u3059\u3002\\n\\n```terraform\\nmodule \\"applicationinsights\\" {\\n  source           = \\"./modules/applicationinsights\\"\\n  location         = var.location\\n  rg_name          = azurerm_resource_group.rg.name\\n  environment_name = var.environment_name\\n  workspace_id     = module.loganalytics.LOGANALYTICS_WORKSPACE_ID\\n  tags             = azurerm_resource_group.rg.tags\\n  resource_token   = local.resource_token\\n}\\n```\\n\\n\u3053\u3053\u3067\u5f15\u6570\u3068\u3057\u3066\u6307\u5b9a\u3055\u308c\u3066\u3044\u308b `module.loganalytics.LOGANALYTICS_WORKSPACE_ID` \u306b\u6ce8\u76ee\u3057\u307e\u3059\u3002  \\n\u3053\u308c\u306f applicationinsights \u304c loganalytics \u306b\u4f9d\u5b58\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u610f\u5473\u3057\u307e\u3059\u3002\\n\u3059\u3079\u3066\u3092\u982d\u306b\u5165\u308c\u308b\u306e\u306f\u5927\u5909\u306a\u306e\u3067\u3001\u3069\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u3069\u306e\u3088\u3046\u306a\u65b9\u5411\u3067\u4f9d\u5b58\u3092\u5f35\u3063\u3066\u3044\u308b\u306e\u304b\u306e\u6982\u8981\u3092\u3056\u3063\u304f\u308a\u628a\u63e1\u3057\u3066\u304a\u304f\u3068\u3001\u5f8c\u3005\u306e\u7d30\u90e8\u306e\u7406\u89e3\u304c\u697d\u306b\u306a\u308a\u307e\u3059\u3002  \\n(\u56f3\u306b\u66f8\u3044\u3066\u30e2\u30b8\u30e5\u30fc\u30eb\u9593\u306e\u4f9d\u5b58\u3092\u77e2\u5370\u3067\u66f8\u304f\u3068\u826f\u3044\u3067\u3059)\\n\\nWeb \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3068 API \u30b5\u30fc\u30d0\u30fc\u306e\u5b9f\u88c5\u306f\u3001`modules/appservicenode/` \u4ee5\u4e0b\u306b\u3042\u308a\u307e\u3059\u3002\\n\u305d\u308c\u305e\u308c\u74b0\u5883\u5909\u6570\u3068\u3057\u3066\u53c2\u7167\u3057\u3066\u3044\u308b\u30d1\u30e9\u30e1\u30fc\u30bf\u304b\u3089\u4f9d\u5b58\u95a2\u4fc2\u304c\u5224\u308a\u307e\u3059\u3002\\n\u4ee5\u4e0b\u306f API \u30b5\u30fc\u30d0\u30fc\u306e\u8a2d\u5b9a\u5024\u3067\u3059\u3002\\n\\n```terraform\\n  app_settings = {\\n    \\"AZURE_COSMOS_CONNECTION_STRING_KEY\\"    = local.cosmos_connection_string_key\\n    \\"AZURE_COSMOS_DATABASE_NAME\\"            = module.cosmos.AZURE_COSMOS_DATABASE_NAME\\n    \\"SCM_DO_BUILD_DURING_DEPLOYMENT\\"        = \\"true\\"\\n    \\"AZURE_KEY_VAULT_ENDPOINT\\"              = module.keyvault.AZURE_KEY_VAULT_ENDPOINT\\n    \\"APPLICATIONINSIGHTS_CONNECTION_STRING\\" = module.applicationinsights.APPLICATIONINSIGHTS_CONNECTION_STRING\\n  }\\n```\\n\\n\u3056\u3063\u304f\u308a\u4ee5\u4e0b\u306e\u3053\u3068\u304c\u5206\u308a\u307e\u3059\u3002\\n\\n- `module.cosmos`, `AZURE_COSMOS_CONNECTION_STRING_KEY` \u304b\u3089 Cosmos DB \u306b\u4f9d\u5b58\\n- `AZURE_KEY_VAULT_ENDPOINT` \u304b\u3089 Key Vault \u306b\u4f9d\u5b58\\n- `module.applicationinsights.APPLICATIONINSIGHTS_CONNECTION_STRING` \u304b\u3089 Application Insights \u306b\u4f9d\u5b58\\n\\n`azd up` \u3067\u4f5c\u6210\u3055\u308c\u305f\u5404\u7a2e\u30ea\u30bd\u30fc\u30b9\u306f `.azure/ENVIRONMENT_NAME/terraform.tfstate` \u306b\u8a18\u9332\u3055\u308c\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u5b9f\u969b\u306b\u8a2d\u5b9a\u3055\u308c\u305f\u500b\u3005\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\\n\\n### WIP: azure.yaml \u306e services \u306e\u30d3\u30eb\u30c9\u30d7\u30ed\u30bb\u30b9\u306b\u3064\u3044\u3066\\n\\n`azd` \u306f\u3001`azure.yaml` \u306b\u5b9a\u7fa9\u3055\u308c\u305f `services` \u306e\u30d3\u30eb\u30c9\u30d7\u30ed\u30bb\u30b9\u3092\u81ea\u52d5\u5316\u3057\u3066\u3044\u307e\u3059\u3002\\n\u6319\u52d5\u306e\u8a73\u7d30\u306f\u628a\u63e1\u3057\u6b21\u7b2c\u8ffd\u8a18\u3057\u307e\u3059\u3002"},{"id":"powershell-development-environment","metadata":{"permalink":"/blog/powershell-development-environment","source":"@site/blog/2023-03-10-powershell-development-envitonment.md","title":"PowerShell \u30b9\u30af\u30ea\u30d7\u30c8\u958b\u767a\u74b0\u5883\u306e\u69cb\u7bc9","description":"PowerShell \u30b9\u30af\u30ea\u30d7\u30c8\u958b\u767a\u74b0\u5883\u306e\u69cb\u7bc9\u306b\u3042\u305f\u308a\u3001\u4fbf\u5229\u306a\u30c4\u30fc\u30eb\u3084\u74b0\u5883\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002","date":"2023-03-10T00:00:00.000Z","tags":[{"inline":true,"label":"powershell","permalink":"/blog/tags/powershell"}],"readingTime":2.49,"hasTruncateMarker":true,"authors":[{"name":"ks6088ts","title":"Software Engineer / Solutions Architect","url":"https://github.com/ks6088ts","imageURL":"https://github.com/ks6088ts.png","key":"ks6088ts","page":null}],"frontMatter":{"slug":"powershell-development-environment","title":"PowerShell \u30b9\u30af\u30ea\u30d7\u30c8\u958b\u767a\u74b0\u5883\u306e\u69cb\u7bc9","authors":"ks6088ts","tags":["powershell"]},"unlisted":false,"prevItem":{"title":"\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304b\u3089\u5b66\u3076 Azure ~ Web API \u7de8 ~","permalink":"/blog/learn-from-template-webapi"},"nextItem":{"title":"Azure Developer CLI \u306b\u3088\u308b\u958b\u767a\u30d7\u30ed\u30bb\u30b9\u306e\u9ad8\u901f\u5316","permalink":"/blog/azure-developer-cli-get-started"}},"content":"PowerShell \u30b9\u30af\u30ea\u30d7\u30c8\u958b\u767a\u74b0\u5883\u306e\u69cb\u7bc9\u306b\u3042\u305f\u308a\u3001\u4fbf\u5229\u306a\u30c4\u30fc\u30eb\u3084\u74b0\u5883\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n# PowerShell \u958b\u767a\u74b0\u5883\u306e\u69cb\u7bc9\\n\\n## \u30a8\u30c7\u30a3\u30bf\\n\\nSyntax highlighting\u3001\u30a4\u30f3\u30c6\u30ea\u30bb\u30f3\u30b9\u306a\u3069\u3092\u6709\u52b9\u306b\u3059\u308b\u305f\u3081\u3001[PowerShell for Visual Studio Code](https://marketplace.visualstudio.com/items?itemName=ms-vscode.PowerShell)\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066 VS Code \u4e0a\u3067\u958b\u767a\u3057\u307e\u3059\u3002\\n\\n## \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\\n\\n\u57fa\u672c\u7684\u306b\u306f\u3001[PowerShell Documentation](https://learn.microsoft.com/ja-jp/powershell/)\u306e\u516c\u5f0f\u60c5\u5831\u3092\u53c2\u7167\u3057\u307e\u3059\u3002\\n\u5177\u4f53\u7684\u306a\u6587\u6cd5\u3084\u4f7f\u3044\u65b9\u306b\u95a2\u3057\u3066\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u3092\u898b\u305f\u3044\u5834\u5408\u306f\u3001[~\u306b\u3064\u3044\u3066\u77e5\u308a\u305f\u304b\u3063\u305f\u3053\u3068\u306e\u3059\u3079\u3066](https://learn.microsoft.com/ja-jp/powershell/scripting/learn/deep-dives/everything-about-arrays)\u3092\u53c2\u7167\u3059\u308b\u3068\u826f\u3044\u3067\u3059\u3002\\nPowerShell \u30b9\u30af\u30ea\u30d7\u30c8\u958b\u767a\u306e\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u3092\u77e5\u308a\u305f\u3044\u5834\u5408\u306f\u3001[PowerShell Best Practices and Style Guide](https://poshcode.gitbook.io/powershell-practice-and-style/) \u304c\u53c2\u8003\u306b\u306a\u308a\u307e\u3059\u3002\\n\\n### Code snippets\\n\\n\u500b\u4eba\u7684\u306b\u3088\u304f\u4f7f\u3046\u30b9\u30cb\u30da\u30c3\u30c8\u96c6\u3092\u4f5c\u6210\u3057\u3066\u3001\u30b3\u30fc\u30c9\u8cc7\u7523\u3092\u4f7f\u3044\u307e\u308f\u3059\u3068\u52b9\u7387\u7684\u3067\u3059\u3002\\n\u7d30\u304b\u3044\u6587\u6cd5\u306a\u3069\u306f\u89e6\u3063\u3066\u3044\u306a\u3044\u3068\u5fd8\u308c\u304c\u3061\u306a\u306e\u3067\u3001\u3088\u304f\u4f7f\u3046\u30b9\u30cb\u30da\u30c3\u30c8\u306f\u4f7f\u3044\u307e\u308f\u305b\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304f\u3068\u3088\u3044\u3067\u3057\u3087\u3046\u3002\\n\\n```powershell title=\\"Install PowerShell modules\\"\\n#!/usr/bin/env pwsh\\n\\nWrite-Host \\"Running \\"$MyInvocation.MyCommand.Name\\" ...\\"\\n\\nSet-PSRepository -Name \'PSGallery\' -InstallationPolicy Trusted\\n\\n$modules = @(\\n    \\"Microsoft.Graph\\"\\n    \\"Pester\\"\\n)\\n\\nforeach ($module in $modules) {\\n    Write-Host \\"Installing $module\\"\\n    Install-Module -Name $module -Scope CurrentUser\\n}\\n```\\n\\n```powershell title=\\"PowerShell module: mymodule.psm1\\"\\n# mymodule \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\\n$global:MyModuleVersion = \\"v0.0.1\\"\\n\\nfunction Initialize-MyModule {\\n    # do something\\n}\\n\\nExport-ModuleMember -Variable MyModuleVersion\\nExport-ModuleMember -Function Initialize-MyModule\\n```\\n\\n```powershell title=\\"PowerShell script: client.test.ps1\\"\\n# unit test by Pester\\nusing module \\"./mymodule.psm1\\"\\n\\nDescribe \\"Smoke test\\" {\\n    Context \\"Nominal case\\" {\\n        It \\"Check global variables\\" {\\n            # version variable settings\\n            $MyModuleVersion | Should Be \\"v0.0.1\\"\\n        }\\n    }\\n}\\n```\\n\\n## \u9759\u7684\u89e3\u6790\\n\\n[PowerShell/PSScriptAnalyzer](https://github.com/PowerShell/PSScriptAnalyzer)\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\\n\\n```powershell\\nInstall-Module -Name PSScriptAnalyzer -Scope CurrentUser\\n```\\n\\n\u4f7f\u3044\u65b9\u306f [PSScriptAnalyzer\u3092\u4f7f\u3063\u3066PowerShell\u306e\u30b3\u30fc\u30c9\u3092\u30ad\u30ec\u30a4\u306b\u4fdd\u3068\u3046](https://qiita.com/nimzo6689/items/1c55c6782027a78a51e5)\u3092\u53c2\u7167\u3057\u307e\u3059\u3002\\n\\n## \u30c6\u30b9\u30c8\\n\\n\u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3068\u3057\u3066[Pester / Quick Start](https://pester.dev/docs/quick-start/)\u3092\u4f7f\u3044\u307e\u3059\u3002\\n\\n```powershell\\nInstall-Module -Name Pester -Scope CurrentUser\\n```\\n\\n## Docker\\n\\nPowerShell \u30b9\u30af\u30ea\u30d7\u30c8\u306e\u518d\u73fe\u6027\u62c5\u4fdd\u306e\u305f\u3081\u306b\u3001Docker \u30b3\u30f3\u30c6\u30ca\u4e0a\u3067\u958b\u767a\u3057\u305f\u3044\u5834\u5408\u3001\u30d9\u30fc\u30b9\u3068\u306a\u308b\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u306f [mcr.microsoft.com/powershell](https://mcr.microsoft.com/en-us/product/powershell/tags) \u306b\u3042\u308a\u307e\u3059\u3002\u5fc5\u8981\u306a tag \u3092\u6307\u5b9a\u3057\u3066\u5229\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002\\n\u7279\u306b\u3001PowerShell module \u304c\u5ec3\u6b62\u306b\u306a\u308b\u5834\u5408\u3001\u305d\u306e module \u306e\u4f9d\u5b58\u3092\u5265\u304c\u3059\u958b\u767a\u3092\u3059\u308b\u5834\u5408\u306a\u3069\u3067\u91cd\u5b9d\u3057\u307e\u3057\u305f\u3002"},{"id":"azure-developer-cli-get-started","metadata":{"permalink":"/blog/azure-developer-cli-get-started","source":"@site/blog/2023-03-07-azure-developer-cli-get-started.md","title":"Azure Developer CLI \u306b\u3088\u308b\u958b\u767a\u30d7\u30ed\u30bb\u30b9\u306e\u9ad8\u901f\u5316","description":"\u5b9f\u969b\u306b Azure Developer CLI \u3092\u4f7f\u3063\u3066\u307f\u3066\u826f\u304b\u3063\u305f\u70b9\u3084\u3001\u53c2\u8003\u3068\u306a\u308b\u30b5\u30a4\u30c8\u306b\u3064\u3044\u3066\u7e8f\u3081\u307e\u3059\u3002","date":"2023-03-07T00:00:00.000Z","tags":[{"inline":true,"label":"azure","permalink":"/blog/tags/azure"},{"inline":true,"label":"azd","permalink":"/blog/tags/azd"}],"readingTime":5.59,"hasTruncateMarker":true,"authors":[{"name":"ks6088ts","title":"Software Engineer / Solutions Architect","url":"https://github.com/ks6088ts","imageURL":"https://github.com/ks6088ts.png","key":"ks6088ts","page":null}],"frontMatter":{"slug":"azure-developer-cli-get-started","title":"Azure Developer CLI \u306b\u3088\u308b\u958b\u767a\u30d7\u30ed\u30bb\u30b9\u306e\u9ad8\u901f\u5316","authors":"ks6088ts","tags":["azure","azd"]},"unlisted":false,"prevItem":{"title":"PowerShell \u30b9\u30af\u30ea\u30d7\u30c8\u958b\u767a\u74b0\u5883\u306e\u69cb\u7bc9","permalink":"/blog/powershell-development-environment"},"nextItem":{"title":"GitHub Pages by Docusaurus","permalink":"/blog/gh-pages-by-docusaurus"}},"content":"\u5b9f\u969b\u306b Azure Developer CLI \u3092\u4f7f\u3063\u3066\u307f\u3066\u826f\u304b\u3063\u305f\u70b9\u3084\u3001\u53c2\u8003\u3068\u306a\u308b\u30b5\u30a4\u30c8\u306b\u3064\u3044\u3066\u7e8f\u3081\u307e\u3059\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n# Azure Developer CLI \u3068\u306f\\n\\nAzure Developer CLI (\u4ee5\u4e0b\u3001`azd`) \u306f\u3001Azure \u4e0a\u3067\u30af\u30e9\u30a6\u30c9\u30a2\u30d7\u30ea\u3092\u30d3\u30eb\u30c9\u3059\u308b\u30d7\u30ed\u30bb\u30b9\u3092\u9ad8\u901f\u5316\u3059\u308b\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u30c4\u30fc\u30eb\u3067\u3059\u3002  \\n\u898f\u5b9a\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u9020\u3092\u3082\u3064\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u6307\u5b9a\u3057\u3066\u3001`azd` \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092 Azure \u4e0a\u306b\u30c7\u30d7\u30ed\u30a4\u3067\u304d\u307e\u3059\u3002  \\n\u3053\u308c\u3089\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b3\u30fc\u30c9\u30fbIaC \u30d5\u30a1\u30a4\u30eb(`Bicep` or `Terraform`)\u30fb\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u69cb\u9020\u3092\u8a18\u8ff0\u3059\u308b `azure.yaml` \u30d5\u30a1\u30a4\u30eb\u304b\u3089\u69cb\u6210\u3055\u308c\u307e\u3059\u3002  \\n\u3053\u3061\u3089\u3067\u306f\u7c21\u5358\u306a\u4f7f\u3044\u65b9\u304c\u7d39\u4ecb\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\n\\n<iframe width=\\"560\\" height=\\"315\\" src=\\"https://www.youtube.com/embed/VTk-FhJyo7s\\" title=\\"YouTube video player\\" frameborder=\\"0\\" allow=\\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\\" allowfullscreen></iframe>\\n\\n`azd` \u3092\u4f7f\u3046\u3068\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u7c21\u5358\u304b\u3064\u518d\u73fe\u6027\u306e\u3042\u308b\u5f62\u3067\u30c7\u30d7\u30ed\u30a4\u3067\u304d\u307e\u3059\u3002  \\n\u3084\u308a\u305f\u3044\u3053\u3068\u306b\u8fd1\u3057\u3044\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u63a2\u3057\u3066\u3001\u305d\u3053\u304b\u3089\u8a2d\u5b9a\u5909\u66f4\u3084\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u5fae\u4fee\u6b63\u3057\u3066\u3044\u304f\u3068\u3001\u958b\u767a\u5de5\u6570\u304c\u5927\u5e45\u306b\u524a\u6e1b\u3067\u304d\u307e\u3059\u3002\\n\\n[Azure/awesome-azd](https://github.com/Azure/awesome-azd)\u306b\u306f azd \u95a2\u9023\u306e\u30d6\u30ed\u30b0\u8a18\u4e8b\u3084\u52d5\u753b\u306a\u3069\u306e\u60c5\u5831\u304c\u307e\u3068\u307e\u3063\u3066\u3044\u307e\u3059\u3002  \\n`azd` \u4e92\u63db\u306a\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306f\u4ee5\u4e0b\u306e\u30ea\u30f3\u30af\u304b\u3089\u63a2\u305b\u307e\u3059\u3002\\n\\n- [Awesome AZD Templates Gallery](https://aka.ms/awesome-azd): azd \u4e92\u63db\u306a\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304c\u691c\u7d22\u53ef\u80fd\u306a\u30b5\u30a4\u30c8\\n- [Azure Developer CLI templates](https://github.com/topics/azd-templates): GitHub \u3067 `Azure Developer CLI templates` topic \u304c\u3064\u3044\u3066\u3044\u308b\u3082\u306e\\n\\n# Azure Developer CLI \u306e\u30cf\u30f3\u30ba\u30aa\u30f3\\n\\n\u30cf\u30f3\u30ba\u30aa\u30f3\u3068\u3044\u3063\u3066\u3082\u30c4\u30fc\u30eb\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u3060\u3051\u306a\u306e\u3067\u6570\u5206\u3067\u5b8c\u7d50\u3057\u307e\u3059\u3002  \\n\u307e\u305a\u306f `azd` \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002  \\n[Azure Developer CLI\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b (\u30d7\u30ec\u30d3\u30e5\u30fc)](https://learn.microsoft.com/ja-jp/azure/developer/azure-developer-cli/install-azd?tabs=localinstall%2Cwindows%2Cbrew) \u3092\u53c2\u8003\u306b\u3001\u958b\u767a\u74b0\u5883\u306e OS \u306b\u5fdc\u3058\u305f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\u3092\u5b9f\u884c\u3057\u3001`azd` \u30b3\u30de\u30f3\u30c9\u304c\u901a\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002  \\n\u305f\u3068\u3048\u3070 Linux/macOS \u306e\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u307e\u3059\u3002\\n\\n```shell title=\\"azd \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\\"\\n$ curl -fsSL https://aka.ms/install-azd.sh | bash\\n```\\n\\n\u6b21\u306b `azd` \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3063\u3066 Azure \u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3001\u8a8d\u8a3c\u60c5\u5831\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002  \\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u307e\u3059\u3002\\n\\n```shell title=\\"Azure \u306b\u30ed\u30b0\u30a4\u30f3\\"\\n$ azd login\\nLogged in to Azure.\\n```\\n\\n\u9069\u5f53\u306a\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u6307\u5b9a\u3057\u3066 `azd` \u3067 Azure \u306b\u30c7\u30d7\u30ed\u30a4\u3057\u307e\u3059\u3002  \\n\u3053\u3053\u3067\u306f [Azure-Samples/todo-nodejs-mongo-terraform](https://github.com/Azure-Samples/todo-nodejs-mongo-terraform) \u3092\u6307\u5b9a\u3057\u307e\u3059\u3002  \\n`azd up` \u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u521d\u671f\u5316\u3001\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u3001\u30c7\u30d7\u30ed\u30a4\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\\n\\n```shell title=\\"azd \u3067\u30c7\u30d7\u30ed\u30a4\\"\\n$ azd up --template todo-nodejs-mongo-terraform\\n\\nInitializing a new project (azd init)\\n\\n  (\u2713) Done: Initialized git repository\\n  (\u2713) Done: Downloading template code to: ...\\n\\n? Please enter a new environment name: handson_test\\n\\n? Please enter a new environment name: handson_test\\n? Please select an Azure Subscription to use:\\n? Please select an Azure location to use:  9. (Asia Pacific) Japan East (japaneast)\\n\\nProvisioning Azure resources (azd provision)\\nProvisioning Azure resources can take some time\\n...\\n```\\n\\n`--template` \u306e\u6307\u5b9a\u65b9\u6cd5\u306f\u3001`Azure-Samples/` \u914d\u4e0b\u306e\u30b5\u30f3\u30d7\u30eb\u3067\u3042\u308c\u3070\u4e0a\u8a18\u306e\u3088\u3046\u306b\u30ea\u30dd\u30b8\u30c8\u30ea\u540d\u3060\u3051\u3067\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\u307e\u305f\u3001`https://github.com/Azure-Samples/todo-nodejs-mongo-terraform` \u306e\u3088\u3046\u306b URI \u3092\u30d5\u30eb\u3067\u6307\u5b9a\u3082\u3067\u304d\u307e\u3059\u3002  \\n\\n\u306a\u304a\u3001`azd up` \u306f\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u500b\u5225\u306b\u5b9f\u884c\u3059\u308b\u3053\u3068\u3068\u7b49\u4fa1\u3067\u3059\u3002\\n\\n```shell\\n$ azd init\\n$ azd provision\\n$ azd deploy\\n```\\n\\n\u516c\u5f0f\u306e [VS Code extension](https://marketplace.visualstudio.com/items?itemName=ms-azuretools.azure-dev) \u3082\u3042\u308b\u306e\u3067\u3001VS Code \u4e0a\u306e\u64cd\u4f5c\u3067 `azd` \u306e\u5404\u7a2e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\\n\\n# \u4f55\u304c\u5b09\u3057\u3044\u306e\u304b\\n\\n\u4eca\u6642\u3001\u65b0\u898f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u7acb\u3061\u4e0a\u3052\u3088\u3046\u3068\u3059\u308b\u3068\u3001CI/CD pipeline\u3001dev container\u3001vscode \u8a2d\u5b9a\u3001linter/formatter\u3001IaC \u306a\u3069\u3001\u3084\u308b\u3053\u3068\u304c\u591a\u3044\u3067\u3059\u3002  \\n\u307b\u3068\u3093\u3069\u306e\u4f5c\u696d\u306f\u5b9a\u578b\u7684\u306a\u4f5c\u696d\u3067\u306f\u3042\u308b\u306e\u3067\u3001\u3053\u306e\u8fba\u3092\u4e38\u3063\u3068\u62bd\u8c61\u5316\u3057\u3066\u9069\u5207\u306a\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u3092\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u5074\u3067\u4e0e\u3048\u3066\u304f\u308c\u308b\u70b9\u304c\u5b09\u3057\u3044\u30dd\u30a4\u30f3\u30c8\u3067\u3059\u3002\\n\\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u53d6\u3063\u639b\u304b\u308a\u306b\u3057\u3066\u3001\u5fc5\u8981\u306a\u5909\u66f4\u3092\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306b\u5165\u308c\u305f\u308a\u3001\u8a2d\u5b9a\u5024\u3092\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u3059\u308b\u3060\u3051\u3067\u3084\u308a\u305f\u3044\u3053\u3068\u306b\u65e9\u304f\u8fd1\u3065\u3051\u307e\u3059\u3002  \\n\u4eca\u5f8c\u3055\u3089\u306b azd \u4e92\u63db\u306a\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304c\u5897\u3048\u308c\u3070\u305d\u306e\u52e2\u3044\u306f\u5897\u3057\u3066\u3044\u304d\u307e\u3059\u3002\\n\\n\u3053\u306e\u624b\u306e scaffolding \u30c4\u30fc\u30eb\u306f\u65e2\u306b\u4e16\u306e\u4e2d\u306b\u3042\u308a\u3001template repo \u3092 fork \u3057\u305f\u308a cookiecutter \u3092\u4f7f\u3046\u306e\u3068\u307b\u307c\u7b49\u4fa1\u3067\u306f\u3042\u308a\u307e\u3059\u3002\u304c\u3001\u4ee5\u4e0b\u306e\u70b9\u304c `azd` \u306a\u3089\u3067\u306f\u306e\u30e1\u30ea\u30c3\u30c8\u3067\u3059\u3002\\n\\n- \u5229\u7528\u8005\u306f CLI \u3067\u5b8c\u7d50\u3057\u3066\u4f5c\u696d\u3067\u304d\u308b\\n- \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u968e\u5c64\u306e\u898f\u7d04\u304c\u3042\u308b\u306e\u3067\u5229\u7528\u8005\u306e\u8a8d\u77e5\u8ca0\u8377\u304c\u4f4e\u3044\\n\\n[Azure/reliable-web-app-pattern-dotnet](https://github.com/Azure/reliable-web-app-pattern-dotnet) \u306e\u3088\u3046\u306b production grade \u306a\u3082\u306e\u3082\u958b\u767a\u3055\u308c\u3066\u3044\u307e\u3059\u3002  \\nAzure \u30e6\u30fc\u30b6\u30fc\u306e\u751f\u7523\u6027\u3092\u5411\u4e0a\u3055\u305b\u308b\u30a8\u30b3\u30b7\u30b9\u30c6\u30e0\u306e\u767a\u5c55\u304c\u3001\u3088\u308a\u591a\u304f\u306e\u3053\u3068\u3092\u5c11\u306a\u3044\u624b\u9593\u3067\u5b9f\u73fe\u3059\u308b\u305f\u3081\u306e\u4e00\u52a9\u306b\u306a\u308b\u306e\u3067\u306f\u3068\u671f\u5f85\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n# TODO\\n\\n## azd \u4e92\u63db\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\\n\\n[`azd` conventions](https://learn.microsoft.com/en-us/azure/developer/azure-developer-cli/make-azd-compatible?pivots=azd-create#azd-conventions)\u306b\u5f93\u3063\u3066\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\\n\\n## azd \u306b contribute \u3059\u308b\\n\\nCLI \u3068 extension \u306f monorepo \u69cb\u6210\u3067[Azure/azure-dev](https://github.com/Azure/azure-dev)\u306b\u3066\u958b\u767a\u3055\u308c\u3066\u3044\u307e\u3059\u3002\\nextension \u306f TypeScript\u3001azd \u672c\u4f53\u306f Go \u3067\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u3002"},{"id":"gh-pages-by-docusaurus","metadata":{"permalink":"/blog/gh-pages-by-docusaurus","source":"@site/blog/2023-03-06-gh-pages-by-docusaurus.md","title":"GitHub Pages by Docusaurus","description":"A note for deploying a static site built with docusaurus on GitHub Pages","date":"2023-03-06T00:00:00.000Z","tags":[{"inline":true,"label":"docusaurus","permalink":"/blog/tags/docusaurus"}],"readingTime":0.48,"hasTruncateMarker":true,"authors":[{"name":"ks6088ts","title":"Software Engineer / Solutions Architect","url":"https://github.com/ks6088ts","imageURL":"https://github.com/ks6088ts.png","key":"ks6088ts","page":null}],"frontMatter":{"slug":"gh-pages-by-docusaurus","title":"GitHub Pages by Docusaurus","authors":"ks6088ts","tags":["docusaurus"]},"unlisted":false,"prevItem":{"title":"Azure Developer CLI \u306b\u3088\u308b\u958b\u767a\u30d7\u30ed\u30bb\u30b9\u306e\u9ad8\u901f\u5316","permalink":"/blog/azure-developer-cli-get-started"},"nextItem":{"title":"Terraform provider for SORACOM \u3092\u4f5c\u3063\u3066 Azure Functions \u3068\u9023\u643a\u3057\u3066\u307f\u305f","permalink":"/blog/terraform-provider-soracom"}},"content":"A note for deploying a static site built with docusaurus on GitHub Pages\\n\\n\x3c!--truncate--\x3e\\n\\n## Get started\\n\\n### Scaffold project website\\n\\n- Reference: [Docusaurus / Installation / Scaffold project website](https://docusaurus.io/docs/installation#scaffold-project-website)\\n\\n```shell\\nnpx create-docusaurus@latest ks6088ts-labs.github.io classic --typescript\\n```\\n\\n### Docusaurus configurations\\n\\n- Reference: [docusaurus.config.js](https://docusaurus.io/docs/api/docusaurus-config)\\n- Commit: [update settings for docusaurus](https://github.com/ks6088ts/ks6088ts.github.io/commit/c02e76e5f68febeeb6c4cd2df02a0473f762e9fb)\\n\\n### Deploy to GitHub Actions with GitHub Actions\\n\\n- Reference: [Docusaurus / Deployment / Triggering deployment with GitHub Actions](https://docusaurus.io/docs/deployment#triggering-deployment-with-github-actions)\\n- Commit: [add deploy action](https://github.com/ks6088ts/ks6088ts.github.io/commit/f27953ff6b308eb61986d7941f779f0a24fc57ef)\\n\\n### Update GitHub Settings\\n\\n- [remote: Permission to git denied to github-actions[bot]. #96](https://github.com/ad-m/github-push-action/issues/96#issuecomment-889984928)\\n- [Configuring a publishing source for your GitHub Pages site](https://docs.github.com/en/pages/getting-started-with-github-pages/configuring-a-publishing-source-for-your-github-pages-site)"},{"id":"terraform-provider-soracom","metadata":{"permalink":"/blog/terraform-provider-soracom","source":"@site/blog/2022-12-10-terraform-provider-soracom/index.md","title":"Terraform provider for SORACOM \u3092\u4f5c\u3063\u3066 Azure Functions \u3068\u9023\u643a\u3057\u3066\u307f\u305f","description":"Terraform \u3067 SORACOM \u306e\u30ea\u30bd\u30fc\u30b9\u7ba1\u7406\u3092\u3057\u305f\u304b\u3063\u305f\u306e\u3067\u3001SORACOM \u5411\u3051\u306e Terraform \u30ab\u30b9\u30bf\u30e0\u30d7\u30ed\u30d0\u30a4\u30c0\u3092\u5b9f\u88c5\u3057\u3066\u307f\u307e\u3057\u305f\u3002\u30ab\u30b9\u30bf\u30e0\u30d7\u30ed\u30d0\u30a4\u30c0\u958b\u767a\u306b\u4fc2\u308b\u77e5\u898b\u3084\u3001Terraform provider for SORACOM \u3067 SORACOM \u306e\u30ea\u30bd\u30fc\u30b9\u7ba1\u7406\u3092\u3057\u3066\u307f\u305f\u4f8b\u3092\u3054\u7d39\u4ecb\u3057\u307e\u3059\u3002","date":"2022-12-10T00:00:00.000Z","tags":[{"inline":true,"label":"terraform","permalink":"/blog/tags/terraform"},{"inline":true,"label":"azure","permalink":"/blog/tags/azure"}],"readingTime":26.15,"hasTruncateMarker":true,"authors":[{"name":"ks6088ts","title":"Software Engineer / Solutions Architect","url":"https://github.com/ks6088ts","imageURL":"https://github.com/ks6088ts.png","key":"ks6088ts","page":null}],"frontMatter":{"slug":"terraform-provider-soracom","title":"Terraform provider for SORACOM \u3092\u4f5c\u3063\u3066 Azure Functions \u3068\u9023\u643a\u3057\u3066\u307f\u305f","authors":"ks6088ts","tags":["terraform","azure"]},"unlisted":false,"prevItem":{"title":"GitHub Pages by Docusaurus","permalink":"/blog/gh-pages-by-docusaurus"}},"content":"Terraform \u3067 SORACOM \u306e\u30ea\u30bd\u30fc\u30b9\u7ba1\u7406\u3092\u3057\u305f\u304b\u3063\u305f\u306e\u3067\u3001SORACOM \u5411\u3051\u306e Terraform \u30ab\u30b9\u30bf\u30e0\u30d7\u30ed\u30d0\u30a4\u30c0\u3092\u5b9f\u88c5\u3057\u3066\u307f\u307e\u3057\u305f\u3002\u30ab\u30b9\u30bf\u30e0\u30d7\u30ed\u30d0\u30a4\u30c0\u958b\u767a\u306b\u4fc2\u308b\u77e5\u898b\u3084\u3001Terraform provider for SORACOM \u3067 SORACOM \u306e\u30ea\u30bd\u30fc\u30b9\u7ba1\u7406\u3092\u3057\u3066\u307f\u305f\u4f8b\u3092\u3054\u7d39\u4ecb\u3057\u307e\u3059\u3002  \\n\\n1. Terraform \u306e\u30ab\u30b9\u30bf\u30e0\u30d7\u30ed\u30d0\u30a4\u30c0\u306e\u6982\u8981\\n2. SORACOM \u5411\u3051\u30ab\u30b9\u30bf\u30e0\u30d7\u30ed\u30d0\u30a4\u30c0\u306e\u5b9f\u88c5\\n3. SORACOM x Azure Functions \u306e\u5229\u7528\u4f8b\\n\\n\u3068\u3044\u3063\u305f\u7ae0\u7acb\u3066\u3067\u307e\u3068\u3081\u3066\u307f\u307e\u3059\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n---\\n\\n## **1. Terraform \u306e\u30ab\u30b9\u30bf\u30e0\u30d7\u30ed\u30d0\u30a4\u30c0\u306e\u6982\u8981**\\n\\n### **Why IaC ?**\\n\\n\u305d\u3082\u305d\u3082\u306a\u305c IaC \u304c\u5fc5\u8981\u306a\u306e\u304b\uff1f\u3068\u3044\u3046\u3068\u3053\u308d\u304b\u3089\u3001\u79c1\u306e\u904e\u53bb\u306e\u7d4c\u9a13\u3092\u5143\u306b\u6574\u7406\u3057\u3066\u307f\u307e\u3059\u3002  \\n\\n\u65b0\u3057\u3044\u3082\u306e\u306f\u305f\u3044\u3066\u3044\u6016\u3044\u3082\u306e\u3067\u3001\u521d\u898b\u3067\u306f `\u300c\u30a6\u30a7\u30d6\u30b3\u30f3\u30bd\u30fc\u30eb\u3068\u304b CLI \u30c4\u30fc\u30eb\u3067\u5341\u5206\u3067\u3057\u3087\uff1fIaC \u30c4\u30fc\u30eb\u3063\u3066\u3044\u3089\u306a\u304f\u306a\u3044\u3067\u3059\u304b\uff1f\u300d` \u3068\u3044\u3063\u305f\u6c17\u6301\u3061\u3067\u3057\u305f\u3002  \\n\u78ba\u304b\u306b CLI \u30c4\u30fc\u30eb\u306f\u4f55\u304b\u306e\u30ea\u30bd\u30fc\u30b9\u306e\u64cd\u4f5c\u3084\u72b6\u614b\u306e\u78ba\u8a8d\u306a\u3069\u306e\u76ee\u7684\u3067\u624b\u8efd\u306b\u5229\u7528\u3067\u304d\u3066\u4fbf\u5229\u3067\u3059\u3002CLI \u30c4\u30fc\u30eb\u3092\u99c6\u4f7f\u3057\u305f\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u3082 IaC \u30c4\u30fc\u30eb\u3067\u5b9f\u65bd\u3057\u3066\u3044\u308b\u3088\u3046\u306a\u30ea\u30bd\u30fc\u30b9\u7ba1\u7406\u3092 \\"\u6280\u8853\u7684\u306b\u306f\\" \u5b9f\u73fe\u3067\u304d\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002  \\n\u5b9f\u969b\u306b CLI \u3067\u30ea\u30bd\u30fc\u30b9\u306e\u7ba1\u7406\u3092\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u3001\u624b\u7d9a\u304d\u7684\u306a\u51e6\u7406\u3092\u66f8\u304f\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\u30ea\u30bd\u30fc\u30b9\u306e\u5dee\u5206\u30c1\u30a7\u30c3\u30af\u3084\u500b\u3005\u306e\u51e6\u7406\u306e\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u306a\u3069\u3001\u5b9f\u306f\u53b3\u5bc6\u306b\u3084\u308d\u3046\u3068\u3059\u308b\u3068\u8003\u616e\u3059\u308b\u3053\u3068\u304c\u591a\u304f\u3066\u306a\u304b\u306a\u304b\u5927\u5909\u3067\u3059\u3002\u7d50\u679c\u3001\u8907\u96d1\u3067\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u304c\u56f0\u96e3\u306a\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u51fa\u6765\u4e0a\u304c\u3063\u305f\u308a\u3057\u307e\u3059\u3002  \\n\u3068\u307e\u3041\u3053\u3053\u307e\u3067\u624b\u3092\u52d5\u304b\u3057\u3066\u307f\u3066\u3088\u3046\u3084\u304f\u91cd\u3044\u8170\u3092\u4e0a\u3052\u3066 IaC \u30c4\u30fc\u30eb\u3092\u89e6\u3063\u3066\u307f\u308b\u304b\u3001\u3068\u3044\u3046\u3053\u3068\u306b\u306a\u308a\u307e\u3057\u305f\u3002\u5b9f\u969b\u306b\u4f7f\u3063\u3066\u307f\u308b\u3068\u3001CLI \u3067\u8003\u616e\u3059\u308b\u5fc5\u8981\u306e\u3042\u3063\u305f\u5dee\u5206\u30c1\u30a7\u30c3\u30af\u3084\u3089\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3068\u3044\u3063\u305f\u8907\u96d1\u3055\u3092\u30c4\u30fc\u30eb\u304c\u4e38\u3063\u3068\u9762\u5012\u3092\u898b\u3066\u304f\u308c\u308b\u304a\u304b\u3052\u3067\u3001\u671b\u307e\u3057\u3044\u30ea\u30bd\u30fc\u30b9\u306e\u72b6\u614b\u3092\u5ba3\u8a00\u7684\u306b\u8a18\u8ff0\u3057\u3066\u30c4\u30fc\u30eb\u306b\u55b0\u308f\u305b\u308b\u3060\u3051\u306b\u306a\u308b\u306e\u3067\u3059\u3002\u30ea\u30bd\u30fc\u30b9\u8a2d\u5b9a\u3092\u74b0\u5883\u306e\u518d\u73fe\u6027\u3092\u3082\u305f\u305b\u3066\u79fb\u7ba1\u3059\u308b\u3068\u3044\u3063\u305f\u3053\u3068\u3082\u7c21\u5358\u306b\u306a\u308a\u307e\u3059\u3002\u958b\u767a\u8005\u4f53\u9a13\u304c\u98db\u8e8d\u7684\u306b\u9032\u6b69\u3057\u305f\u611f\u3058\u304c\u3057\u307e\u3059\u3002  \\nIaC \u30c4\u30fc\u30eb\u304c\u3053\u308c\u3060\u3051\u4fbf\u5229\u3060\u3068\u3001\u3044\u3064\u3044\u304b\u306a\u308b\u6642\u3082 IaC \u304c\u3057\u305f\u304f\u306a\u308b\u75c5\u306b\u99c6\u3089\u308c\u3066\u3061\u3087\u3063\u3068\u3057\u305f\u691c\u8a3c\u3068\u304b\u3067 IaC \u3059\u308b\u30aa\u30fc\u30d0\u30fc\u30a8\u30f3\u30b8\u30cb\u30a2\u30ea\u30f3\u30b0\u3092\u3057\u305f\u6642\u671f\u3082\u3042\u308a\u307e\u3057\u305f\u3002[TypeScript\u4f9d\u5b58\u306e\u60aa\u5faa\u74b0](https://www.google.com/search?q=Typescript%E4%BE%9D%E5%AD%98%E3%81%AE%E6%82%AA%E5%BE%AA%E7%92%B0&sxsrf=ALiCzsbbYTvTMh39om3QUsgRGj7nvS3Z4w:1668426679347&source=lnms&tbm=isch&sa=X&ved=2ahUKEwj7iLncza37AhVZmFYBHe94BKoQ_AUoAXoECBkQAw&biw=1080&bih=1724&dpr=1) \u3092\u60f3\u8d77\u3057\u307e\u3059\u306d\u3002  \\nIaC \u5316\u3059\u308b\u306b\u3082\u4f5c\u696d\u30b3\u30b9\u30c8\u304c\u304b\u304b\u308b\u306e\u3067\u3001`\u4ed6\u8005\u3068\u5354\u696d\u3059\u308b`\u3068\u304b`\u69cb\u7bc9\u3059\u308b\u30b7\u30b9\u30c6\u30e0\u304c\u5927\u898f\u6a21\u30fb\u8907\u96d1`\u306b\u306a\u3063\u3066\u304d\u305f\u3068\u304d\u306b\u3001IaC \u3092\u691c\u8a0e\u3059\u308b\u3068\u30d0\u30e9\u30f3\u30b9\u304c\u826f\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u3002\\n\\n- CLI \u306f\u3042\u304f\u307e\u3067\u30ef\u30f3\u30b7\u30e7\u30c3\u30c8\u306e\u30bf\u30b9\u30af\u306e\u5b9f\u884c\u3068\u3044\u3063\u305f `\u52d5\u7684\u306a\u64cd\u4f5c` \u3092\u652f\u63f4\u3059\u308b\u30c4\u30fc\u30eb\\n- IaC \u30c4\u30fc\u30eb\u306f\u30ea\u30bd\u30fc\u30b9\u306e\u69cb\u7bc9\u3068\u3044\u3063\u305f`\u9759\u7684\u306a\u64cd\u4f5c`\u3092\u652f\u63f4\u3059\u308b\u30c4\u30fc\u30eb\\n\\n\u3068\u3044\u3046\u8a8d\u8b58\u3092\u6301\u3063\u3066\u3001\u7528\u6cd5\u5bb9\u91cf\u3092\u5b88\u3063\u3066\u6b63\u3057\u304f\u4f7f\u3044\u5206\u3051\u308b\u306e\u304c\u826f\u3055\u305d\u3046\u3067\u3059\u3002\\n\\n### **Terraform \u3063\u3066\u4f55\uff1f**\\n\\nIaC \u30c4\u30fc\u30eb\u3068\u3057\u3066\u30ab\u30c6\u30b4\u30e9\u30a4\u30ba\u3055\u308c\u308b\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3068\u3057\u3066\u306f\u3001[AWS CDK](https://aws.amazon.com/jp/cdk/)\u30fb[Terraform](https://www.terraform.io/)\u30fb[Bicep](https://learn.microsoft.com/ja-jp/azure/azure-resource-manager/bicep/overview?tabs=bicep) \u306a\u3069\u304c\u3042\u308a\u307e\u3059\u3002  \\n\u4e2d\u3067\u3082 Terraform \u306f\u3001\u30ab\u30b9\u30bf\u30e0\u30d7\u30ed\u30d0\u30a4\u30c0\u3068\u547c\u3070\u308c\u308b pluggable \u306a\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u304c\u5b58\u5728\u3057\u3066\u3044\u3066\u3001\u30ab\u30b9\u30bf\u30e0\u30d7\u30ed\u30d0\u30a4\u30c0\u3092\u5b9f\u88c5\u3057\u3055\u3048\u3059\u308c\u3070 API \u3092\u516c\u958b\u3057\u3066\u3044\u308b Web \u30b5\u30fc\u30d3\u30b9\u306b\u5bfe\u3057\u3066\u30ea\u30bd\u30fc\u30b9\u306e\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002  \\nAWS, Azure, GCP \u306a\u3069\u306e\u30af\u30e9\u30a6\u30c9\u30b5\u30fc\u30d3\u30b9\u306f\u3082\u3061\u308d\u3093\u306e\u3053\u3068\u3001\u65e2\u306b\u6570\u591a\u304f\u306e\u30ab\u30b9\u30bf\u30e0\u30d7\u30ed\u30d0\u30a4\u30c0\u304c [Terraform Registry](https://registry.terraform.io/) \u306b\u516c\u958b\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u4f7f\u3044\u305f\u3044\u30b5\u30fc\u30d3\u30b9\u5411\u3051\u306e\u30d7\u30ed\u30d0\u30a4\u30c0\u304c\u7121\u3044\u304b\u691c\u7d22\u3057\u3066\u307f\u308b\u3068\u9762\u767d\u3044\u3067\u3059\u3002\\n\\n---\\n### **\u30ab\u30b9\u30bf\u30e0\u30d7\u30ed\u30d0\u30a4\u30c0\u306e\u958b\u767a\u306b\u5f79\u7acb\u3064\u8cc7\u6599**\\n\\n\u30ab\u30b9\u30bf\u30e0\u30d7\u30ed\u30d0\u30a4\u30c0\u306e\u5b9f\u88c5\u306b\u95a2\u3057\u3066\u3001\u79c1\u304c\u8aad\u3093\u3067\u53c2\u8003\u306b\u306a\u3063\u305f\u8cc7\u6599\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002  \\n\\n- **[HashiCorp / What is Terraform?](https://developer.hashicorp.com/terraform/intro)**\\n    - \u307e\u305a\u306f\u4e00\u6b21\u60c5\u5831\u306b\u3042\u305f\u308b\u306e\u304c\u8ce2\u660e\u3067\u3059\u3002HashiCorp \u516c\u5f0f\u306e\u60c5\u5831\u306f\u304b\u306a\u308a\u6574\u7406\u3055\u308c\u3066\u3044\u3066\u8aad\u307f\u3084\u3059\u3044\u3067\u3059\u3002\\n- **[Call APIs with Custom SDK Providers](https://developer.hashicorp.com/terraform/tutorials/providers)**\\n    - \u3068\u308a\u3042\u3048\u305a\u4f5c\u3063\u3066\u307f\u3066`\u5b8c\u5168\u306b\u7406\u89e3\u3057\u305f`\u72b6\u614b\u306b\u306a\u308b\u305f\u3081\u306b\u306f\u3001\u3053\u3061\u3089\u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3092\u4e00\u5468\u3059\u308b\u306e\u304c\u304a\u3059\u3059\u3081\u3067\u3059\u3002\u30ab\u30b9\u30bf\u30e0\u30d7\u30ed\u30d0\u30a4\u30c0\u306e\u5b9f\u88c5\u304b\u3089\u3001Terraform Registry \u306b\u516c\u958b\u307e\u3067\u30ad\u30e3\u30c3\u30c1\u30a2\u30c3\u30d7\u3067\u304d\u307e\u3059\u3002\u30ea\u30ea\u30fc\u30b9\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u3092 GitHub Actions \u3067\u69cb\u7bc9\u3059\u308b\u624b\u9806\u306a\u3093\u304b\u3082\u518d\u5229\u7528\u6027\u304c\u9ad8\u304f\u3066\u79c0\u9038\u3067\u3059\u3002  \\n- **[\u30a8\u30ad\u30b9\u30d1\u30fc\u30c8\u305f\u3061\u306eGo\u8a00\u8a9e](https://amzn.to/3fPfHuW)**\\n    - \u3053\u308c\u307e\u3067\u5168\u90e8\u82f1\u8a9e\u306e\u6587\u732e\u3092\u7d39\u4ecb\u3057\u307e\u3057\u305f\u304c\u3001\u300c\u3044\u3084\u3044\u3084\u3001\u65e5\u672c\u8a9e\u304c\u826f\u3044\u3093\u3060\u3051\u3069...\u300d\u3068\u3044\u3046\u65b9\u3082\u3054\u5b89\u5fc3\u3092\u3002`\u30a8\u30ad\u30b9\u30d1\u30fc\u30c8\u305f\u3061\u306eGo\u8a00\u8a9e: 3.5 Custom Terraform Provider \u306b\u3088\u308b\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u306e\u81ea\u52d5\u5316` \u306b\u3082\u30ab\u30b9\u30bf\u30e0\u30d7\u30ed\u30d0\u30a4\u30c0\u306e\u4f5c\u308a\u65b9\u304c\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\u3002\\n\\n---\\n\\n\u3053\u3053\u307e\u3067\u8a18\u4e8b\u3092\u4e00\u901a\u308a\u8aad\u3081\u3070\u3001\u300c\u30ab\u30b9\u30bf\u30e0\u30d7\u30ed\u30d0\u30a4\u30c0\u306a\u3093\u3068\u306a\u304f\u5b9f\u88c5\u3067\u304d\u305d\u3046\u300d\u306a\u72b6\u614b\u306b\u306a\u308a\u307e\u3059\u3002\u3044\u3056\u958b\u767a\u3092\u9032\u3081\u3066\u307f\u308b\u3068\u3001\\n\\n- \u5177\u4f53\u7684\u306b\u3069\u3093\u306a\u5358\u4f4d\u3067\u8cac\u52d9\u3092\u5206\u5272\u3057\u3066\u30d1\u30c3\u30b1\u30fc\u30b8\u306b\u843d\u3068\u3057\u8fbc\u3080\u304b\\n- CI/CD \u306a\u3069\u306e\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u3063\u3066\u3069\u3046\u69cb\u7bc9\u3057\u305f\u3089\u3044\u3044\u306e\u3060\u308d\u3046\u304b\\n\\n\u3068\u3044\u3063\u305f\u60a9\u307f\u304c\u51fa\u3066\u304f\u308b\u30b1\u30fc\u30b9\u3082\u3042\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\u305d\u3093\u306a\u6642\u306f\u65e2\u5b58\u306e\u30ab\u30b9\u30bf\u30e0\u30d7\u30ed\u30d0\u30a4\u30c0\u306e\u5b9f\u88c5\u306e\u4e2d\u306b\u7b54\u3048\u304c\u3042\u308a\u307e\u3059\u3002\u4f8b\u3048\u3070 [hashicorp/terraform-provider-aws](https://github.com/hashicorp/terraform-provider-aws) \u3067\u306f\u3001\\n\\n- `internal/conns` \u4ee5\u4e0b\u3067\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u5468\u308a\u3092\u96c6\u7d04\\n- `internal/service` \u914d\u4e0b\u306b\u5404\u7a2e\u30ea\u30bd\u30fc\u30b9\u3092\u30cf\u30f3\u30c9\u30eb\u3059\u308b\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u914d\u7f6e\\n\\n\u3068\u3044\u3063\u305f\u69cb\u6210\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u300cauthentication \u5468\u308a\u306f conns \u30d1\u30c3\u30b1\u30fc\u30b8\u306b\u96c6\u7d04\u3059\u308b\u300d\u3068\u304b\u300cservice \u30d1\u30c3\u30b1\u30fc\u30b8\u4ee5\u4e0b\u3067\u30b5\u30fc\u30d3\u30b9\u306e\u8ffd\u52a0\u6a5f\u80fd\u3092\u6a2a\u306b\u62e1\u5f35\u3057\u3066\u3044\u304f\u300d\u3068\u3044\u3063\u305f\u53c2\u8003\u306b\u306a\u308b\u8a2d\u8a08\u304c\u591a\u3005\u3042\u308a\u307e\u3057\u305f\u3002\u3069\u3093\u306a\u5f62\u3067\u3042\u308c\u8a2d\u8a08\u30ec\u30d9\u30eb\u3067\u6697\u9ed9\u306e\u524d\u63d0\u304c\u6c7a\u307e\u3063\u3066\u3044\u308b\u3068\u5b9f\u88c5\u65b9\u6cd5\u304c\u4e00\u610f\u306b\u306a\u308a\u3001\u958b\u767a\u306e\u751f\u7523\u6027\u3092\u4e0a\u3052\u3066\u304f\u308c\u308b\u306e\u3067\u4e88\u3081\u6c7a\u3081\u3066\u304a\u304f\u3068\u3088\u3044\u3068\u601d\u3044\u307e\u3059\u3002\\n\\nCI/CD \u306b\u3064\u3044\u3066\u306f\u3001\u4e0a\u3067\u8a00\u53ca\u3057\u305f HashiCorp \u3055\u3093\u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u8a18\u4e8b [Release and Publish a Provider to the Terraform Registry](https://developer.hashicorp.com/terraform/tutorials/providers/provider-release-publish) \u306b\u3001`Git tag \u3092\u6253\u3064\u3068 GitHub Actions \u3067 release \u30b8\u30e7\u30d6\u304c\u56de\u3063\u3066 Terraform Registry \u306b\u81ea\u52d5\u7684\u306b\u516c\u958b\u3055\u308c\u308b` \u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u306e\u8a18\u8ff0\u304c\u3042\u308a\u975e\u5e38\u306b\u53c2\u8003\u306b\u306a\u308a\u307e\u3057\u305f\u3002\u6700\u7d42\u7684\u306b Terraform Registry \u3078\u306e\u516c\u958b\u3082\u60f3\u5b9a\u3059\u308b\u3068\u3001\u3044\u308d\u3093\u306a\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u5411\u3051\u306b\u30d0\u30a4\u30ca\u30ea\u3092\u751f\u6210\u3059\u308b\u5fc5\u8981\u304c\u51fa\u3066\u304d\u307e\u3059\u3002\u3044\u3061\u3044\u3061\u6e29\u304b\u307f\u306e\u3042\u308b\u624b\u4f5c\u696d\u3092\u3057\u3066\u3044\u308b\u3068\u65e5\u304c\u66ae\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u306e\u3067\u3001[goreleaser/goreleaser-action](https://github.com/goreleaser/goreleaser-action) \u3092\u6d3b\u7528\u3057\u3066\u30ea\u30ea\u30fc\u30b9\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u3092 GitHub Actions \u3067\u69cb\u7bc9\u3057\u3066\u304a\u304f\u3068\u826f\u3044\u3067\u3059\u3002\\n\\n### **API \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u4f5c\u308b**\\n\\n\u65e2\u5b58\u306e\u30ab\u30b9\u30bf\u30e0\u30d7\u30ed\u30d0\u30a4\u30c0\u306e\u5b9f\u88c5\u3092\u3044\u304f\u3064\u304b\u898b\u308b\u3068\u308f\u304b\u308b\u3053\u3068\u3067\u3059\u304c\u3001\u30ab\u30b9\u30bf\u30e0\u30d7\u30ed\u30d0\u30a4\u30c0\u306e\u5b9f\u88c5\u306b\u306f\u539f\u5247\u7684\u306b API \u30b3\u30fc\u30eb\u306e\u305f\u3081\u306e\u5b9f\u88c5\u8a73\u7d30\u306f\u542b\u307e\u308c\u3066\u3044\u307e\u305b\u3093\u3002\u3044\u305a\u308c\u3082 API \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30e9\u30a4\u30d6\u30e9\u30ea or SDK \u306b\u5b9f\u88c5\u8a73\u7d30\u3092\u62b1\u3048\u8fbc\u3093\u3067\u3082\u3089\u3063\u3066\u3001provider \u306f\u305d\u308c\u3092\u5229\u7528\u3059\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3068\u3057\u3066\u306e\u69cb\u6210\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002  \\nTerraform plugin \u304c\u3069\u306e\u3088\u3046\u306b\u52d5\u4f5c\u3059\u308b\u306e\u304b\u306e\u6982\u7565\u56f3\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002HashiCorp \u793e\u306e\u8cc7\u6599\u3067\u3082\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30e9\u30a4\u30d6\u30e9\u30ea\u3068\u3057\u3066\u5207\u308a\u96e2\u3059\u8a2d\u8a08\u3092\u63a8\u5968\u3057\u3066\u3044\u307e\u3059\u3002  \\n\\n![Overview](https://content.hashicorp.com/api/assets?product=tutorials&version=main&asset=public%2Fimg%2Fterraform%2Fproviders%2Fcore-plugins-api.png)\\n\\n!!! tip\\n    Tip: We recommend Terraform plugins consume an external API client library, as shown in the diagram above. If one doesn\'t exist, you should create one. This is aligned with modern coding practices of keeping software projects modular.  \\n    \u51fa\u5178: [Perform CRUD Operations with Providers / Terraform plugins](https://developer.hashicorp.com/terraform/tutorials/configuration-language/provider-use?in=terraform%2Fconfiguration-language&utm_offer=ARTICLE_PAGE#terraform-plugins)\\n\\n\u306a\u304a\u3001HashiCorp \u63d0\u4f9b\u306e plugin \u30e9\u30a4\u30d6\u30e9\u30ea\u304c Go \u3067\u66f8\u304b\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u8a00\u8a9e\u3082 Go \u304c\u3088\u3044\u3067\u3059\u3002\\n\\n---\\n\\n## **2. SORACOM \u5411\u3051\u30ab\u30b9\u30bf\u30e0\u30d7\u30ed\u30d0\u30a4\u30c0\u306e\u5b9f\u88c5**\\n\\nSORACOM \u306f SORACOM Funk, SORACOM Funnel \u3068\u3044\u3063\u305f\u5404\u7a2e\u30af\u30e9\u30a6\u30c9\u30d7\u30ed\u30d0\u30a4\u30c0\u3068\u7c21\u5358\u306b\u63a5\u7d9a\u3059\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\u3092\u63d0\u4f9b\u3057\u3066\u3044\u307e\u3059\u3002SORACOM \u304c Terraform \u5bfe\u5fdc\u3059\u308b\u3068\u3053\u308c\u307e\u3067\u624b\u52d5\u3067\u3084\u3063\u3066\u3044\u305f\u8af8\u3005\u306e\u9023\u643a\u8a2d\u5b9a\u4f5c\u696d\u3092\u3059\u3079\u3066 Terraform \u3067\u5b8c\u7d50\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u4fbf\u5229\u306a\u306e\u3067\u306f\uff1f\u3068\u5984\u60f3\u304c\u81a8\u3089\u307f\u3001\u4eca\u56de SORACOM \u5411\u3051\u306b\u30ab\u30b9\u30bf\u30e0\u30d7\u30ed\u30d0\u30a4\u30c0\u3092\u958b\u767a\u3059\u308b\u306b\u81f3\u308a\u307e\u3057\u305f\u3002\\n\\n\u30ab\u30b9\u30bf\u30e0\u30d7\u30ed\u30d0\u30a4\u30c0\u672c\u4f53\u306f Terraform Registry \u306e [ks6088ts/soracom](https://registry.terraform.io/providers/ks6088ts/soracom/latest) \u306b\u516c\u958b\u6e08\u3067\u3059\u306e\u3067\u3059\u3050\u306b\u89e6\u308c\u308b\u72b6\u614b\u3067\u3059\u30022022/12\u6708\u6642\u70b9\u3067 1000 \u56de\u8fd1\u304f\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\u307e\u3060\u307e\u3060\u5de5\u4e8b\u4e2d\u306a\u30dd\u30a4\u30f3\u30c8\u304c\u591a\u3005\u3042\u308a\u307e\u3057\u3066\u3001\u6a5f\u80fd\u304c\u8db3\u308a\u3066\u306a\u304b\u3063\u305f\u308a\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\u624b\u8584\u3060\u3063\u305f\u308a\u3057\u3066\u3044\u308b\u306e\u3067 contribution \u306f\u5927\u6b53\u8fce\u3067\u3059\u3002  \\n\u57fa\u672c\u7684\u306b\u306f [examples](https://github.com/ks6088ts/terraform-provider-soracom/tree/main/examples) \u3092\u5b9f\u884c\u3057\u3066\u3044\u305f\u3060\u304f\u3068\u96f0\u56f2\u6c17\u304c\u3064\u304b\u3081\u308b\u306f\u305a\u3067\u3059\u3002  \\nSORACOM \u5411\u3051\u306e Terraform Provider \u306e\u5b9f\u88c5\u4f5c\u696d\u3068\u3057\u3066\u3001\u5927\u304d\u304f 2 \u3064\u306e\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u3092\u3057\u307e\u3057\u305f\u3002\\n\\n- Step 1. API \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30e9\u30a4\u30d6\u30e9\u30ea [ks6088ts/soracom-sdk-go](https://github.com/ks6088ts/soracom-sdk-go) \u306e\u958b\u767a\\n- Step 2. \u30ab\u30b9\u30bf\u30e0\u30d7\u30ed\u30d0\u30a4\u30c0\u672c\u4f53 [ks6088ts/terraform-provider-soracom](https://github.com/ks6088ts/terraform-provider-soracom) \u306e\u958b\u767a\\n\\n### **Step 1. API \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u958b\u767a**\\n\\nOpenAPI v3 \u306b\u5bfe\u5fdc\u3057\u305f [SORACOM API \u30ea\u30d5\u30a1\u30ec\u30f3\u30b9](https://users.soracom.io/ja-jp/tools/api/reference/) \u304c\u516c\u958b\u3055\u308c\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u3053\u306e\u30b9\u30ad\u30fc\u30de\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u6a5f\u68b0\u7684\u306b Go \u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u751f\u6210\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002  \\n\u305f\u3063\u305f 2 steps \u3067\u3059\u3002\\n\\n1\uff0e\u30b9\u30ad\u30fc\u30de\u30d5\u30a1\u30a4\u30eb [soracom-api.ja.yaml](https://users.soracom.io/swagger/soracom-api.ja.yaml) \u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u3001`specs/api.yaml` \u306b\u7f6e\u304d\u307e\u3059\u3002\\n\\n```shell\\ncurl -sSfL https://users.soracom.io/swagger/soracom-api.ja.yaml --output specs/api.yaml\\n```\\n\\n2\uff0e[OpenAPI Generator](https://openapi-generator.tech/) \u3092\u4f7f\u3063\u3066 1 \u3067\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u4ed5\u69d8\u66f8\u304b\u3089\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u751f\u6210\u3057\u307e\u3059\u3002\\n\\n```shell\\nnpx @openapitools/openapi-generator-cli generate \\\\\\n        --input-spec specs/api.yaml \\\\\\n        --generator-name go \\\\\\n        --output generated/api \\\\\\n        --package-name api \\\\\\n        --git-host github.com \\\\\\n        --git-user-id ks6088ts \\\\\\n        --git-repo-id soracom-sdk-go \\\\\\n        --http-user-agent ks6088ts/soracom-sdk-go/0.0.3\\n```\\n\\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u898b\u3066\u3044\u305f\u3060\u304f\u3068\u3001\u7d50\u69cb\u67d4\u8edf\u306b\u6240\u671b\u306e\u8a2d\u5b9a\u3092\u6ce8\u5165\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002  \\n\u3053\u3053\u3067\u306f user agent \u3084\u30d1\u30c3\u30b1\u30fc\u30b8\u540d\u3092\u597d\u307f\u306e\u8a2d\u5b9a\u306b\u3057\u3066\u30b3\u30fc\u30c9\u751f\u6210\u3057\u3066\u3044\u307e\u3059\u3002  \\n`generated/api` \u4ee5\u4e0b\u306b *.go \u30d5\u30a1\u30a4\u30eb\u304c\u751f\u6210\u3055\u308c\u308c\u3070\u6210\u529f\u3067\u3059\u3002\u3053\u3053\u3067\u751f\u6210\u3055\u308c\u305f\u30e9\u30a4\u30d6\u30e9\u30ea\u306f [ks6088ts/soracom-sdk-go](https://github.com/ks6088ts/soracom-sdk-go) \u3067\u516c\u958b\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n#### GitHub Actions \u3092\u4f7f\u3063\u3066\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30e9\u30a4\u30d6\u30e9\u30ea\u306e CI \u3092\u307e\u308f\u3057\u3066\u307f\u308b\\n\\n\u81ea\u52d5\u751f\u6210\u3057\u305f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u5272\u3068\u3059\u3050\u4f7f\u3048\u307e\u3057\u305f\u304c\u3001\u5ff5\u306e\u305f\u3081\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u5358\u4f53\u30c6\u30b9\u30c8\u3082\u3057\u3066\u304a\u304d\u307e\u3059\u3002\u79c1\u306f commit \u3092\u30c8\u30ea\u30ac\u30fc\u3068\u3057\u3066\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30e9\u30a4\u30d6\u30e9\u30ea\u306e E2E \u30c6\u30b9\u30c8\u3092 GitHub Actions \u3067\u5b9f\u884c\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\\n\\n\u81ea\u52d5\u751f\u6210\u3057\u305f\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u3063\u3066 CI \u30a4\u30f3\u30d5\u30e9\u4e0a\u3067 API \u30b3\u30fc\u30eb\u3059\u308b\u30c6\u30b9\u30c8\u3092\u5b9f\u65bd\u3059\u308b\u305f\u3081\u306b\u306f\u3001\u8a8d\u8a3c\u60c5\u5831(SORACOM \u3067\u3044\u3046\u3068 auth key, auth key id)\u3092\u6e21\u3059\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u8a8d\u8a3c\u30ad\u30fc\u306f\u5f53\u7136\u79d8\u533f\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u306e\u3067\u3001GitHub \u306e Encrypted secrets \u3092\u5229\u7528\u3057\u307e\u3059\u3002\u624b\u9806\u306f [GitHub Docs / Encrypted secrets](https://docs.github.com/en/actions/security-guides/encrypted-secrets) \u306b\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u3002GitHub \u5074\u306e\u8a2d\u5b9a\u304c\u7d42\u308f\u308c\u3070\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u5f62\u3067\u53c2\u7167\u3059\u308b\u3060\u3051\u3067\u3059\u3002\\n`.github/workflows/` \u306b [test.yml](https://github.com/ks6088ts/soracom-sdk-go/blob/main/.github/workflows/test.yml) \u3092\u7f6e\u304f\u3060\u3051\u3067 CI \u304c\u56de\u308a\u307e\u3059\u3002\u4fbf\u5229\u306a\u4e16\u306e\u4e2d\u306b\u306a\u3063\u305f\u3082\u306e\u3067\u3059\u306d\u3002\\n\\n```yaml title=\\".github/workflows/test.yml\\"\\n# \u4e00\u90e8\u3092\u629c\u7c8b\\n      - name: Run CI test\\n        run: make ci-test GOPATH=/home/runner/go\\n        env:\\n          SORACOM_AUTH_KEY: ${{ secrets.SORACOM_AUTH_KEY }}\\n          SORACOM_AUTH_KEY_ID: ${{ secrets.SORACOM_AUTH_KEY_ID }}\\n          COVERAGE_TYPE: ${{ secrets.COVERAGE_TYPE }}\\n```\\n\\n#### \u30c6\u30b9\u30c8\u7528\u306e SORACOM \u8a8d\u8a3c\u30ad\u30fc\u306e\u6a29\u9650\u306f\u6700\u5c0f\u306b\\n\\nSORACOM \u3067\u306f SAM \u30e6\u30fc\u30b6\u3068\u3044\u3046\u30ea\u30bd\u30fc\u30b9\u306b\u5bfe\u3057\u3066 API \u306e\u5b9f\u884c\u6a29\u9650\u3092\u5236\u5fa1\u3057\u305f\u30ad\u30fc\u3092\u6255\u3044\u3060\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002SAM \u30e6\u30fc\u30b6\u306e\u6a29\u9650\u8a2d\u5b9a\u65b9\u6cd5\u306f [SORACOM User \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 / \u6a29\u9650\u8a2d\u5b9a\u306e\u305f\u3081\u306e\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u69cb\u6587](https://users.soracom.io/ja-jp/docs/sam/permission/#)\u3092\u53c2\u7167\u304f\u3060\u3055\u3044\u3002  \\n\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30ea\u30b9\u30af\u3092\u6700\u5c0f\u9650\u306b\u3059\u308b\u305f\u3081\u306b\u3082\u6a29\u9650\u306f\u5fc5\u8981\u6700\u4f4e\u9650\u306e\u3082\u306e\u306b\u3057\u307e\u3059\u3002\u5b9f\u30ea\u30bd\u30fc\u30b9\u306b\u5bfe\u3059\u308b\u7d30\u304b\u3044\u64cd\u4f5c\u3092 CI \u3067\u5b9f\u884c\u3059\u308b\u3053\u3068\u306b\u61f8\u5ff5\u304c\u3042\u308b\u5834\u5408\u306f\u3001\u691c\u8a3c\u3092\u76ee\u7684\u3068\u3057\u3066\u4f7f\u3048\u308b [SORACOM API Sandbox](https://users.soracom.io/ja-jp/tools/api-sandbox/) \u3092\u4f7f\u3063\u3066\u3082\u3088\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\\n\\n### **Step 2. \u30ab\u30b9\u30bf\u30e0\u30d7\u30ed\u30d0\u30a4\u30c0\u672c\u4f53\u306e\u958b\u767a**\\n\\n\u307e\u305a\u306f\u3001\u30e6\u30fc\u30b6\u304c\u89e6\u308b HCL \u306e\u5916\u90e8\u4ed5\u69d8\u3092\u8a2d\u8a08\u3059\u308b\u3053\u3068\u304b\u3089\u958b\u767a\u3092\u59cb\u3081\u307e\u3059\u3002  \\n\u57fa\u672c\u7684\u306b\u306f\u3001\u5bfe\u8c61\u3068\u306a\u308b\u30af\u30e9\u30a6\u30c9\u30d7\u30ed\u30d0\u30a4\u30c0\u306e API \u305d\u306e\u3082\u306e\u3068\u4e00\u5bfe\u4e00\u5bfe\u5fdc\u3055\u305b\u305f\u30b9\u30ad\u30fc\u30de\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u304c\u591a\u3044\u3067\u3059\u3002\u305f\u3060\u3001\u5834\u5408\u306b\u3088\u3063\u3066\u306f\u30ab\u30b9\u30bf\u30e0\u30d7\u30ed\u30d0\u30a4\u30c0\u306e\u5916\u90e8\u4ed5\u69d8\u3068\u3057\u3066\u9732\u51fa\u3059\u3079\u304d\u3067\u306f\u306a\u3044\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u3042\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\u306e\u3061\u306e\u4f7f\u3044\u52dd\u624b\u3084\u5f8c\u65b9\u4e92\u63db\u6027\u62c5\u4fdd\u306e\u3053\u3068\u3092\u8003\u3048\u3066\u3001\u5229\u7528\u8005\u89b3\u70b9\u3067\u4e0d\u8981\u306a\u3082\u306e\u306f\u524a\u9664\u3057\u3066\u5fc5\u8981\u5341\u5206\u306a\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u306b\u306a\u308b\u307e\u3067\u30c0\u30a4\u30a8\u30c3\u30c8\u3055\u305b\u308b\u3068\u5c0f\u56de\u308a\u304c\u5229\u304f\u4ed5\u69d8\u306b\u53ce\u675f\u3059\u308b\u3068\u601d\u3044\u307e\u3059\u3002  \\n\\n\u5916\u90e8\u4ed5\u69d8\u306e\u8a2d\u8a08\u3092\u3057\u3066\u3044\u304f\u4e2d\u3067\u3001**\u4f9d\u5b58\u95a2\u4fc2\u306b\u3042\u308b\u8907\u6570\u306e\u30ea\u30bd\u30fc\u30b9\u306e\u95a2\u4fc2\u3092\u3069\u3046\u8868\u73fe\u3059\u308b\u304b** \u3068\u3044\u3046\u3068\u3053\u308d\u3082\u5c11\u3057\u60a9\u307f\u307e\u3057\u305f\u3002  \\n\u4f8b\u3048\u3070\u30ea\u30bd\u30fc\u30b9 A \u3068\u30ea\u30bd\u30fc\u30b9 B \u304c\u4f9d\u5b58\u95a2\u4fc2\u306b\u3042\u308b\u3053\u3068\u3092\u8868\u73fe\u3059\u308b\u306b\u306f\u3069\u3046\u3059\u308c\u3070\u3088\u3044\u304b\uff1f\u3068\u3044\u3063\u305f\u70b9\u3067\u3059\u3002  \\n\u5b9f\u306f\u3053\u306e\u624b\u306e\u60a9\u307f\u3082\u65e2\u306b\u89e3\u6c7a\u3055\u308c\u3066\u3044\u3066\u3001\u30af\u30e9\u30a6\u30c9\u30b5\u30fc\u30d3\u30b9\u306e\u4e16\u754c\u3067\u3088\u304f\u898b\u304b\u3051\u308b\u300c\u30ea\u30bd\u30fc\u30b9 A \u3092\u30ea\u30bd\u30fc\u30b9 B \u306b\u30a2\u30bf\u30c3\u30c1\u3059\u308b\u30ea\u30bd\u30fc\u30b9 C\u300d\u3092\u65b0\u305f\u306b\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u304c\u591a\u3044\u3088\u3046\u3067\u3059\u3002\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u5bfe\u8c61\u306e\u30a6\u30a7\u30d6\u30b5\u30fc\u30d3\u30b9\u306b\u306f C \u3068\u3044\u3046\u30ea\u30bd\u30fc\u30b9\u306e\u7269\u7406\u7684\u306a\u5b9f\u4f53\u306f\u306a\u3044\u306e\u3067\u3059\u304c\u3001\u30ab\u30b9\u30bf\u30e0\u30d7\u30ed\u30d0\u30a4\u30c0\u306e\u5916\u90e8\u4ed5\u69d8\u306b\u304a\u3044\u3066\u306e\u307f\u5b58\u5728\u3059\u308b\u4eee\u60f3\u7684\u306a\u30ea\u30bd\u30fc\u30b9 C \u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u3067\u3001A \u3068 B \u304c\u76f4\u63a5\u4f9d\u5b58\u95a2\u4fc2\u3092\u6301\u305f\u306a\u3044\u3088\u3046\u306b\u3059\u308b\u306e\u3067\u3059\u3002  \\n`e.g. aws_internet_gateway_attachment, azurerm_virtual_machine_data_disk_attachment`\\n\\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u95a2\u3057\u3066\u306f\u3001[tfplugindocs](https://github.com/hashicorp/terraform-plugin-docs) \u3092\u4f7f\u3046\u3068\u30ab\u30b9\u30bf\u30e0\u30d7\u30ed\u30d0\u30a4\u30c0\u306e Go \u306e\u30b3\u30fc\u30c9\u304b\u3089\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\u751f\u6210\u3055\u308c\u3001**\u30b3\u30fc\u30c9\u3068\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\u540c\u671f** \u3055\u308c\u307e\u3059\u3002  \\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u66f4\u65b0\u306f\u5fd8\u308c\u304c\u3061\u306a\u306e\u3067\u3001CI \u4e0a\u3067\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u751f\u6210\u3057\u3066 commit \u6e08\u307f\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3068 diff \u3092\u53d6\u308b\u306a\u3069\u3057\u3066\u3001\u4ed5\u7d44\u307f\u3067\u30d2\u30e5\u30fc\u30de\u30f3\u30a8\u30e9\u30fc\u3092\u64b2\u6ec5\u3059\u308b\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u63a1\u308b\u3068\u7cbe\u795e\u885b\u751f\u4e0a\u826f\u3044\u3067\u3059\u3002\u79c1\u306f CI \u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u306e\u4e2d\u306b [docs-diff](https://github.com/ks6088ts/terraform-provider-soracom/blob/main/terraform.mk#L26) \u30b3\u30de\u30f3\u30c9\u306b\u3042\u308b\u3088\u3046\u306a\u5f62\u3067\u3001CI \u4e0a\u3067\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u751f\u6210\u51e6\u7406\u3092\u5b9f\u884c\u3057\u305f\u3042\u3068 git diff \u3092\u5b9f\u884c\u3057\u3066\u66f4\u65b0\u5fd8\u308c\u3092\u691c\u77e5\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3057\u305f\u3002\\n\\n---\\n\\n## **3. SORACOM Funk x Azure Functions \u306e\u5229\u7528\u4f8b**\\n\\n\u6700\u5f8c\u306b\u3001SORACOM Funk \u3068 Azure Functions \u306e\u9023\u643a\u3092 Terraform \u3067\u69cb\u7bc9\u3057\u305f\u30b5\u30f3\u30d7\u30eb\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306f [group_configuration_funk_azure_functions_python](https://github.com/ks6088ts/terraform-provider-soracom/tree/main/examples/group_configuration_funk_azure_functions_python) \u306b\u3042\u308a\u307e\u3059\u3002  \\n\u69cb\u6210\u56f3\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\\n\\n![group_configuration_funk_azure_functions_python](./group_configuration_funk_azure_functions_python.svg)\\n\\n\\n\u5b9f\u884c\u306b\u306fSORACOM \u306e\u8a8d\u8a3c\u60c5\u5831\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3068\u3001Azure \u306e\u8a8d\u8a3c\u60c5\u5831\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3084\u30ea\u30bd\u30fc\u30b9\u306e\u8a2d\u5b9a\u306a\u3069\u306f\u5404\u793e\u30e6\u30fc\u30b6\u30b5\u30a4\u30c8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\\n\\n- [SORACOM CLI \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b / \u30b9\u30c6\u30c3\u30d7 2: \u8a8d\u8a3c\u60c5\u5831\u3092\u6e96\u5099\u3059\u308b](https://users.soracom.io/ja-jp/tools/cli/getting-started/#%E3%82%B9%E3%83%86%E3%83%83%E3%83%97-2-%E8%AA%8D%E8%A8%BC%E6%83%85%E5%A0%B1%E3%82%92%E6%BA%96%E5%82%99%E3%81%99%E3%82%8B)\\n- [Azure \u306b\u5bfe\u3057\u3066 Terraform \u3092\u8a8d\u8a3c\u3059\u308b](https://learn.microsoft.com/ja-jp/azure/developer/terraform/authenticate-to-azure?tabs=bash)\\n\\n\u4ee5\u4e0b\u306e\u64cd\u4f5c\u3067\u30a4\u30f3\u30d5\u30e9\u30ea\u30bd\u30fc\u30b9\u304c\u69cb\u7bc9/\u524a\u9664\u304c\u3067\u304d\u307e\u3059\u3002\\n\\n```shell\\n# \u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306e\u53d6\u5f97\\ngit clone git@github.com:ks6088ts/terraform-provider-soracom.git\\ncd terraform-provider-soracom/examples/group_configuration_funk_azure_functions_python\\n\\n# \u30ea\u30bd\u30fc\u30b9\u306e\u69cb\u7bc9\\nterraform init\\nterraform apply\\n\\n# \u30ea\u30bd\u30fc\u30b9\u306e\u524a\u9664\\nterraform destroy -auto-approve\\n```\\n\\n### Azure \u306e\u30ea\u30bd\u30fc\u30b9\\n\\n- \u30ea\u30bd\u30fc\u30b9\u30b0\u30eb\u30fc\u30d7\\n- \u30b9\u30c8\u30ec\u30fc\u30b8\u30a2\u30ab\u30a6\u30f3\u30c8\\n- \u30b5\u30fc\u30d3\u30b9\u30d7\u30e9\u30f3\\n- \u95a2\u6570\u30a2\u30d7\u30ea\\n\\n\u3092\u751f\u6210\u3057\u307e\u3059\u3002\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\\n\\n```tf title=\\"azure.tf\\" linenums=\\"1\\"\\nprovider \\"azurerm\\" {\\n  features {}\\n}\\n\\nresource \\"azurerm_resource_group\\" \\"example\\" {\\n  name     = \\"${var.azure_prefix}-rg\\"\\n  location = var.azure_resource_location\\n}\\n\\nresource \\"azurerm_storage_account\\" \\"example\\" {\\n  name                     = \\"${var.azure_prefix}storageacct\\"\\n  resource_group_name      = azurerm_resource_group.example.name\\n  location                 = azurerm_resource_group.example.location\\n  account_tier             = \\"Standard\\"\\n  account_replication_type = \\"LRS\\"\\n}\\n\\nresource \\"azurerm_service_plan\\" \\"example\\" {\\n  name                = \\"${var.azure_prefix}-sp\\"\\n  location            = azurerm_resource_group.example.location\\n  resource_group_name = azurerm_resource_group.example.name\\n  os_type             = \\"Linux\\"\\n  sku_name            = \\"S1\\"\\n}\\n\\nresource \\"azurerm_linux_function_app\\" \\"example\\" {\\n  name                = \\"${var.azure_prefix}exampleapp\\"\\n  location            = azurerm_resource_group.example.location\\n  resource_group_name = azurerm_resource_group.example.name\\n  service_plan_id     = azurerm_service_plan.example.id\\n\\n  storage_account_name       = azurerm_storage_account.example.name\\n  storage_account_access_key = azurerm_storage_account.example.primary_access_key\\n\\n  site_config {\\n    application_stack {\\n      python_version = \\"3.9\\"\\n    }\\n  }\\n}\\n\\nresource \\"azurerm_function_app_function\\" \\"example\\" {\\n  name            = \\"example-python-function\\"\\n  function_app_id = azurerm_linux_function_app.example.id\\n  language        = \\"Python\\"\\n  file {\\n    name    = \\"__init__.py\\"\\n    content = file(\\"./app/__init__.py\\")\\n  }\\n  test_data = jsonencode({\\n    \\"name\\" = \\"Azure\\"\\n  })\\n  config_json = jsonencode({\\n    \\"scriptFile\\" = \\"__init__.py\\"\\n    \\"bindings\\" = [\\n      {\\n        \\"authLevel\\" = \\"function\\"\\n        \\"direction\\" = \\"in\\"\\n        \\"methods\\" = [\\n          \\"get\\",\\n          \\"post\\",\\n        ]\\n        \\"name\\" = \\"req\\"\\n        \\"type\\" = \\"httpTrigger\\"\\n      },\\n      {\\n        \\"direction\\" = \\"out\\"\\n        \\"name\\"      = \\"$return\\"\\n        \\"type\\"      = \\"http\\"\\n      },\\n    ]\\n  })\\n}\\n\\ndata \\"azurerm_function_app_host_keys\\" \\"example\\" {\\n  name                = \\"${var.azure_prefix}exampleapp\\"\\n  resource_group_name = azurerm_resource_group.example.name\\n  # https://github.com/hashicorp/terraform-provider-azurerm/issues/9869\\n  depends_on = [\\n    azurerm_linux_function_app.example\\n  ]\\n}\\n```\\n\\n### SORACOM \u306e\u30ea\u30bd\u30fc\u30b9\\n\\n- SIM \u30b0\u30eb\u30fc\u30d7\\n- \u8a8d\u8a3c\u60c5\u5831\\n- SORACOM Funk \u306e\u8a2d\u5b9a\\n\\n\u3092\u751f\u6210\u3057\u307e\u3059\u3002\u8a8d\u8a3c\u60c5\u5831\u3068 SORACOM Funk \u306e\u8a2d\u5b9a\u306b\u306f\u3001\u4e0a\u8ff0\u3057\u305f Azure \u5074\u306e\u30ea\u30bd\u30fc\u30b9\u8a2d\u5b9a\u3092\u53cd\u6620\u3055\u305b\u3066\u9023\u643a\u3057\u307e\u3059\u3002\\n\\n```tf title=\\"soracom.tf\\" linenums=\\"1\\"\\nterraform {\\n  required_providers {\\n    soracom = {\\n      source = \\"ks6088ts/soracom\\"\\n    }\\n  }\\n}\\n\\nprovider \\"soracom\\" {\\n  profile = var.soracom_profile\\n}\\n\\nresource \\"soracom_group\\" \\"group\\" {\\n  tags = {\\n    name = var.soracom_group_name\\n  }\\n}\\n\\nresource \\"soracom_credentials\\" \\"credentials\\" {\\n  credentials_id = var.credentials_id\\n  description    = \\"API Token credentials via terraform-provider-soracom\\"\\n  type           = \\"api-token-credentials\\"\\n  credentials = {\\n    # Azure Functions \u306e\u8a2d\u5b9a\u3092\u53c2\u7167\\n    token = data.azurerm_function_app_host_keys.example.default_function_key\\n  }\\n}\\n\\nresource \\"soracom_group_configuration_funk\\" \\"group_configuration_funk\\" {\\n  group_id       = soracom_group.group.id\\n  enabled        = true\\n  credentials_id = soracom_credentials.credentials.credentials_id\\n  content_type   = \\"json\\"\\n\\n  # Azure Functions\\n  destination {\\n    provider     = \\"azure\\"\\n    service      = \\"function-app\\"\\n    # Azure Functions \u306e\u547c\u3073\u51fa\u3057 URL \u3092\u53c2\u7167\\n    resource_url = azurerm_function_app_function.example.invocation_url\\n  }\\n}\\n```\\n\\n\u4ee5\u4e0a\u3067\u30b5\u30f3\u30d7\u30eb\u306e\u7d39\u4ecb\u306f\u7d42\u4e86\u3067\u3059\u3002\\n\\n\u3053\u308c\u307e\u3067\u306f Azure \u306e\u30ea\u30bd\u30fc\u30b9\u3092\u4f5c\u6210\u3057\u3066\u30d1\u30e9\u30e1\u30fc\u30bf\u8a2d\u5b9a\u3092\u78ba\u8a8d\u3057\u305f\u3042\u3068\u3001SORACOM \u5074\u306e\u8a8d\u8a3c\u60c5\u5831\u3068 SORACOM Funk \u306e SIM \u30b0\u30eb\u30fc\u30d7\u306e\u8a2d\u5b9a\u3092\u30a6\u30a7\u30d6\u30b3\u30f3\u30bd\u30fc\u30eb\u304b SORACOM CLI \u3067\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3057\u305f\u3002Terraform \u5bfe\u5fdc\u3059\u308b\u3053\u3068\u3067\u3001\u305d\u3046\u3044\u3063\u305f\u624b\u4f5c\u696d\u3082\u7121\u304f\u306a\u308a `terraform apply -auto-approve` \u3059\u308c\u3070\u30b5\u30af\u30c3\u3068 Azure\u30fbSORACOM \u53cc\u65b9\u3092\u9023\u643a\u3057\u305f\u30ea\u30bd\u30fc\u30b9\u304c\u751f\u6210\u3067\u304d\u307e\u3059\u3002\u5f8c\u7247\u4ed8\u3051\u3082 `terraform destroy` \u3067\u3055\u3063\u3068\u7d42\u308f\u308a\u307e\u3059\u3002\u3088\u308a\u4e00\u5c64 SORACOM \u3092\u4fbf\u5229\u306b\u4f7f\u3046\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\\n\\n---\\n\\n## **\u30dd\u30a8\u30e0: \u30c4\u30fc\u30eb\u958b\u767a\u304b\u3089\u306e\u5b66\u3073**\\n\\n\u3053\u306e\u624b\u306e\u30c4\u30fc\u30eb\u3092\u958b\u767a\u3057\u3066\u307f\u3066\u3001\u6539\u3081\u3066\u611f\u3058\u305f\u3053\u3068\u3092\u30dd\u30a8\u30e0\u7684\u306b 2 \u70b9\u66f8\u304d\u7559\u3081\u3066\u304a\u304d\u307e\u3059\u3002\\n\\n### **1. \u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u304b\u3089\u66f8\u304d\u59cb\u3081\u308b\u3053\u3068**\\n\\n\u4eca\u56de\u5b9f\u88c5\u3057\u305f\u30ab\u30b9\u30bf\u30e0\u30d7\u30ed\u30d0\u30a4\u30c0\u3084\u3001API\u30fbSDK \u3068\u3044\u3063\u305f\u3001\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3092\u5f62\u6210\u3059\u308b\u305f\u3081\u306e\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306b\u95a2\u3057\u3066\u3001\u4e00\u756a\u6ce8\u610f\u3092\u6255\u3046\u3079\u304d\u30dd\u30a4\u30f3\u30c8\u306f\u5916\u90e8\u4ed5\u69d8\u3067\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\u7d30\u304b\u306a\u5185\u90e8\u5b9f\u88c5\u4e0a\u306e\u30d0\u30b0\u306a\u3093\u304b\u306f\u90fd\u5ea6\u76f4\u305b\u307e\u3059\u304c\u3001\u5916\u90e8\u4ed5\u69d8\u306f\u4e00\u5ea6\u51fa\u3059\u3068\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u5f71\u97ff\u304c\u51fa\u308b\u305f\u3081\u3001\u5bb9\u6613\u306b\u5909\u66f4\u3057\u3065\u3089\u3044\u3053\u3068\u304c\u7406\u7531\u3067\u3059\u3002  \\n\u300c\u306a\u306b\u5f53\u305f\u308a\u524d\u306e\u3053\u3068\u3092\u8a00\u3063\u3066\u3044\u308b\u3093\u3060\uff1f\u300d\u3068\u601d\u308f\u308c\u308b\u65b9\u3082\u3044\u3089\u3063\u3057\u3083\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u3057\u304b\u3057\u306a\u304c\u3089\u3001\u4f9d\u5b58\u3059\u308b\u4ed6\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u4ed5\u69d8\u3084\u5185\u90e8\u5b9f\u88c5\u4e0a\u306e\u5236\u7d04\u306a\u3069\u306b\u6c17\u304c\u5411\u3044\u3066\u3057\u307e\u3046\u3068\u3001\u305d\u308c\u3089\u306b\u7121\u610f\u8b58\u7684\u306b\u5f15\u304d\u305a\u3089\u308c\u3066\u3057\u307e\u3044\u6700\u7d42\u7684\u306b\u30e6\u30fc\u30b6\u306b\u63d0\u4f9b\u3059\u308b\u5916\u90e8\u4ed5\u69d8\u304c\u304e\u3053\u3061\u306a\u304f\u306a\u308b\u3053\u3068\u3063\u3066\u610f\u5916\u3068\u591a\u304f\u306a\u3044\u3067\u3057\u3087\u3046\u304b\u3002\u30ab\u30d7\u30bb\u30eb\u5316\u304c\u4e0d\u5341\u5206\u3067\u4e0d\u8981\u306a\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6652\u3057\u305f\u308a\u3001\u30ea\u30bd\u30fc\u30b9\u9593\u306b\u4e0d\u8981\u306a\u4f9d\u5b58\u304c\u767a\u751f\u3057\u3066\u3044\u305f\u308a\u3001\u76f4\u89b3\u7684\u3067\u306f\u306a\u3044\u64cd\u4f5c\u3092\u8981\u6c42\u3057\u305f\u308a\u3001\u3001\u3001\u5c11\u306a\u304f\u3068\u3082\u79c1\u306f\u305d\u3046\u3044\u3046\u5931\u6557\u3092\u4f55\u5ea6\u3082\u3057\u307e\u3057\u305f\u3002\u3053\u3046\u3044\u3063\u305f\u554f\u984c\u3092\u8e0f\u3093\u3067\u306f\u3001[C++\u306e\u305f\u3081\u306eAPI\u30c7\u30b6\u30a4\u30f3](https://amzn.to/3GgZt8x) \u306e `\u7b2c2\u7ae0 \u512a\u308c\u305fAPI\u306e\u7279\u5fb4` \u306b\u4e8b\u7d30\u304b\u306b\u66f8\u3044\u3066\u3042\u308b\u539f\u7406\u539f\u5247\u3092\u4f55\u56de\u3082\u8aad\u307f\u8fd4\u3057\u305f\u308a\u3057\u3066\u3044\u307e\u3057\u305f\u3002\\n\\n\u3053\u308c\u307e\u3067\u306e\u7d4c\u9a13\u306e\u4e2d\u306e\u5b66\u3073\u306e\u4e00\u3064\u306b\u3001**\u30b5\u30f3\u30d7\u30eb\u304b\u3089\u66f8\u304d\u59cb\u3081\u308b(\u21d4\u5916\u90e8\u4ed5\u69d8\u3092\u5148\u306b\u7b56\u5b9a\u3059\u308b)** \u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u306f\u5e38\u65e5\u9803\u610f\u8b58\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002  \\n\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u304b\u3089\u66f8\u304d\u59cb\u3081\u308b\u3068\u3001\u5acc\u3067\u3082\u30e6\u30fc\u30b6\u306e\u5229\u4fbf\u6027\u3084\u5f8c\u65b9\u4e92\u63db\u6027\u306e\u8003\u616e\u3092\u6700\u521d\u306b\u3059\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\u5b9f\u88c5\u4e0a\u306e\u5236\u7d04\u3068\u3044\u3063\u305f\u30ce\u30a4\u30ba\u3092\u6392\u9664\u3057\u3066\u8003\u3048\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\u4ed5\u69d8\u306e\u3061\u3083\u3076\u53f0\u8fd4\u3057\u304c\u3042\u3063\u3066\u3082\u3001\u5185\u90e8\u5b9f\u88c5\u306b\u7740\u624b\u3059\u308b\u524d\u306a\u3089\u624b\u623b\u308a\u306f\u5c11\u306a\u304f\u3066\u6e08\u307f\u307e\u3059\u3002\u6700\u521d\u306b\u30b5\u30f3\u30d7\u30eb\u3092\u66f8\u3044\u3066\u304a\u3051\u3070\u3001\u5f8c\u3005\u30e6\u30fc\u30b6\u304b\u3089\u300c\u30b5\u30f3\u30d7\u30eb\u304f\u3060\u3055\u3044\u300d\u306a\u3093\u3066\u3053\u3068\u3082\u8a00\u308f\u308c\u307e\u305b\u3093\u3002\u30e1\u30ea\u30c3\u30c8\u306e\u307b\u3046\u304c\u591a\u3044\u306e\u3067\u3059\u3002  \\n\u5916\u90e8\u4ed5\u69d8\u306e\u691c\u8a0e\u306f\u3001\u771f\u9762\u76ee\u306b\u3084\u308b\u3068\u610f\u5916\u306b\u6642\u9593\u304c\u304b\u304b\u308a\u307e\u3059\u3002\u52d5\u4f5c\u3059\u308b\u30b3\u30fc\u30c9\u3068\u3057\u3066\u306e\u6210\u679c\u7269\u304c\u306a\u304b\u306a\u304b\u51fa\u3066\u3053\u306a\u3044\u5206\u3001\u30d7\u30ed\u30b0\u30e9\u30de\u3068\u3057\u3066\u306f\u7126\u71e5\u611f\u306b\u99c6\u3089\u308c\u3066\u5b9f\u88c5\u306b\u7740\u624b\u3057\u3066\u3057\u307e\u3046\u306e\u3082\u5f80\u3005\u306b\u3057\u3066\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002  \\n\u300c\u610f\u8b58\u3057\u307e\u3057\u3087\u3046\u300d\u3068\u3044\u3046\u52aa\u529b\u76ee\u6a19\u306e\u30eb\u30fc\u30eb\u306f\u5927\u62b5\u6a5f\u80fd\u3057\u306a\u3044\u3053\u3068\u304c\u591a\u3044\u306e\u3067\u3001\u5185\u90e8\u5b9f\u88c5\u3092\u59cb\u3081\u308b\u3088\u308a\u524d\u306b API \u306e\u30ec\u30d3\u30e5\u30fc\u3084(\u52d5\u4f5c\u3057\u306a\u3044\u72b6\u614b\u306e)\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306e\u30ec\u30d3\u30e5\u30fc\u3092\u5fc5\u9808\u3068\u3059\u308b\u958b\u767a\u30d5\u30ed\u30fc\u3092\u53d6\u308a\u5165\u308c\u308b\u306e\u3082\u3001\u7d44\u7e54\u306e\u898f\u6a21\u3084\u63d0\u4f9b\u3059\u308b\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u7279\u6027\u306b\u3088\u3063\u3066\u306f\u30d5\u30a3\u30c3\u30c8\u3059\u308b\u306e\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\\n\\n### **2. \u81ea\u5206\u4ee5\u5916\u306e\u8996\u70b9\u3067\u826f\u3044\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af\u3092\u304f\u308c\u308b\u4eba\u3092\u898b\u3064\u3051\u308b\u3053\u3068**\\n\\n\u500b\u4eba\u958b\u767a\u3092\u3057\u3066\u3044\u308b\u3068\u3001\u76ee\u7dda\u304c\u4e00\u3064\u3060\u3051\u306b\u306a\u308a\u7d50\u679c\u7684\u306b\u826f\u3044\u3082\u306e\u304c\u3067\u304d\u306a\u3044\u306e\u3092\u601d\u3044\u77e5\u308a\u307e\u3057\u305f\u3002\u3042\u308b\u7a0b\u5ea6\u54c1\u8cea\u3084\u65b9\u5411\u6027\u304c\u56fa\u307e\u3063\u305f\u6bb5\u968e\u3067\u3001\u65e9\u671f\u306b\u3067\u304d\u308b\u3060\u3051\u3044\u308d\u3093\u306a\u4eba\u306b dogfooding \u3092\u304a\u9858\u3044\u3057\u3066\u3001\u7387\u76f4\u3067\u30b9\u30c8\u30ec\u30fc\u30c8\u306a\u610f\u898b\u3092\u3082\u3089\u3046\u3053\u3068\u306f\u975e\u5e38\u306b\u5927\u4e8b\u3067\u3042\u308b\u3068\u601d\u3044\u307e\u3057\u305f\u3002  \\n\u7279\u306b\u3001\u77e5\u8b58\u8c4a\u5bcc\u306a\u30d8\u30d3\u30fc\u30e6\u30fc\u30b6\u30fc\u3084\u4e8b\u524d\u77e5\u8b58\u304c\u305d\u3053\u307e\u3067\u306a\u3044\u30e9\u30a4\u30c8\u30e6\u30fc\u30b6\u30fc\u306a\u3069\u3001\u69d8\u3005\u306a\u4eba\u306b\u304a\u9858\u3044\u3059\u308b\u3068\u9762\u767d\u3044\u3067\u3059\u3002\u524d\u8005\u306f\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u4e0a\u306e\u61f8\u5ff5\u70b9\u3092\u898b\u3064\u3051\u3066\u304f\u3060\u3055\u3044\u307e\u3057\u305f\u3057\u3001\u5f8c\u8005\u306f\u300c\u30b5\u30f3\u30d7\u30eb\u307f\u308c\u3070\u7406\u89e3\u3067\u304d\u308b\u3067\u3057\u3087\uff1f\u300d\u307f\u305f\u3044\u306a\u30de\u30c3\u30c1\u30e7\u306a\u601d\u60f3\u304c\u30a4\u30b1\u3066\u306a\u3044\u3053\u3068\u3092\u6559\u3048\u3066\u304f\u308c\u305f\u308a\u3068\u3001\u4ed6\u8005\u304b\u3089\u306e\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af\u3067\u591a\u304f\u306e\u6c17\u3065\u304d\u3068\u6539\u5584\u304c\u3067\u304d\u307e\u3057\u305f\u3002  \\n\u4eca\u56de\u958b\u767a\u3057\u305f\u30ab\u30b9\u30bf\u30e0\u30d7\u30ed\u30d0\u30a4\u30c0\u3082\u305d\u3046\u3057\u305f\u4eba\u9054\u3068\u306e\u5354\u696d\u3092\u901a\u3057\u3066\u6539\u5584\u3057\u3066\u3044\u3063\u305f\u7d4c\u7def\u3082\u3042\u308a\u307e\u3059\u3002\u6539\u3081\u3066\u3053\u306e\u5834\u3092\u501f\u308a\u3066\u611f\u8b1d\u7533\u3057\u4e0a\u3052\u307e\u3059\u3002\\n\\n(\u5b8c)"}]}}')}}]);
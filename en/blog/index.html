<!doctype html>
<html lang="en-US" dir="ltr" class="blog-wrapper blog-list-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Blog | ks6088ts</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://github.com/ks6088ts.png"><meta data-rh="true" name="twitter:image" content="https://github.com/ks6088ts.png"><meta data-rh="true" property="og:url" content="https://ks6088ts.github.io/en/blog"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="Blog | ks6088ts"><meta data-rh="true" name="description" content="Blog"><meta data-rh="true" property="og:description" content="Blog"><meta data-rh="true" name="docusaurus_tag" content="blog_posts_list"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_posts_list"><link data-rh="true" rel="icon" href="https://github.com/ks6088ts.png"><link data-rh="true" rel="canonical" href="https://ks6088ts.github.io/en/blog"><link data-rh="true" rel="alternate" href="https://ks6088ts.github.io/blog" hreflang="ja-JP"><link data-rh="true" rel="alternate" href="https://ks6088ts.github.io/en/blog" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://ks6088ts.github.io/blog" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/en/blog/rss.xml" title="ks6088ts RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/en/blog/atom.xml" title="ks6088ts Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-0ZTKFXVQ5K"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-0ZTKFXVQ5K",{anonymize_ip:!0})</script><link rel="stylesheet" href="/en/assets/css/styles.2138a924.css">
<link rel="preload" href="/en/assets/js/runtime~main.ada50a0c.js" as="script">
<link rel="preload" href="/en/assets/js/main.f7e2f1a4.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/en/"><div class="navbar__logo"><img src="https://github.com/ks6088ts.png" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="https://github.com/ks6088ts.png" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Home</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/en/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ks6088ts/ks6088ts.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/configure-oidc-azure">GitHub Actions から OpenID Connect で Azure に接続する設定の自動化方法</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/handson-rag-app">Azure 上で作る RAG アプリ開発入門</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/graph-api-summary">Microsoft Graph API 関連情報のまとめ</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/aoai-private-endpoint-managed-id">AOAI にプライベートエンドポイントから接続し、VM のマネージド ID を利用して API Key 無しで AOAI を呼び出す</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/handson-baseline-environment-on-azure-bicep">ks6088ts-labs/baseline-environment-on-azure-bicep のハンズオン</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/en/blog/configure-oidc-azure">GitHub Actions から OpenID Connect で Azure に接続する設定の自動化方法</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-12-13T00:00:00.000Z" itemprop="datePublished">December 13, 2024</time> · <!-- -->25 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/ks6088ts" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/ks6088ts.png" alt="ks6088ts"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/ks6088ts" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">ks6088ts</span></a></div><small class="avatar__subtitle" itemprop="description">Software Engineer / Solutions Architect</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p><a href="https://qiita.com/advent-calendar/2024/microsoft-azure-tech" target="_blank" rel="noopener noreferrer">Microsoft Azure Tech Advent Calendar 2024</a> の 12/13 の投稿記事です。</p><p>本記事では、GitHub Actions から OpenID Connect で Azure に接続する設定の自動化方法についてご紹介します。</p><hr><h1>本記事を 3 行でまとめると</h1><ul><li>GitHub Actions から OpenID Connect で Azure に接続する設定作業をシェルスクリプトや Terraform で自動化しました。</li><li>GitHub Codespaces や GitHub Actions からリソースをデプロイできるようにしました。</li><li>スクリプトと Terraform のサンプルは <a href="https://github.com/ks6088ts-labs/baseline-environment-on-azure-terraform" target="_blank" rel="noopener noreferrer">こちら</a> にて MIT ライセンスで公開しています。</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="全体構成">全体構成<a href="#全体構成" class="hash-link" aria-label="Direct link to 全体構成" title="Direct link to 全体構成">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="openid-connect-接続設定の自動化">OpenID Connect 接続設定の自動化<a href="#openid-connect-接続設定の自動化" class="hash-link" aria-label="Direct link to OpenID Connect 接続設定の自動化" title="Direct link to OpenID Connect 接続設定の自動化">​</a></h3><p>GitHub Actions から OpenID Connect で Azure に接続する設定を自動化した処理の流れは以下の通りです。ローカル開発環境から、GitHub と Azure プラットフォーム上に接続に必要なリソースを作成しています。アプリケーションのコードがシェルスクリプトか Terraform かの違いはありますが、基本的な流れはどちらも同じです。</p><p><img loading="lazy" src="https://github.com/ks6088ts-labs/baseline-environment-on-azure-terraform/blob/v0.0.1/docs/images/configure_oidc_azure.png?raw=true" alt="configure_oidc_azure.png" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="openid-connect-接続で-github-actions-から-azure-にリソースをデプロイ">OpenID Connect 接続で GitHub Actions から Azure にリソースをデプロイ<a href="#openid-connect-接続で-github-actions-から-azure-にリソースをデプロイ" class="hash-link" aria-label="Direct link to OpenID Connect 接続で GitHub Actions から Azure にリソースをデプロイ" title="Direct link to OpenID Connect 接続で GitHub Actions から Azure にリソースをデプロイ">​</a></h3><p>払い出された接続設定を利用して、GitHub Actions から OpenID Connect で Azure に接続し、Azure のリソースを払い出す全体の流れは以下の通りです。</p><p>GitHub Actions のワークフローから、参照する環境情報を切り替えることで、異なる環境に対してデプロイを行うこともできます。</p><p><img loading="lazy" src="https://github.com/ks6088ts-labs/baseline-environment-on-azure-terraform/blob/v0.0.1/docs/images/deploy_tfstate_backend.png?raw=true" alt="deploy_tfstate_backend.png" class="img_ev3q"></p><h1>OpenID Connect を使って Azure に接続することのメリット</h1><p>まず、<code>「GitHub Actions から OpenID Connect で Azure に接続する」</code>とはどういうことか説明します。</p><p>コードをホストする GitHub と、クラウドサービスを提供する Azure は、それぞれのサービスを連携させることができます。
GitHub Actions は GitHub が提供する CI/CD サービスで、GitHub リポジトリにプッシュされたコードを自動的にビルド・テスト・デプロイすることができます。Azure 上で動作するアプリケーションを GitHub Actions からテストしたりデプロイする場合、Azure に接続するための認証が必要になります。</p><p>Azure に接続するための認証方法として、種々の方法が提供されています。従来は、Azure のサービスプリンシパルを作成して、クライアントシークレットを使って認証する方法が一般的でしたが、セキュリティ上の理由から、OpenID Connect を使って認証する方法が推奨されています。</p><p>クライアントシークレットのような静的な認証情報はえてして有効期限が長く、漏洩した場合のリスクが高いです。また、キーの管理が煩雑になることもあります。<br>
<!-- -->そこで、OpenID Connect を使って認証する方法が推奨されています。OpenID Connect を使って認証する場合、静的な認証情報を使わずに一時的なトークンを使って認証を行います。このトークンは有効期限が短く、アクセス元や対象のリソース権限範囲を細かく制限できるため、漏洩してもリスクが低いため、OpenID Connect を使って認証する方法が推奨されています。</p><p>OpenID Connect を利用するメリットに関しては、<a href="https://amzn.to/3Co02xA" target="_blank" rel="noopener noreferrer">GitHub CI/CD 実践ガイド――持続可能なソフトウェア開発を支える GitHub Actions の設計と運用 エンジニア選書</a> の <code>第11章　OpenID Connectによるセキュアなクラウド連携</code> の</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="手動で-github-actions-から-openid-connect-で-azure-に接続する設定を行う">手動で GitHub Actions から OpenID Connect で Azure に接続する設定を行う<a href="#手動で-github-actions-から-openid-connect-で-azure-に接続する設定を行う" class="hash-link" aria-label="Direct link to 手動で GitHub Actions から OpenID Connect で Azure に接続する設定を行う" title="Direct link to 手動で GitHub Actions から OpenID Connect で Azure に接続する設定を行う">​</a></h2><p>GitHub Actions から OpenID Connect で Azure に接続する設定作業は、手動で行うとざっくりと以下の流れになります。</p><p><strong>Azure Portal にて</strong></p><ul><li>アプリケーション登録する</li><li>登録したアプリケーションに対してフェデレーション資格情報を追加する</li><li>ロール割り当てを行う</li></ul><p><strong>GitHub にて</strong></p><ul><li>リポジトリに環境(=Environment)を作成する</li><li>リポジトリで作成した環境上にシークレットを登録する</li></ul><p>作業手順に関する記事は、<a href="https://learn.microsoft.com/azure/developer/github/connect-from-azure?tabs=azure-cli%2Clinux" target="_blank" rel="noopener noreferrer">GitHub Actions を使用して Azure に接続する</a>が一次情報になります。<br>
<!-- -->恥ずかしながら私はそれでもよくわからなかったので、ググってみると<a href="https://zenn.dev/dzeyelid/articles/5f20acbe549666" target="_blank" rel="noopener noreferrer">Check! GitHub Actions で OpenID Connect(OIDC) で Azure に安全に接続する</a>がヒットしました。GUI 操作のスクショ付きで具体的な操作手順が解説されており最高です。書いてある通り作業したらちゃんと設定できました、ありがたやありがたや。</p><p><img loading="lazy" src="https://res.cloudinary.com/zenn/image/fetch/s--jeiZgBuE--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/4db01a487f4e1f7e8807f25c.png%3Fsha%3Db18c893e94c6fdeeeb28d1d181bb1d74d1ebbd8e" alt="GitHub Actions で OpenID Connect で Azure に接続する設定" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="課題-手動の設定作業が面倒でミスが起きやすい">課題: 手動の設定作業が面倒でミスが起きやすい<a href="#課題-手動の設定作業が面倒でミスが起きやすい" class="hash-link" aria-label="Direct link to 課題: 手動の設定作業が面倒でミスが起きやすい" title="Direct link to 課題: 手動の設定作業が面倒でミスが起きやすい">​</a></h2><p>手動で設定できたのが嬉しい一方で、まぁまぁやること多いし基本的に不注意な人間なので、実はこの作業で何回かミスしました。
めんどくさくて正直もう二度とやりたくない気持ちではありますが、Azure x GitHub 環境で CI/CD 含めた、いわゆるちゃんとした開発をする場合、新しくプロジェクトを立ち上げる度にこの設定作業は不可避なはずです。
こういう時こそ将来の自分に向けて自動化しておくとコスパがいい！と思い自動化するモチベーションが湧きました。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="対策-api-を使って自動化する">対策: API を使って自動化する<a href="#対策-api-を使って自動化する" class="hash-link" aria-label="Direct link to 対策: API を使って自動化する" title="Direct link to 対策: API を使って自動化する">​</a></h2><p>Azure Portal などの Web UI はベンダー側の親切心のおかげで、見た目や操作手順は変化する場合があります。
一方で、フロントエンドが内部的にコールしている API は基本的に互換性が保たれるため、API を使った自動化は保守性に優れています。</p><p><code>GUI は変わるが API は変わらない</code> という考え方は、自動化を検討する際の技術選定の際に頭に入れておくと良いです。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="シェルスクリプトで自動化する">シェルスクリプトで自動化する<a href="#シェルスクリプトで自動化する" class="hash-link" aria-label="Direct link to シェルスクリプトで自動化する" title="Direct link to シェルスクリプトで自動化する">​</a></h3><p>操作手順を自動化するアプローチとしては、正攻法としては操作に相当する API をドキュメントや Copilot を使って調べ、その API をスクリプトに書き起こすことが考えられます。
場合に依ってはドキュメントがない場合もありますので、その場合はその手順を実行した際のリクエストをキャプチャして API を調べて <code>curl</code> などで叩く手法も採ります。</p><table><thead><tr><th>ブラウザ</th><th>リンク</th></tr></thead><tbody><tr><td>Microsoft Edge</td><td><a href="https://learn.microsoft.com/ja-jp/microsoft-edge/devtools-guide-chromium/network/" target="_blank" rel="noopener noreferrer">ネットワーク アクティビティの検査</a></td></tr><tr><td>Google Chrome</td><td><a href="https://developer.chrome.com/docs/devtools/network?hl=ja" target="_blank" rel="noopener noreferrer">ネットワーク パネルの使用</a></td></tr></tbody></table><p>ここでは、GUI 操作と一対一対応する処理を CLI を使ってシェルスクリプトに書き起こすことを考えます。
この手の作業、一昔前までは私はググって解決していたのですが、ブラウザとエディタの切り替えがまぁまぁ思考速度を落とす原因になっておりました。
今は <a href="https://github.com/features/copilot" target="_blank" rel="noopener noreferrer">GitHub Copilot</a>にお任せするとエディタを行き来する必要も無いですし、チャットで聞くもよし、適当なファイル上でコメント補完の形で対話するもよしです。<br>
<!-- -->私は後者の手法をよく使います。やりかたは <a href="https://patterns.hattori.dev/ja/general/comment-to-code/" target="_blank" rel="noopener noreferrer">GitHub Copilot パターン&amp;エクササイズ &gt; コメントからコードを生成</a> を参考にしています。</p><p>書いてみてそれなりに自動化は出来ました。</p><ul><li><a href="https://github.com/ks6088ts-labs/baseline-environment-on-azure-terraform/blob/v0.0.1/scripts/create-service-principal.sh" target="_blank" rel="noopener noreferrer">scripts/create-service-principal.sh</a>: サービスプリンシパルを作成して資格情報・権限割り当てを実行するシェルスクリプト</li><li><a href="https://github.com/ks6088ts-labs/baseline-environment-on-azure-terraform/blob/v0.0.1/scripts/configure-github-secrets.sh" target="_blank" rel="noopener noreferrer">scripts/configure-github-secrets.sh</a>: GitHub の環境にシークレットを設定するシェルスクリプト</li></ul><p>GitHub Copilot のおかげでシェルスクリプトを書くのもだいぶ楽になりました。
長ったらしいシェルスクリプトではありますが、実行環境の依存関係はコンパクトに纏まっているので身軽に使えそうです。
ただ、途中でエラーが起きたりした場合は手動で修正する必要があるので、完全な自動化とは言えません。再現性にも問題があるので他の人に自信を持って渡すことはできません。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="iac-ツールを選定する">IaC ツールを選定する<a href="#iac-ツールを選定する" class="hash-link" aria-label="Direct link to IaC ツールを選定する" title="Direct link to IaC ツールを選定する">​</a></h3><p>再現性とか冪等性が頭をよぎると、真っ先に IaC ツールを使いたくなります。
手順が複雑で重厚長大な成果物を他者に渡す場合、手順書にしたがって手動でやるとか、シェルスクリプトを渡すよりも、IaC ツールを使うことで再現性や冪等性を確保して渡すほうがトラブルも少なくなると思います。</p><p>ここではどの IaC ツールを使うかを検討してみます。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="bicep-の場合">Bicep の場合<a href="#bicep-の場合" class="hash-link" aria-label="Direct link to Bicep の場合" title="Direct link to Bicep の場合">​</a></h4><p>Bicep は Azure のリソース管理はもちろん、拡張機能を利用すると Microsoft Graph リソースの管理もできるようです。<a href="https://learn.microsoft.com/ja-jp/graph/templates/quickstart-create-bicep-interactive-mode?tabs=CLI" target="_blank" rel="noopener noreferrer">クイック スタート: Microsoft Graph リソースを使用して最初の Bicep ファイルを作成してデプロイする</a> が参考になります。
ただ、ドキュメントを見た感じ、リソースの作成までは流れても、削除までは統一的な操作で実施できないのが痒いポイントではないかと思います。(別途 REST API で削除しているのが気になる)
2024 年 12 月現在は諸々限定的なようです。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="terraform-hcl-の場合">Terraform (HCL) の場合<a href="#terraform-hcl-の場合" class="hash-link" aria-label="Direct link to Terraform (HCL) の場合" title="Direct link to Terraform (HCL) の場合">​</a></h4><p><a href="https://learn.microsoft.com/ja-jp/azure/developer/terraform/comparing-terraform-and-bicep?tabs=comparing-bicep-terraform-integration-features#infrastructure-targets" target="_blank" rel="noopener noreferrer">Terraform と Bicep の比較</a> でもマルチプラットフォーム対応を想定するなら Terraform が推奨されています。</p><p>今回は GitHub, Azure それぞれのプラットフォームに対してリソースを作成する必要があるので、Terraform で書いてみると良さそうです。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="terraform-で書いてみる">Terraform で書いてみる<a href="#terraform-で書いてみる" class="hash-link" aria-label="Direct link to Terraform で書いてみる" title="Direct link to Terraform で書いてみる">​</a></h2><p>各プラットフォーム向けに以下のプロバイダが提供されています。</p><table><thead><tr><th>プラットフォーム</th><th>プロバイダ</th></tr></thead><tbody><tr><td>GitHub</td><td><a href="https://registry.terraform.io/providers/integrations/github/latest" target="_blank" rel="noopener noreferrer">integrations/github</a></td></tr><tr><td>Microsoft Entra ID(Azure AD)</td><td><a href="https://registry.terraform.io/providers/hashicorp/azuread/latest/docs" target="_blank" rel="noopener noreferrer">hashicorp/azuread</a></td></tr><tr><td>Azure</td><td><a href="https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs" target="_blank" rel="noopener noreferrer">hashicorp/azurerm</a></td></tr></tbody></table><p>既にスクリプトがあるので、これを Terraform で書き換えてくださいと GitHub Copilot にお願いすると開発の初速は上がる場合が多いですが、コードベースがそこまで育ってない状態だと経験上あまり自分好みの書き方をしてくれない感じがあります。</p><p>結局書き方とか細かい好き嫌いを加味してコードを書き直すことが多いので、今回はまずは自分で書いてみることにしました。Visual Studio Code 上で開発する場合、VS Code 拡張として以下のものをインストールすると Terraform の開発が捗ります。いずれも HashiCorp が提供しているものです。</p><ul><li><a href="https://marketplace.visualstudio.com/items?itemName=HashiCorp.terraform" target="_blank" rel="noopener noreferrer">HashiCorp Terraform</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=HashiCorp.HCL" target="_blank" rel="noopener noreferrer">HashiCorp HCL</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="静的解析を導入する">静的解析を導入する<a href="#静的解析を導入する" class="hash-link" aria-label="Direct link to 静的解析を導入する" title="Direct link to 静的解析を導入する">​</a></h3><p>Terraform のコードに静的解析ツールを導入しておくと、コードの品質を保つのに役立ちます。今回は以下のツールを導入してみました。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="tflint"><strong><a href="https://github.com/terraform-linters/tflint" target="_blank" rel="noopener noreferrer">TFLint</a></strong><a href="#tflint" class="hash-link" aria-label="Direct link to tflint" title="Direct link to tflint">​</a></h4><p>静的解析ツール。未使用変数とかがあると教えてくれます。例えば以下のように、未使用のデータソースがあることを指摘してくれます。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">2 issue(s) found:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Warning: data &quot;azuread_client_config&quot; &quot;client_config&quot; is declared but not used (terraform_unused_declarations)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  on scenarios/create_user_group/main.tf line 26:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  26: data &quot;azuread_client_config&quot; &quot;client_config&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Reference: https://github.com/terraform-linters/tflint-ruleset-terraform/blob/v0.2.2/docs/rules/terraform_unused_declarations.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Warning: data &quot;azuread_service_principal&quot; &quot;msgraph&quot; is declared but not used (terraform_unused_declarations)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  on scenarios/create_user_group/main.tf line 32:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  32: data &quot;azuread_service_principal&quot; &quot;msgraph&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Reference: https://github.com/terraform-linters/tflint-ruleset-terraform/blob/v0.2.2/docs/rules/terraform_unused_declarations.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">make: *** [Makefile:52: tflint] Error 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Error: Process completed with exit code 2.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="tfsec"><strong><a href="https://github.com/aquasecurity/tfsec" target="_blank" rel="noopener noreferrer">Tfsec</a></strong><a href="#tfsec" class="hash-link" aria-label="Direct link to tfsec" title="Direct link to tfsec">​</a></h4><p>セキュリティの静的解析ツール。セキュリティに関するベストプラクティスに沿っていないコードを指摘してくれます。例えば以下のように、平文でパスワードを扱っていることを指摘してくれます。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Results #1-4 HIGH Secret has plain text value (4 similar results)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="trivy"><strong><a href="https://github.com/aquasecurity/trivy" target="_blank" rel="noopener noreferrer">Trivy</a></strong><a href="#trivy" class="hash-link" aria-label="Direct link to trivy" title="Direct link to trivy">​</a></h4><p>Trivy はコンテナイメージの脆弱性スキャンツールですが、Terraform のコードにも適用できます。
<!-- -->[tfsec is joining the Trivy family #1994]<!-- -->(<a href="https://github.com/aquasecurity/tfsec/discussions/1994%5C" target="_blank" rel="noopener noreferrer">https://github.com/aquasecurity/tfsec/discussions/1994\</a>) の記事によると、tfsec 利用者に Trivy への移行を推奨しているようです。
既存のコードで tfsec を利用している場合は、<a href="https://github.com/aquasecurity/tfsec/blob/master/tfsec-to-trivy-migration-guide.md" target="_blank" rel="noopener noreferrer">Migrating from tfsec to Trivy</a> を参考に移行を検討してみてください。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="どこからでも使えるようにしたい">どこからでも使えるようにしたい<a href="#どこからでも使えるようにしたい" class="hash-link" aria-label="Direct link to どこからでも使えるようにしたい" title="Direct link to どこからでも使えるようにしたい">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="github-codespaces-で動かせるようにする">GitHub Codespaces で動かせるようにする<a href="#github-codespaces-で動かせるようにする" class="hash-link" aria-label="Direct link to GitHub Codespaces で動かせるようにする" title="Direct link to GitHub Codespaces で動かせるようにする">​</a></h3><p>ブラウザだけで動かせるとなお有難いので、GitHub Codespaces でも実行できるように Dev Container の設定も書いてみました。実際に書いた設定はこちら: <a href="https://github.com/ks6088ts-labs/baseline-environment-on-azure-terraform/blob/v0.0.1/.devcontainer/devcontainer.json" target="_blank" rel="noopener noreferrer">.devcontainer/devcontainer.json</a>。<br>
<a href="https://containers.dev/features" target="_blank" rel="noopener noreferrer">Dev Container Features</a> というコミュニティベースの拡張機能が充実していて、CLI ツールのインストール程度であれば、もはや Dockerfile すら書かなくてもよい感じです。
GitHub Codespace に対応しておけば、開発端末がなくても開発環境を構築できるので、開発環境の構築を手軽に行いたい場合に便利です。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="github-actions-の-workflow_dispatch-で手動実行できるようにする">GitHub Actions の workflow_dispatch で手動実行できるようにする<a href="#github-actions-の-workflow_dispatch-で手動実行できるようにする" class="hash-link" aria-label="Direct link to GitHub Actions の workflow_dispatch で手動実行できるようにする" title="Direct link to GitHub Actions の workflow_dispatch で手動実行できるようにする">​</a></h3><p>実際に書いたワークフローはこちら: <a href="https://github.com/ks6088ts-labs/baseline-environment-on-azure-terraform/blob/v0.0.1/.github/workflows/deploy.yml" target="_blank" rel="noopener noreferrer">.github/workflows/deploy.yml</a>
Environment の活用方法については、<a href="https://aadojo.alterbooth.com/entry/2023/07/17/150000" target="_blank" rel="noopener noreferrer">GitHub Actions で環境(Environment)をパラメーターで指定する</a>が参考になりました。</p><p>GitHub Actions の環境(Environment) を使うと、同様の処理を異なる環境に対して実行できます。IT 管理者が開発環境やリソースを払い出す場合にも有用なのでは？と思います。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="実行例">実行例<a href="#実行例" class="hash-link" aria-label="Direct link to 実行例" title="Direct link to 実行例">​</a></h2><p>実際に GitHub Actions を使用して OpenID Connect で Azure に接続する設定を自動化した Terraform (HCL) コードを実行してみます。
実装に際しては <a href="https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/guides/service_principal_oidc" target="_blank" rel="noopener noreferrer">Azure Provider: Authenticating using a Service Principal with Open ID Connect</a> が参考になります。
ソースコードは <a href="https://github.com/ks6088ts-labs/baseline-environment-on-azure-terraform" target="_blank" rel="noopener noreferrer">github.com/ks6088ts-labs/baseline-environment-on-azure-terraform</a> にあります。</p><p>GitHub Codespaces での開発環境構築もサポートしたので、リポジトリの <a href="https://github.com/ks6088ts-labs/baseline-environment-on-azure-terraform/blob/main/README.md" target="_blank" rel="noopener noreferrer">README.md</a> から GitHub Codespaces のリンクをクリックすると、GitHub Codespaces で開発環境が構築されます。</p><p>ローカルから実行する場合はリポジトリをクローンします。</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># リポジトリをクローン</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone git@github.com:ks6088ts-labs/baseline-environment-on-azure-terraform.git</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-サービスプリンシパルを作成しopenid-connect-を設定して-azure-に認証します">1. サービスプリンシパルを作成し、OpenID Connect を設定して Azure に認証します。<a href="#1-サービスプリンシパルを作成しopenid-connect-を設定して-azure-に認証します" class="hash-link" aria-label="Direct link to 1. サービスプリンシパルを作成し、OpenID Connect を設定して Azure に認証します。" title="Direct link to 1. サービスプリンシパルを作成し、OpenID Connect を設定して Azure に認証します。">​</a></h3><p><a href="https://github.com/ks6088ts-labs/baseline-environment-on-azure-terraform/tree/main/infra/scenarios/create_service_principal" target="_blank" rel="noopener noreferrer">create_service_principal</a> に Terraform のコード一式があります。
Microsoft Entra ID に新しいアプリケーションとサービスプリンシパルを作成し、必要なリソースアクセス権やロールを割り当てています。
GitHub Actions 連携用のフェデレーション認証設定と、ローカル開発用のクライアントシークレットも作成しています。</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># ディレクトリに移動</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> infra/scenarios/create_service_principal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Azure CLI でログイン</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">az login</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># (オプション) 現在ログインしているアカウントを確認</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">az ad signed-in-user show</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Terraform で利用される環境変数を設定</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">ARM_SUBSCRIPTION_ID</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">az account show --query </span><span class="token variable function" style="color:#d73a49">id</span><span class="token variable" style="color:#36acaa"> --output tsv</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">TF_VAR_service_principal_name</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;baseline-environment-on-azure-terraform_tf&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">TF_VAR_github_environment</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;tf&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Terraformの設定を初期化</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># インフラをデプロイ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform apply -auto-approve</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Microsoft Entra ID に新しいアプリケーションとサービスプリンシパルが作成され、必要なリソースアクセス権やロールが割り当てられていることが確認できます。</p><p>API のアクセス許可設定が確認できます。(管理者の同意は未実施)</p><p><img loading="lazy" alt="api_permissions" src="/en/assets/images/api_permissions-ff1be18140855f4eb77cd626a8ee96ef.png" width="1000" height="671" class="img_ev3q"></p><p>GitHub 向けのフェデレーション認証設定が確認できます。</p><p><img loading="lazy" alt="federated_credentials" src="/en/assets/images/federated_credentials-89fb063eb4668dabb344827b2834a14b.png" width="981" height="521" class="img_ev3q"></p><p>アプリケーションに権限を付与するためには管理者の同意が必要です。
対象となるアプリケーションのオブジェクト ID は output で出力しておりますので、以下のコマンドで管理者の同意を実施できます。</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># アプリケーションに権限を付与</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">application_object_id</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">terraform output -raw application_object_id</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">az ad app permission admin-consent --id </span><span class="token variable" style="color:#36acaa">$application_object_id</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-github-シークレットを設定">2. GitHub シークレットを設定<a href="#2-github-シークレットを設定" class="hash-link" aria-label="Direct link to 2. GitHub シークレットを設定" title="Direct link to 2. GitHub シークレットを設定">​</a></h3><p><a href="https://github.com/ks6088ts-labs/baseline-environment-on-azure-terraform/tree/main/infra/scenarios/configure_github_secrets" target="_blank" rel="noopener noreferrer">configure_github_secrets</a> に Terraform のコード一式があります。
GitHub リポジトリに環境を作ってシークレットを設定する Terraform コードを書いてみました。以下はその一部です。</p><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># リポジトリの作成</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">resource </span><span class="token keyword type variable" style="color:#36acaa">&quot;github_repository&quot;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;repository&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># https://stackoverflow.com/a/60231673/4457856</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">count</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> var.create_github_repository ? </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> : </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">name</span><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> var.repository_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">description</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> var.repository_description</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">visibility</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> var.repository_visibility</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># GitHub リポジトリの環境を作成</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">resource </span><span class="token keyword type variable" style="color:#36acaa">&quot;github_repository_environment&quot;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;repository_environment&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">environment</span><span class="token plain">         </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> var.environment_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">repository</span><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> local.repository_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">prevent_self_review</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">deployment_branch_policy</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">protected_branches</span><span class="token plain">     </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">custom_branch_policies</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># GitHub リポジトリの環境にシークレットを設定</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">resource </span><span class="token keyword type variable" style="color:#36acaa">&quot;github_actions_environment_secret&quot;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;actions_environment_secret&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">for_each</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> for secret in var.actions_environment_secrets : </span><span class="token property" style="color:#36acaa">secret.name</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain">&gt; secret </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">repository</span><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> local.repository_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">environment</span><span class="token plain">     </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> github_repository_environment.repository_environment.environment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">secret_name</span><span class="token plain">     </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> each.value.name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">plaintext_value</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> each.value.value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>上記コードを実行すると、GitHub リポジトリを作成し、リポジトリに環境を作成し、環境にシークレットを設定します。GitHub CLI の認証情報を利用します。</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># ディレクトリに移動</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> baseline-environment-on-azure-terraform/infra/scenarios/configure_github_secrets/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># GitHub CLI でログイン</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gh auth login</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Terraform の初期化</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># リソースの作成</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform apply -auto-approve</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Plan: 3 to add, 0 to change, 0 to destroy.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># github_repository_environment.repository_environment: Creating...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># github_repository_environment.repository_environment: Creation complete after 1s [id=baseline-environment-on-azure-terraform:tf]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># github_actions_environment_secret.actions_environment_secret[&quot;WORLD&quot;]: Creating...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># github_actions_environment_secret.actions_environment_secret[&quot;HELLO&quot;]: Creating...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># github_actions_environment_secret.actions_environment_secret[&quot;WORLD&quot;]: Creation complete after 5s [id=baseline-environment-on-azure-terraform:tf:WORLD]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># github_actions_environment_secret.actions_environment_secret[&quot;HELLO&quot;]: Creation complete after 5s [id=baseline-environment-on-azure-terraform:tf:HELLO]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Apply complete! Resources: 3 added, 0 changed, 0 destroyed.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>GitHub リポジトリに環境が作成され、環境にシークレットが設定されていることが確認できます。</p><p><img loading="lazy" alt="configure_github_secrets" src="/en/assets/images/configure_github_secrets-64fe353468bbb2dca96a879360d00f5c.png" width="736" height="258" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-github-actions-から-openid-connect-で-azure-に接続してみる">3. GitHub Actions から OpenID Connect で Azure に接続してみる<a href="#3-github-actions-から-openid-connect-で-azure-に接続してみる" class="hash-link" aria-label="Direct link to 3. GitHub Actions から OpenID Connect で Azure に接続してみる" title="Direct link to 3. GitHub Actions から OpenID Connect で Azure に接続してみる">​</a></h3><p>1, 2 で設定は完了しているので、GitHub Actions から OpenID Connect で Azure に接続してみます。</p><p><a href="https://github.com/ks6088ts-labs/baseline-environment-on-azure-terraform/blob/v0.0.1/.github/workflows/deploy.yml" target="_blank" rel="noopener noreferrer">.github/workflows/deploy.yml</a> に GitHub Actions のワークフローが定義されています。</p><p>GitHub Actions では、input を受け取ることができます。以下のように <code>scenario</code> と <code>environment</code> を指定することで、デプロイ対象のシナリオと環境を選択してワークフローを実行できます。</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">workflow_dispatch</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">inputs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># デプロイ対象のシナリオを選択</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">scenario</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">required</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">description</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Scenario to deploy&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">default</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;tfstate_backend&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># 環境を選択</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> environment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">required</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">description</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Environment to deploy&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">default</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ci&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>実行対象の環境と、環境変数を設定します。</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> github.event.inputs.environment </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ARM_CLIENT_ID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.ARM_CLIENT_ID </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ARM_SUBSCRIPTION_ID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.ARM_SUBSCRIPTION_ID </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ARM_TENANT_ID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.ARM_TENANT_ID </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ARM_USE_OIDC</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">secrets.ARM_USE_OIDC</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>接続に成功すると、Azure にリソースがデプロイされます。実行結果は以下のようになります。</p><p><img loading="lazy" alt="github_actions" src="/en/assets/images/github_actions-269408024cccb09462a7ef77a277b774.png" width="642" height="639" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-状態の管理">4. 状態の管理<a href="#4-状態の管理" class="hash-link" aria-label="Direct link to 4. 状態の管理" title="Direct link to 4. 状態の管理">​</a></h3><p>現状、GitHub Actions 経由での実行結果は保持されず、状態は管理できていません。
<a href="https://github.com/ks6088ts-labs/baseline-environment-on-azure-terraform/blob/main/README.md#override-files" target="_blank" rel="noopener noreferrer">環境設定の Override</a> 機能を活用して、環境ごとの設定ファイルを Blob Storage に保存することで、リソースの状態管理をすることができます。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-承認フローの作成">5. 承認フローの作成<a href="#5-承認フローの作成" class="hash-link" aria-label="Direct link to 5. 承認フローの作成" title="Direct link to 5. 承認フローの作成">​</a></h3><p>GitHub Actions に credential を登録することで誰でもデプロイができる状況になります。
便利である反面、セキュリティ上のリスクが高まる可能性があります。
GitHub Actions の環境内のデプロイ設定には保護ルールがあり、承認が必要な場合には承認者を指定することができます。
<a href="https://zenn.dev/ore88ore/articles/github-actions-approval-flow" target="_blank" rel="noopener noreferrer">GitHub Actions の environments を使ってデプロイ時に承認プロセスを導入する</a> が参考になります。
承認フローを作成して、デプロイの承認を必要とするようにすることで、IT 管理者のリソースの払い出しの制御にも活用できるのではないかと思います。具体的なシナリオがあれば、GitHub Actions の環境を活用して、承認フローを作成してみてください。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="考察">考察<a href="#考察" class="hash-link" aria-label="Direct link to 考察" title="Direct link to 考察">​</a></h2><p>本記事では GitHub Actions から OpenID Connect で Azure に接続する設定の自動化方法についてご紹介しました。
設定作業の自動化に際して、シェルスクリプトのアプローチと Terraform のアプローチを実装しました。</p><p>シェルスクリプトのアプローチは、手軽に実装できる反面、再現性や冪等性に問題がありますが、現実問題シェルスクリプトでリトライして調整すりゃいいやって現場はあるだろうとは思います。<br>
<!-- -->Terraform は冪等性や再現性が高く、コード管理もしやすいため、本番環境での利用を検討する際には有用です。事業部門が B2C なり Entra ディレクトリを提供サービス用に外出ししてるケースで、開発者がオペレーターを兼ねてる場合とかだと Terraform x GitHub Actions な構成はハマるのかもとは思いました。</p><p>諸々慣れると便利なのですが、状態管理なども突き詰めだすと、矛盾なく状態を維持する活動が結構大変になります。どこまでやるかの線引きとか、どこまで自動化するかのバランス感覚が求められるなと感じました。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/blog/tags/azure">azure</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/blog/tags/terraform">terraform</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/blog/tags/github">github</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/en/blog/handson-rag-app">Azure 上で作る RAG アプリ開発入門</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-02-05T00:00:00.000Z" itemprop="datePublished">February 5, 2024</time> · <!-- -->23 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/ks6088ts" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/ks6088ts.png" alt="ks6088ts"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/ks6088ts" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">ks6088ts</span></a></div><small class="avatar__subtitle" itemprop="description">Software Engineer / Solutions Architect</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>本記事では Azure 上で RAG アプリを開発するにあたり、必要となる関連リソースとして Azure OpenAI Service, Azure AI Search, Bing Search のベーシックな機能を確認します。実際に、Bing Search API や Azure AI Search と連携した小規模な RAG アプリの作成も行います。</p><p>本記事で掲載している Python スクリプトは、以下のリポジトリに配置しています。
<a href="https://github.com/ks6088ts-labs/recipes/blob/main/python/handson_rag_apps/README.md" target="_blank" rel="noopener noreferrer">https://github.com/ks6088ts-labs/recipes/python/handson_rag_apps</a></p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/blog/tags/azure">azure</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/blog/tags/app-service">app-service</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/blog/tags/azure-openai-service">azure-openai-service</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Azure 上で作る RAG アプリ開発入門" href="/en/blog/handson-rag-app"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/en/blog/graph-api-summary">Microsoft Graph API 関連情報のまとめ</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-01-11T00:00:00.000Z" itemprop="datePublished">January 11, 2024</time> · <!-- -->4 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/ks6088ts" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/ks6088ts.png" alt="ks6088ts"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/ks6088ts" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">ks6088ts</span></a></div><small class="avatar__subtitle" itemprop="description">Software Engineer / Solutions Architect</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>Microsoft Graph API を触る必要が出てきたので、関連情報をまとめておきます。</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/blog/tags/microsoft-graph">Microsoft Graph</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Microsoft Graph API 関連情報のまとめ" href="/en/blog/graph-api-summary"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/en/blog/aoai-private-endpoint-managed-id">AOAI にプライベートエンドポイントから接続し、VM のマネージド ID を利用して API Key 無しで AOAI を呼び出す</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-11-13T00:00:00.000Z" itemprop="datePublished">November 13, 2023</time> · <!-- -->5 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/ks6088ts" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/ks6088ts.png" alt="ks6088ts"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/ks6088ts" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">ks6088ts</span></a></div><small class="avatar__subtitle" itemprop="description">Software Engineer / Solutions Architect</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>本記事では以下の 2 つのシナリオをハンズオン形式で説明します。</p><ol><li>AOAI にプライベートエンドポイントから接続する方法</li><li>VM のマネージド ID を利用して API Key 無しで AOAI を呼び出す方法</li></ol></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/blog/tags/azure">azure</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/blog/tags/aoai">aoai</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/blog/tags/bicep">bicep</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/blog/tags/iac">iac</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about AOAI にプライベートエンドポイントから接続し、VM のマネージド ID を利用して API Key 無しで AOAI を呼び出す" href="/en/blog/aoai-private-endpoint-managed-id"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/en/blog/handson-baseline-environment-on-azure-bicep">ks6088ts-labs/baseline-environment-on-azure-bicep のハンズオン</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-11-03T00:00:00.000Z" itemprop="datePublished">November 3, 2023</time> · <!-- -->3 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/ks6088ts" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/ks6088ts.png" alt="ks6088ts"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/ks6088ts" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">ks6088ts</span></a></div><small class="avatar__subtitle" itemprop="description">Software Engineer / Solutions Architect</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>Bicep のサンプルコードをまとめた <a href="https://github.com/ks6088ts-labs/baseline-environment-on-azure-bicep" target="_blank" rel="noopener noreferrer">ks6088ts-labs/baseline-environment-on-azure-bicep</a> の利用方法をまとめます。</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/blog/tags/azure">azure</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/blog/tags/iac">iac</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/blog/tags/bicep">bicep</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about ks6088ts-labs/baseline-environment-on-azure-bicep のハンズオン" href="/en/blog/handson-baseline-environment-on-azure-bicep"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/en/blog/handson-azure-search-openai-demo">Azure-Samples/azure-search-openai-demo のハンズオン</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-11-01T00:00:00.000Z" itemprop="datePublished">November 1, 2023</time> · <!-- -->5 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/ks6088ts" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/ks6088ts.png" alt="ks6088ts"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/ks6088ts" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">ks6088ts</span></a></div><small class="avatar__subtitle" itemprop="description">Software Engineer / Solutions Architect</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>Retrieval-Augmented Generation (=RAG) pattern のリファレンス実装である azure-search-openai-demo の利用方法をまとめます。</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/blog/tags/azure">azure</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/blog/tags/openai">openai</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Azure-Samples/azure-search-openai-demo のハンズオン" href="/en/blog/handson-azure-search-openai-demo"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/en/blog/bookmarks-aoai">Azure OpenAI Service の参考リンク集</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-08-31T00:00:00.000Z" itemprop="datePublished">August 31, 2023</time> · <!-- -->2 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/ks6088ts" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/ks6088ts.png" alt="ks6088ts"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/ks6088ts" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">ks6088ts</span></a></div><small class="avatar__subtitle" itemprop="description">Software Engineer / Solutions Architect</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>Azure OpenAI Service 活用のために個人的に参考になった情報源を淡々とまとめます。<br>
<!-- -->システム開発の際に必要となる周辺サービス・OSS なども含めています。</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/blog/tags/azure">azure</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/blog/tags/openai">openai</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Azure OpenAI Service の参考リンク集" href="/en/blog/bookmarks-aoai"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/en/blog/aoai-function-calling">Azure OpenAI Service を用いた Function Calling のハンズオン</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-07-26T00:00:00.000Z" itemprop="datePublished">July 26, 2023</time> · <!-- -->16 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/ks6088ts" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/ks6088ts.png" alt="ks6088ts"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/ks6088ts" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">ks6088ts</span></a></div><small class="avatar__subtitle" itemprop="description">Software Engineer / Solutions Architect</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>Azure OpenAI Service を用いた Function Calling を理解するためのハンズオンを行いました。初見では何をしているのかよくわからなかったこともあったので、自分が理解していった過程をまとめておいて後続の誰かに役に立てばと思い足跡を残しておきます。  </p><p>OpenAI 回りのエコシステムは急速に発展していて、 Function Calling の feature 自体は OpenAI 社が機能を公開してからしばらく経っているため既にライブラリ側でのサポートが入っています。実際のアプリ開発では LangChain, Semantic Kernel, OpenAI などのライブラリを利用してアプリを開発することが多いと思うので、それらのライブラリを利用した場合の実装例も併せて紹介します。</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/blog/tags/azure">azure</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/blog/tags/azure-openai-service">azure-openai-service</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/blog/tags/langchain">langchain</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Azure OpenAI Service を用いた Function Calling のハンズオン" href="/en/blog/aoai-function-calling"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/en/blog/aoai-apim-easyauth">Azure OpenAI Service を利用した ChatGPT お試し環境にログ出力機能を追加する</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-06-14T00:00:00.000Z" itemprop="datePublished">June 14, 2023</time> · <!-- -->15 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/ks6088ts" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/ks6088ts.png" alt="ks6088ts"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/ks6088ts" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">ks6088ts</span></a></div><small class="avatar__subtitle" itemprop="description">Software Engineer / Solutions Architect</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p><a href="/en/blog/fork-azure-openai-playground">Azure OpenAI Service を利用した ChatGPT お試し環境の構築</a> では、ChatGPT を体験する環境を簡単に構築する方法をご紹介しました。</p><p>既にご利用いただけたユーザーからのフィードバックとして、「実際の利用ログなどを確認したい」というご要望をいただきました。</p><p>本記事では Azure マネージドサービスを利用してコーディングせずに利用ログを収集する方法を紹介します。</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/blog/tags/azure">azure</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/blog/tags/azure-ad">azure-ad</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/blog/tags/app-service">app-service</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/blog/tags/api-management">api-management</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/blog/tags/azure-openai-service">azure-openai-service</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Azure OpenAI Service を利用した ChatGPT お試し環境にログ出力機能を追加する" href="/en/blog/aoai-apim-easyauth"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/en/blog/fork-azure-openai-playground-en">Building a ChatGPT trial environment using Azure OpenAI Service</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-05-01T00:00:00.000Z" itemprop="datePublished">May 1, 2023</time> · <!-- -->8 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/ks6088ts" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/ks6088ts.png" alt="ks6088ts"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/ks6088ts" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">ks6088ts</span></a></div><small class="avatar__subtitle" itemprop="description">Software Engineer / Solutions Architect</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><ul><li>This article is translated from <a href="/en/blog/fork-azure-openai-playground">Azure OpenAI Service を利用した ChatGPT お試し環境の構築</a></li></ul><hr><p>We have created a trial environment for ChatGPT using Azure OpenAI Service.<br>
<!-- -->Both OpenAI and Azure OpenAI Service already have easy-to-use web apps for experiencing ChatGPT, and all you need is a browser and an account to try it out.</p><ul><li>OpenAI: <a href="https://chat.openai.com/" target="_blank" rel="noopener noreferrer">ChatGPT Web App</a>, <a href="https://platform.openai.com/playground" target="_blank" rel="noopener noreferrer">Playground</a></li><li>Azure: <a href="https://oai.azure.com/portal" target="_blank" rel="noopener noreferrer">Azure OpenAI Studio</a></li></ul><p>From the perspective of a personal trial, just using these web applications is sufficient.<br>
<!-- -->However, when considering the use case of trial use within a wide range of organizations with a view to business application, various issues arise.</p><p>For example, if you simply obtain an API Token and use it in a direct way, you cannot prevent unauthorized use when the API Token is leaked. Also, if you want to limit users to members of your organization, you will need to authenticate them in some way. If you tackle these issues from scratch, you will have less time to spend on the trial of ChatGPT, which is the original purpose of this project.</p><p>Therefore, this article introduces how to build a trial environment for OpenAI API using Azure OpenAI Service with sample code, with a view to using OpenAI API for business PoC.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/blog/tags/azure">azure</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/blog/tags/azure-ad">azure-ad</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/blog/tags/azure-openai-service">azure-openai-service</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/blog/tags/app-service">app-service</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Building a ChatGPT trial environment using Azure OpenAI Service" href="/en/blog/fork-azure-openai-playground-en"><b>Read More</b></a></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><a class="pagination-nav__link pagination-nav__link--next" href="/en/blog/page/2"><div class="pagination-nav__label">Older Entries</div></a></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/en/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/en/docs/category/projects">Projects</a></li><li class="footer__item"><a class="footer__link-item" href="/en/docs/privacy-policy">Privacy Policy</a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/ks6088ts" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/in/ks6088ts" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/ks6088ts" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 ks6088ts. Built with Docusaurus.</div></div></div></footer></div>
<script src="/en/assets/js/runtime~main.ada50a0c.js"></script>
<script src="/en/assets/js/main.f7e2f1a4.js"></script>
</body>
</html>